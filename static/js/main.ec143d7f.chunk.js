(this.webpackJsonpclaymemory=this.webpackJsonpclaymemory||[]).push([[0],{171:function(e,t,n){e.exports=n(243)},180:function(e,t,n){},203:function(e,t){},204:function(e,t){},205:function(e,t){},206:function(e,t){},207:function(e,t){},243:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"NAME",(function(){return G}));var a={};n.r(a),n.d(a,"PDF_UPLOADED",(function(){return W})),n.d(a,"MATERIAL_LOADED",(function(){return z})),n.d(a,"DISPLAY_STATUS",(function(){return J})),n.d(a,"PAGE_UPDATE",(function(){return Y})),n.d(a,"SPAN_ORIGIN",(function(){return K})),n.d(a,"DOCUMENT_SEARCH",(function(){return X})),n.d(a,"WINDOW_LAYOUT",(function(){return $})),n.d(a,"TOP_OFFSET",(function(){return Z}));var c={};n.r(c),n.d(c,"getAll",(function(){return re})),n.d(c,"getPDF",(function(){return ae})),n.d(c,"getWindowMeasurements",(function(){return ce})),n.d(c,"getPDFName",(function(){return oe})),n.d(c,"getTotalPages",(function(){return ie})),n.d(c,"getCurrentPage",(function(){return ue})),n.d(c,"getScrollToPage",(function(){return le})),n.d(c,"getPageControlData",(function(){return de})),n.d(c,"getDisplayStatus",(function(){return se})),n.d(c,"displayStatusIsShow",(function(){return fe})),n.d(c,"getSpanOrigin",(function(){return me})),n.d(c,"getDocumentSearch",(function(){return pe})),n.d(c,"getTopOffset",(function(){return ve}));var o={};n.r(o),n.d(o,"widthPixels",(function(){return be})),n.d(o,"pdfUpload",(function(){return Oe})),n.d(o,"materialLoaded",(function(){return ge})),n.d(o,"setPage",(function(){return De})),n.d(o,"movePage",(function(){return ye})),n.d(o,"nextPage",(function(){return je})),n.d(o,"previousPage",(function(){return Ce})),n.d(o,"pageControlDispatcher",(function(){return Se})),n.d(o,"toggleDisplayState",(function(){return Te})),n.d(o,"setSpanOrigin",(function(){return Ae})),n.d(o,"resetSpanOrigin",(function(){return Ne})),n.d(o,"setDocumentSearch",(function(){return Ie})),n.d(o,"resetDocumentSearch",(function(){return Re})),n.d(o,"setTopOffset",(function(){return we}));var i={};n.r(i),n.d(i,"switchToActiveRiverTooltip",(function(){return Be})),n.d(i,"switchToSummaryRiverTooltip",(function(){return qe})),n.d(i,"undoTooltip",(function(){return Ve})),n.d(i,"redoTooltip",(function(){return Qe})),n.d(i,"nextPageTooltip",(function(){return Ge})),n.d(i,"previousPageTooltip",(function(){return We})),n.d(i,"deleteCardTooltip",(function(){return ze})),n.d(i,"grabForCardTooltip",(function(){return Je})),n.d(i,"jumpToOriginTooltip",(function(){return Ye})),n.d(i,"appendToCardTooltip",(function(){return Ke})),n.d(i,"newQACardTooltip",(function(){return Xe})),n.d(i,"newNoteCardTooltip",(function(){return $e})),n.d(i,"deleteDocumentTooltip",(function(){return Ze})),n.d(i,"loadSavedDocumentTooltip",(function(){return et})),n.d(i,"noMaterialText",(function(){return tt})),n.d(i,"loadingMaterialText",(function(){return nt})),n.d(i,"activeDocumentText",(function(){return rt})),n.d(i,"existingDataText",(function(){return at})),n.d(i,"loadMaterialText",(function(){return ct})),n.d(i,"downloadDatasetsText",(function(){return ot})),n.d(i,"uploadDatasetsText",(function(){return it})),n.d(i,"noteText",(function(){return ut})),n.d(i,"questionText",(function(){return lt})),n.d(i,"answerText",(function(){return dt})),n.d(i,"defaultEnterDelay",(function(){return st})),n.d(i,"defaultEnterNextDelay",(function(){return ft}));var u={};n.r(u),n.d(u,"NewNoteCardTooltip",(function(){return mt})),n.d(u,"AddQAButtonTooltip",(function(){return pt})),n.d(u,"AppendButtonTooltip",(function(){return Et})),n.d(u,"DeleteCardButtonTooltip",(function(){return vt}));var l={};n.r(l),n.d(l,"NAME",(function(){return wt}));var d={};n.r(d),n.d(d,"NAME",(function(){return kt}));var s={};n.r(s),n.d(s,"CARD_REPLACE",(function(){return xt})),n.d(s,"CARD_PUSH",(function(){return Ut})),n.d(s,"CARD_REMOVE",(function(){return _t}));var f={};n.r(f),n.d(f,"toFieldValue",(function(){return Ft})),n.d(f,"createReplace",(function(){return Bt})),n.d(f,"changeCardObject",(function(){return qt}));var m={};n.r(m),n.d(m,"emptyContent",(function(){return Gt})),n.d(m,"noteContentIsEmpty",(function(){return Wt})),n.d(m,"qaContentIsNotFull",(function(){return zt})),n.d(m,"strToCardContent",(function(){return Kt})),n.d(m,"strToNewCardContent",(function(){return Xt}));var p={};n.r(p),n.d(p,"cardIDToNumber",(function(){return $t})),n.d(p,"nextCardID",(function(){return Zt})),n.d(p,"cardIsNotFull",(function(){return tn})),n.d(p,"strToCardConfig",(function(){return nn})),n.d(p,"cardFieldToType",(function(){return an}));var v={};n.r(v),n.d(v,"getAll",(function(){return cn})),n.d(v,"getLastCardIDNumber",(function(){return on})),n.d(v,"getCards",(function(){return un})),n.d(v,"getCardByID",(function(){return ln}));var E={};n.r(E),n.d(E,"cardPush",(function(){return dn})),n.d(E,"emptyNoteCard",(function(){return sn})),n.d(E,"emptyQACard",(function(){return fn})),n.d(E,"cardReplace",(function(){return mn})),n.d(E,"replaceCardFieldContent",(function(){return pn})),n.d(E,"removeCard",(function(){return vn}));var b={};n.r(b),n.d(b,"AddNoteButton",(function(){return On})),n.d(b,"AddQAButton",(function(){return yn})),n.d(b,"DeleteCardButton",(function(){return hn}));var O={};n.r(O),n.d(O,"emptyOrigin",(function(){return An})),n.d(O,"singleOriginToCardOrigin",(function(){return Nn}));var g={};n.r(g),n.d(g,"config",(function(){return p})),n.d(g,"origin",(function(){return O})),n.d(g,"permutation",(function(){return f})),n.d(g,"content",(function(){return m}));var D={};n.r(D),n.d(D,"NAME",(function(){return Pn}));var y={};n.r(y),n.d(y,"ARCHIVE_CURRENT_DATA",(function(){return kn})),n.d(y,"LOAD_DOCUMENT_DATA_SETS",(function(){return xn})),n.d(y,"DELETE_DOCUMENT_DATA_SET",(function(){return Un})),n.d(y,"DOCUMENT_CHANGE",(function(){return _n}));var j={};n.r(j),n.d(j,"archiveDBData",(function(){return Ln})),n.d(j,"loadDocumentDataSets",(function(){return Fn})),n.d(j,"deleteDocumentDataSet",(function(){return Hn}));var C={};n.r(C),n.d(C,"getAll",(function(){return zn})),n.d(C,"getDocumentNames",(function(){return Jn})),n.d(C,"getDocumentDataSets",(function(){return Yn}));var h={};n.r(h),n.d(h,"getAll",(function(){return Zn})),n.d(h,"getRiverMakeUps",(function(){return er})),n.d(h,"getActiveRiverMakeUpID",(function(){return tr})),n.d(h,"getActiveRiverMakeUp",(function(){return nr})),n.d(h,"getActiveRiverCardIDs",(function(){return rr})),n.d(h,"getActiveRiverCards",(function(){return ar})),n.d(h,"getRiverShowState",(function(){return cr})),n.d(h,"riverShowStateIsShow",(function(){return or})),n.d(h,"getLastRiverIDNumber",(function(){return ir})),n.d(h,"getRiverContentState",(function(){return ur})),n.d(h,"getRiverContentFilter",(function(){return lr})),n.d(h,"getOriginRequest",(function(){return dr}));var S={};n.r(S),n.d(S,"toggleRiverShowState",(function(){return Er})),n.d(S,"setRiverContentState",(function(){return br})),n.d(S,"setActiveRiver",(function(){return Or})),n.d(S,"trySetActiveRiver",(function(){return gr})),n.d(S,"setContentFilter",(function(){return Dr})),n.d(S,"resetContentFilter",(function(){return yr})),n.d(S,"setOriginRequest",(function(){return jr})),n.d(S,"resetOriginRequest",(function(){return Cr}));var T={};n.r(T),n.d(T,"NAME",(function(){return Pr}));var A={};n.r(A),n.d(A,"SELECTION_SOURCE",(function(){return kr})),n.d(A,"SELECTION_GOAL",(function(){return xr}));var N={};n.r(N),n.d(N,"getAll",(function(){return Ur})),n.d(N,"getGoalConfig",(function(){return _r})),n.d(N,"getSourceConfig",(function(){return Lr})),n.d(N,"sourceConfigExists",(function(){return Fr}));var I={};n.r(I),n.d(I,"selectionToCard",(function(){return Hr}));var R={};n.r(R),n.d(R,"resetSelectionSource",(function(){return Vr})),n.d(R,"resetSelectionGoal",(function(){return Qr})),n.d(R,"addSelectionSource",(function(){return Gr})),n.d(R,"addMaterialSelectionSource",(function(){return Wr})),n.d(R,"addCardSelectionSource",(function(){return zr})),n.d(R,"addSelectionGoal",(function(){return Jr})),n.d(R,"addCardAppendSelectionGoal",(function(){return Yr}));var w={};n.r(w),n.d(w,"SelectionSnackbar",(function(){return ta})),n.d(w,"MaterialMouseUp",(function(){return na})),n.d(w,"CardFieldMouseUp",(function(){return ra})),n.d(w,"AppendButton",(function(){return ua})),n.d(w,"ContextMenu",(function(){return sa}));var M={};n.r(M),n.d(M,"getSelectionWorkaround",(function(){return Br})),n.d(M,"use_selection",(function(){return I}));var P={};n.r(P),n.d(P,"RiverContentFormGroup",(function(){return Nr})),n.d(P,"CardRiver",(function(){return Ca})),n.d(P,"SwitchActiveRiver",(function(){return ha}));var k={};n.r(k),n.d(k,"pageNumberToRiverMakeUpID",(function(){return Ta})),n.d(k,"riverMakeUpIDToPageNumber",(function(){return Aa})),n.d(k,"emptyCardRiver",(function(){return Na})),n.d(k,"updateStateWithMakeUps",(function(){return Ia})),n.d(k,"removeCardFromRivers",(function(){return Ra}));var x={};n.r(x),n.d(x,"PageChooser",(function(){return Tt})),n.d(x,"PageNavigation",(function(){return Dt})),n.d(x,"PageKeyboardControl",(function(){return At})),n.d(x,"PDFDocument",(function(){return Va})),n.d(x,"HTMLElementMeasurer",(function(){return Ga}));var U={};n.r(U),n.d(U,"collectCurrentDBData",(function(){return Ka}));var _={};n.r(_),n.d(_,"archiveCurrentDBData",(function(){return Xa})),n.d(_,"downloadDBData",(function(){return Za})),n.d(_,"changeDocument",(function(){return ec})),n.d(_,"loadSavedDocument",(function(){return tc})),n.d(_,"deleteDocument",(function(){return nc}));var L={};n.r(L),n.d(L,"ControlBar",(function(){return Jc}));var F,H=n(0),B=n.n(H),q=n(15),V=n.n(q),Q=n(277),G="displayData",W=G+"/PDF_UPLOADED",z=G+"/MATERIAL_LOADED",J=G+"/DISPLAY_STATUS",Y=G+"/PAGE_UPDATE",K=G+"/SPAN_ORIGIN",X=G+"/DOCUMENT_SEARCH",$=G+"/WINDOW_LAYOUT",Z=G+"/TOP_OFFSET",ee=function(e,t){return e===t+1?1:e},te=function(e,t){return 0===e?t:e},ne=n(13),re=function(e){return e[G]},ae=Object(ne.a)(re,(function(e){return e.pdf})),ce=Object(ne.a)(re,(function(e){return e.windowMeasurements})),oe=Object(ne.a)(re,(function(e){return e.pdfName})),ie=Object(ne.a)(re,(function(e){return e.totalPages})),ue=Object(ne.a)(re,(function(e){return e.currentPage})),le=Object(ne.a)(re,(function(e){return e.scrollToPage})),de=Object(ne.a)(ie,ue,(function(e,t){return{currentPage:t,totalPages:e}})),se=Object(ne.a)(re,(function(e){return e.displayStatus})),fe=Object(ne.a)(se,(function(e){return"SHOW"===e})),me=Object(ne.a)(re,(function(e){return e.spanOrigin})),pe=Object(ne.a)(re,(function(e){return e.documentSearch})),ve=Object(ne.a)(re,(function(e){return e.topOffset})),Ee=function(){var e=0;return function(){var t=e;return e++,t}},be=function(e){return{type:$,payload:e}},Oe=function(e){return{type:W,payload:e}},ge=function(e){return{type:z,payload:e}},De=function(e,t){return{type:Y,payload:{page:e,shouldScroll:t}}},ye=function(e){return function(t,n){var r=de(n()),a=r.currentPage,c=r.totalPages;switch(e){case"NEXT":t(De(ee(a+1,c),!0));break;case"PREVIOUS":t(De(te(a-1,c),!0))}}},je=function(){return ye("NEXT")},Ce=function(){return ye("PREVIOUS")},he={ArrowLeft:Ce(),ArrowRight:je()},Se=(F=he,function(e,t){var n=F[e.key];n&&(e.preventDefault(),t(n))}),Te=function(){return function(e,t){var n="SHOW"===se(t())?"HIDE":"SHOW";e({type:J,payload:n})}},Ae=function(e){return{type:K,payload:e}},Ne=function(){return Ae(null)},Ie=function(e){return{type:X,payload:e}},Re=function(){return Ie("")},we=function(e){return{type:Z,payload:e}},Me=n(6),Pe=n(296),ke=n(103),xe=n(276),Ue=n(278),_e=n(132),Le=n.n(_e),Fe=n(131),He=n.n(Fe),Be="Switch to the Active-River view",qe="Switch to the Summary-River view",Ve="Undo last action",Qe="Redo last action",Ge="Next page",We="Previous page",ze="Delete this card",Je="Activate the document-selection grab for this card(-field)",Ye="Jump to the origin of the card content",Ke="Add the current or next selection to this card (only from document)",Xe="Create new QA-card",$e="Create new Note-card",Ze="Delete this document and all its corresponding cards",et="Load the card data of this document",tt="No PDF file specified.",nt="Loading PDF\u2026",rt="Active Document:",at="Inactive documents with existing data:",ct="Load document",ot="Download document datasets",it="Upload document datasets",ut="Note",lt="Question",dt="Answer",st=500,ft=1e3,mt=function(e){var t=e.children;return B.a.createElement(Pe.a,{title:$e,enterDelay:st,enterNextDelay:ft},t)},pt=function(e){var t=e.children;return B.a.createElement(Pe.a,{title:Xe,enterDelay:st,enterNextDelay:ft},t)},vt=function(e){var t=e.children;return B.a.createElement(Pe.a,{title:ze,enterDelay:st,enterNextDelay:ft},t)},Et=function(e){var t=e.children;return B.a.createElement(Pe.a,{title:Ke,enterDelay:st,enterNextDelay:ft},t)},bt={components:u,constants:i},Ot=function(){var e=Object(Me.b)();return B.a.createElement(Pe.a,{title:bt.constants.previousPageTooltip,enterDelay:bt.constants.defaultEnterDelay,enterNextDelay:bt.constants.defaultEnterNextDelay},B.a.createElement(ke.a,{type:"button",onClick:function(){e(Ce())}},B.a.createElement(He.a,null)))},gt=function(){var e=Object(Me.b)();return B.a.createElement(Pe.a,{title:bt.constants.nextPageTooltip,enterDelay:bt.constants.defaultEnterDelay,enterNextDelay:bt.constants.defaultEnterNextDelay},B.a.createElement(ke.a,{type:"button",onClick:function(){e(je())}},B.a.createElement(Le.a,null)))},Dt=function(){return B.a.createElement(xe.a,{variant:"outlined"},B.a.createElement(Q.a,{container:!0,direction:"row"},B.a.createElement(Q.a,{item:!0},B.a.createElement(Ot,null)),B.a.createElement(Q.a,{item:!0},B.a.createElement(Ue.a,{orientation:"vertical"})),B.a.createElement(Q.a,{item:!0},B.a.createElement(gt,null))))},yt=n(5),jt=n(22),Ct=n(291),ht=n(106),St=/(\D)/,Tt=function(){var e=Object(Me.b)(),t=Object(Me.c)(de),n=t.currentPage,r=t.totalPages,a=Object(H.useState)({error:!1,value:null===n||void 0===n?void 0:n.toString(),userInput:null===n||void 0===n?void 0:n.toString()}),c=Object(jt.a)(a,2),o=c[0],i=c[1];return o.value!==n.toString()&&i({error:!1,value:n.toString(),userInput:n.toString()}),B.a.createElement(xe.a,{variant:"outlined"},B.a.createElement(Q.a,{item:!0},B.a.createElement(Q.a,{container:!0,direction:"row",alignItems:"center",justify:"space-between"},B.a.createElement(Q.a,{item:!0,style:{width:"37%"}},B.a.createElement(Ct.a,{inputProps:{style:{padding:"0px",fontSize:"1.25rem",fontFamily:'"Roboto", "Helvetica", "Arial", sansSerif',fontWeight:500,lineHeight:1.6,letterSpacing:"0.0075em"}},type:"text",variant:"filled",value:o.userInput,onKeyDown:function(t){if("Enter"===t.key){t.preventDefault();var n=t.target.value;o.error||e(De(parseInt(n),!0))}},onChange:function(e){var t=e.target.value;!function(e,t){if(""===e||null!==e.trim().match(St))return!1;var n=parseInt(e);return!(n<1||t<n)}(t,r)?i(Object(yt.a)(Object(yt.a)({},o),{},{error:!0,userInput:t})):i(Object(yt.a)(Object(yt.a)({},o),{},{error:!1,userInput:t}))},error:o.error})),B.a.createElement(Q.a,{item:!0,style:{width:"61%"}},B.a.createElement(ht.a,{variant:"h6"},"of ",r)))))},At=function(e){var t=e.children,n=Object(Me.b)(),r=Object(H.useRef)(null);return B.a.createElement("span",{ref:r,onKeyDown:function(e){Se(e,n)},tabIndex:0},t)},Nt=(n(180),n(181),n(62)),It=n(134),Rt=n(159),wt="cardRiverState",Mt=n(280),Pt=n(281),kt="cards",xt=kt+"/CARD_REPLACE",Ut=kt+"/CARD_PUSH",_t=kt+"/CARD_REMOVE",Lt={note:function(e){return e},q:function(e){return e.q},a:function(e){return e.a}},Ft=function(e,t){return Lt[e](t)},Ht={note:function(e,t){return t(e)},q:function(e,t){return Object(yt.a)(Object(yt.a)({},e),{},{q:t(e.q)})},a:function(e,t){return Object(yt.a)(Object(yt.a)({},e),{},{a:t(e.a)})}},Bt=function(e){return function(t){return e}},qt=function(e){var t=Ft(e.inputField,e.inputObject),n=e.createModify(t);return function(e,t,n){return Ht[e](t,n)}(e.fieldToBeChanged,e.objectToBeChanged,n)},Vt=function(){return{q:"",a:""}},Qt={q:Vt,a:Vt,note:function(){return""}},Gt=function(e){return Qt[e]()},Wt=function(e){return""===e},zt=function(e){return""===e.q||""===e.a},Jt={APPEND:function(e){return function(t){return t+" "+e}},REPLACE:Bt},Yt=function(e){return Jt[e]},Kt=function(e,t,n,r){var a={inputObject:e,inputField:"note",fieldToBeChanged:t,objectToBeChanged:r,createModify:Yt(n)};return qt(a)},Xt=function(e,t){var n=Gt(t);return Kt(e,t,"REPLACE",n)},$t=function(e){return parseInt(e)},Zt=function(e){return(e+1).toString()},en={Note:function(e){return Wt(e.content)},"Q-A":function(e){return zt(e.content)}},tn=function(e){return en[e.type](e)},nn=function(e,t,n,r){var a=Kt(e,t,n,r.content);return Object(yt.a)(Object(yt.a)({},r),{},{content:a})},rn={q:"Q-A",a:"Q-A",note:"Note"},an=function(e){return rn[e]},cn=function(e){return e[kt].present},on=Object(ne.a)(cn,(function(e){return e.lastCardIDNumber})),un=Object(ne.a)(cn,(function(e){return e.cards})),ln=function(e,t){return un(e)[t]},dn=function(e){return function(t,n){var r,a;t({type:Ut,payload:(r=e,a=n(),Object(yt.a)(Object(yt.a)({},r),{},{cardID:Zt(on(a))}))})}},sn=function(){return dn({type:"Note",content:""})},fn=function(){return dn({type:"Q-A",content:{q:"",a:""}})},mn=function(e){return{type:xt,payload:e}},pn=function(e,t,n){return mn(nn(n,e,"REPLACE",t))},vn=function(e){return{type:_t,payload:e}},En=n(135),bn=n.n(En),On=function(){var e=Object(Me.b)();return B.a.createElement(bt.components.NewNoteCardTooltip,null,B.a.createElement(ke.a,{type:"button",onClick:function(){e(sn())}},B.a.createElement(bn.a,null)))},gn=n(136),Dn=n.n(gn),yn=function(){var e=Object(Me.b)();return B.a.createElement(bt.components.AddQAButtonTooltip,null,B.a.createElement(ke.a,{type:"button",onClick:function(){e(fn())}},B.a.createElement(Dn.a,null)))},jn=n(137),Cn=n.n(jn),hn=function(e){var t=e.cardID,n=Object(Me.b)();return B.a.createElement(bt.components.DeleteCardButtonTooltip,null,B.a.createElement(ke.a,{type:"button",onClick:function(){n(vn(t))}},B.a.createElement(Cn.a,{fontSize:"small"})))},Sn=function(){return{q:{},a:{}}},Tn={q:Sn,a:Sn,note:function(){return""}},An=function(e){return Tn[e]()},Nn=function(e,t,n){var r={inputObject:e,inputField:"note",fieldToBeChanged:t,objectToBeChanged:n||An(t),createModify:Bt};return qt(r)},In=function(e,t){var n=Object(yt.a)({},e.cards);return delete n[t],Object(yt.a)(Object(yt.a)({},e),{},{cards:n})},Rn=function(e,t,n){return Object(yt.a)(Object(yt.a)({},e),{},{cards:t,lastCardIDNumber:n})},wn=function(e,t){var n=Object(yt.a)({},e);return n[t.cardID]=t,n},Mn=wn,Pn="documentDB",kn=Pn+"/ARCHIVE_CURRENT_DATA",xn=Pn+"/LOAD_DOCUMENT_DATA_SETS",Un=Pn+"/DELETE_DOCUMENT_DATA_SET",_n=Pn+"/DOCUMENT_CHANGE",Ln=function(e){return{type:kn,payload:e}},Fn=function(e,t){return{type:xn,payload:{dbData:e,newActiveDataSet:t}}},Hn=function(e){return{type:Un,payload:e}},Bn=n(37),qn=function(e,t){return Object(yt.a)(Object(yt.a)({},e),{},Object(Bn.a)({},t.name,t))},Vn=function(e,t){return Object(yt.a)(Object(yt.a)({},e),t.reduce((function(e,t){return e[t.name]=t,e}),{}))},Qn=function(e,t){return Object.fromEntries(Object.entries(e).filter((function(e){return e[0]!==t})))},Gn={},Wn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case kn:return qn(e,r);case xn:return Vn(e,r.dbData);case Un:return Qn(e,r);default:return e}},zn=function(e){return e[Pn].present},Jn=Object(ne.a)(zn,(function(e){return Object.keys(e)})),Yn=Object(ne.a)(zn,(function(e){return Object.values(e)})),Kn={actions:j,actionTypes:y,constants:D,reducer:Wn,selectors:C},Xn={cards:{0:{cardID:"0",type:"Q-A",content:{q:"Was ist der Sinn des Lebens?",a:"42"}},1:{cardID:"1",type:"Q-A",content:{q:"Welches Layout macht mehr Sinn?",a:"??"}},2:{cardID:"2",type:"Note",content:"Note here"}},lastCardIDNumber:2},$n={constants:d,actionTypes:s,actions:E,reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xn,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case Ut:var a=$t(r.cardID)+1;return Object(yt.a)(Object(yt.a)({},e),{},{cards:Mn(e.cards,r),lastCardIDNumber:a});case xt:var c=null;return Object(yt.a)(Object(yt.a)({},e),{},{cards:wn(e.cards,r),goalCard:c});case _t:return In(e,r);case Kn.actionTypes.DOCUMENT_CHANGE:return r?Rn(Xn,r.cards,r.lastCardIDNumber):Xn;case Kn.actionTypes.LOAD_DOCUMENT_DATA_SETS:return r.newActiveDataSet?Rn(Xn,r.cards,r.lastCardIDNumber):e;default:return e}},selectors:v,components:b,model:g},Zn=function(e){return e[wt].present},er=Object(ne.a)(Zn,(function(e){return e.riverMakeUps})),tr=Object(ne.a)(Zn,(function(e){return e.activeRiverMakeUpID})),nr=Object(ne.a)(er,tr,(function(e,t){var n=e[t];return n||{cardIDs:[]}})),rr=Object(ne.a)(nr,(function(e){return e.cardIDs})),ar=Object(ne.a)(rr,$n.selectors.getCards,(function(e,t){return e.map((function(e){return t[e]}))})),cr=Object(ne.a)(Zn,(function(e){return e.riverShowState})),or=Object(ne.a)(cr,(function(e){return"SHOW"===e})),ir=Object(ne.a)(Zn,(function(e){return e.lastRiverIDNumber})),ur=Object(ne.a)(Zn,(function(e){return e.riverContentState})),lr=Object(ne.a)(Zn,(function(e){return e.contentFilter})),dr=Object(ne.a)(Zn,(function(e){return e.requestedOrigin})),sr=wt+"/RIVER_ACTIVE_ID",fr=wt+"/RIVER_SHOW_STATE",mr=wt+"/RIVER_CONTENT_STATE",pr=wt+"/RIVER_CONTENT_FILTER",vr=wt+"/ORIGIN_REQUEST",Er=function(){return function(e,t){e({type:fr,payload:or(t())?"HIDE":"SHOW"})}},br=function(e){return{type:mr,payload:e}},Or=function(e){return{type:sr,payload:e}},gr=function(e){return function(t,n){console.log(e,tr(n())!==e),tr(n())!==e&&t(Or(e))}},Dr=function(e){return{type:pr,payload:e}},yr=function(){return{type:pr,payload:""}},jr=function(e){return{type:vr,payload:e}},Cr=function(){return jr(null)},hr=n(7),Sr=n(293),Tr=n(89),Ar=Object(hr.a)({root:{color:Tr.a[400],"&$checked":{color:Tr.a[600]}},checked:{}})((function(e){return B.a.createElement(Sr.a,Object.assign({color:"default"},e))})),Nr=function(){var e=Object(Me.c)(ur),t=Object(Me.b)(),n="ALL"===e||"QAS"===e,r="ALL"===e||"NOTES"===e,a=function(e){n||"QAS"!==e?r||"NOTES"!==e?n&&"QAS"===e?t(br(r?"NOTES":"NONE")):r&&"NOTES"===e&&t(br(n?"QAS":"NONE")):t(br(n?"ALL":"NOTES")):t(br(r?"ALL":"QAS"))};return B.a.createElement(Mt.a,null,B.a.createElement(Pt.a,{control:B.a.createElement(Ar,{checked:n,onClick:function(){a("QAS")}}),label:"QAs"}),B.a.createElement(Pt.a,{control:B.a.createElement(Ar,{checked:r,onClick:function(){a("NOTES")}}),label:"Notes"}))},Ir=n(295),Rr=n(282),wr=n(283),Mr=n(160),Pr="selectionData",kr=Pr+"/SELECTION_SOURCE",xr=Pr+"/SELECTION_GOAL",Ur=function(e){return e[Pr].present},_r=Object(ne.a)(Ur,(function(e){return e.goalConfig})),Lr=Object(ne.a)(Ur,(function(e){return e.sourceConfig})),Fr=Object(ne.a)(Lr,(function(e){return!!e})),Hr=function(e,t,n,r){if(function(e){return!!!e.cardID}(t)){var a=function(e,t){var n=e.contentOrigin,r=e.contentStr,a=t.cardField;return{type:$n.model.config.cardFieldToType(a),content:$n.model.content.strToNewCardContent(r,a),origin:n?$n.model.origin.singleOriginToCardOrigin(n,a):void 0}}(e,t);n($n.actions.cardPush(a))}else{var c=function(e,t,n){var r=$n.selectors.getCardByID(n,t.cardID),a=e.contentOrigin,c=e.contentStr,o=t.cardField;return Object(yt.a)(Object(yt.a)({},r),{},{content:$n.model.content.strToCardContent(c,o,t.updateType,r.content),origin:a?$n.model.origin.singleOriginToCardOrigin(a,o,r.origin):r.origin})}(e,t,r);n($n.actions.cardReplace(c))}},Br=function(){var e=window.getSelection();if(!e)return null;try{var t=document.activeElement;if(t&&t.value){var n=t.value.substring(t.selectionStart,t.selectionEnd);return""===n?null:{text:n,selection:e}}var r=e.toString();return""===r?null:{text:r,selection:e}}catch(a){return null}},qr=function(e){var t=Br();return!!t&&function(e,t){var n,r=null===(n=e.selection.focusNode)||void 0===n?void 0:n.parentNode;if(!r||"SPAN"!==r.nodeName)return!1;var a=r.parentNode;if(!a||"DIV"!==a.nodeName)return!1;var c=Array.from(a.children);if(0===c.length)return!1;var o=c.indexOf(r);return!(o<0)&&{contentStr:e.text,contentOrigin:{spanIndex:o,page:t}}}(t,e)},Vr=function(){return{type:kr,payload:null}},Qr=function(){return{type:xr,payload:null}},Gr=function(e){return function(t,n){var r=n(),a=_r(r);a?(Hr(e,a,t,r),t(Qr())):t(function(e){return{type:kr,payload:e}}(e))}},Wr=function(e){var t=qr(e);return!!t&&Gr(t)},zr=function(e){var t=function(e){var t=Br();return!!t&&{contentStr:t.text,contentOrigin:e}}(e);return!!t&&Gr(t)},Jr=function(e){return function(t,n){var r=n(),a=Lr(r);a?(Hr(a,e,t,r),t(Vr())):t(function(e){return{type:xr,payload:e}}(e))}},Yr=function(e,t){return Jr({cardID:e,cardField:t,updateType:"APPEND"})},Kr={sourceConfig:null,goalConfig:null},Xr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kr,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case kr:return Object(yt.a)(Object(yt.a)({},e),{},{sourceConfig:r});case xr:return Object(yt.a)(Object(yt.a)({},e),{},{goalConfig:r});default:return e}},$r=n(297),Zr=n(138),ea=n.n(Zr),ta=function(){var e=Object(H.useState)(!1),t=Object(jt.a)(e,2),n=t[0],r=t[1],a=Object(Me.b)(),c=Object(Me.c)(Lr);!c&&n&&r(!1),c&&!n&&r(!0);var o=function(){r(!1),a(Vr())},i=B.a.createElement(H.Fragment,null,B.a.createElement("div",null,"Current Selection: "),B.a.createElement("div",{style:{color:"green"}}," ",null===c||void 0===c?void 0:c.contentStr),(null===c||void 0===c?void 0:c.contentOrigin)&&B.a.createElement("div",{style:{color:"red"}}," From Page ",c.contentOrigin.page)),u=function(e){!n||"Escape"!==e.key&&"Esc"!==e.key||o()};return Object(H.useEffect)((function(){return document.addEventListener("keydown",u),function(){document.removeEventListener("keydown",u)}})),B.a.createElement($r.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:n,onClose:function(e,t){"clickaway"===t?e.preventDefault():(r(!1),a(Vr()))},message:i,action:B.a.createElement(ke.a,{size:"small","aria-label":"close",color:"inherit",onClick:o},B.a.createElement(ea.a,{fontSize:"small"}))})},na=function(e){var t=e.children,n=e.page,r=Object(Me.b)();return B.a.createElement("span",{onMouseUp:function(){var e=Wr(n);e&&r(e)},onMouseDown:function(e){var t;0===e.button&&(null===(t=window.getSelection())||void 0===t||t.empty())}},t)},ra=function(e){var t=e.children,n=e.fieldOrigin,r=Object(Me.b)();return B.a.createElement("span",{onMouseUp:function(){var e=zr(n);e&&r(e)}},t)},aa=n(140),ca=n.n(aa),oa=n(139),ia=n.n(oa),ua=function(e){var t=e.cardField,n=e.cardID,r=Object(Me.b)(),a=Object(Me.c)(_r),c=Object(H.useState)(!1),o=Object(jt.a)(c,2),i=o[0],u=o[1],l=!!a&&!!a.cardID&&a.cardID===n&&a.cardField===t;return l?i||u(!0):i&&u(!1),B.a.createElement(bt.components.AppendButtonTooltip,null,B.a.createElement(ke.a,{type:"button",onClick:function(){i||a?l&&r(Qr()):r(Yr(n,t))}},i?B.a.createElement(ia.a,{fontSize:"small"}):B.a.createElement(ca.a,{fontSize:"small"})))},la=n(158),da=n(300),sa=function(){var e=Object(H.useState)(void 0),t=Object(jt.a)(e,2),n=t[0],r=t[1],a=Object(H.useRef)(null),c=Object(H.useCallback)((function(e){!function(e,t){var n,r,a=t.target;return!!(null===(n=e.current)||void 0===n||null===(r=n.querySelector("div.MuiPaper-root"))||void 0===r?void 0:r.contains(a))}(a,e)&&r(void 0)}),[a,r]);Object(H.useEffect)((function(){return document.addEventListener("mousedown",c),function(){document.removeEventListener("mousedown",c)}}),[c]);var o=Object(Me.c)(Fr),i=Object(H.useCallback)((function(e){o&&(e.preventDefault(),r({left:e.x,top:e.y}))}),[o,r]);Object(H.useEffect)((function(){return document.addEventListener("contextmenu",i),function(){document.removeEventListener("contextmenu",i)}}),[i]);var u=!!n,l=Object(Me.b)();return B.a.createElement(la.a,{ref:a,keepMounted:!0,open:u,anchorReference:"anchorPosition",anchorPosition:n},B.a.createElement(da.a,{onClick:function(){l(Jr({cardField:"note",updateType:"REPLACE"})),r(void 0)}},"New: Note"),B.a.createElement(Ue.a,null),B.a.createElement(da.a,{onClick:function(){l(Jr({cardField:"q",updateType:"REPLACE"})),r(void 0)}},"New: Q (Q-A)"),B.a.createElement(da.a,{onClick:function(){l(Jr({cardField:"a",updateType:"REPLACE"})),r(void 0)}},"New: A (Q-A)"))},fa={actions:R,actionTypes:A,constants:T,components:w,reducer:Xr,selectors:N,services:M},ma=function(e){var t=e.storeValue,n=void 0===t?"":t,r=e.saveChanges,a=e.fieldOrigin,c=e.style,o=Object(Mr.a)(e,["storeValue","saveChanges","fieldOrigin","style"]),i=Object(H.useState)({storeValue:n,mutableValue:n}),u=Object(jt.a)(i,2),l=u[0],d=u[1];return l.storeValue!==n&&d({storeValue:n,mutableValue:n}),B.a.createElement(fa.components.CardFieldMouseUp,{fieldOrigin:a&&void 0!==a.spanIndex?a:void 0},B.a.createElement(Ct.a,Object.assign({InputProps:{disableUnderline:!0,style:{minWidth:"400px"}},multiline:!0,variant:"filled",value:l.mutableValue,onChange:function(e){var t=e.target.value;d(Object(yt.a)(Object(yt.a)({},l),{},{mutableValue:t}))},onBlur:function(e){r(e.target.value)},style:c},o)))},pa=n(141),va=n.n(pa),Ea=function(e){var t=e.cardOrigin,n=Object(Me.b)();return B.a.createElement(Pe.a,{title:bt.constants.jumpToOriginTooltip,enterDelay:bt.constants.defaultEnterDelay,enterNextDelay:bt.constants.defaultEnterNextDelay},B.a.createElement(ke.a,{type:"button",onClick:function(){n(jr(t))}},B.a.createElement(va.a,{fontSize:"small"})))},ba=n(83),Oa=function(e){var t=e.config,n=e.cardField;return B.a.createElement(ba.a,{variant:"outlined"},B.a.createElement(Q.a,{container:!0,direction:"row"},B.a.createElement(Q.a,{item:!0},B.a.createElement(fa.components.AppendButton,{cardID:t.cardID,cardField:n})),B.a.createElement(Q.a,{item:!0},t.origin&&B.a.createElement(Ea,{cardOrigin:$n.model.permutation.toFieldValue(n,t.origin)}))))},ga=function(e){var t,n,r=e.config,a=Object(Me.b)();return B.a.createElement(xe.a,{variant:"elevation",elevation:5,style:{padding:"3px"}},B.a.createElement(Q.a,{container:!0,direction:"row",justify:"space-between"},B.a.createElement(Q.a,{item:!0},B.a.createElement(Q.a,{container:!0,direction:"column",spacing:1},B.a.createElement(Q.a,{item:!0},B.a.createElement(Q.a,{container:!0,direction:"row",spacing:1},B.a.createElement(Q.a,{item:!0},B.a.createElement(ma,{saveChanges:function(e){a($n.actions.replaceCardFieldContent("q",r,e))},storeValue:r.content.q,label:bt.constants.questionText,variant:"filled",style:{backgroundColor:"#FFBF69"},InputLabelProps:{style:{color:"#000000"}},fieldOrigin:null===(t=r.origin)||void 0===t?void 0:t.q})),B.a.createElement(Q.a,{item:!0},B.a.createElement(Oa,{cardField:"q",config:r})))),B.a.createElement(Q.a,{item:!0},B.a.createElement(Q.a,{container:!0,direction:"row",spacing:1},B.a.createElement(Q.a,{item:!0},B.a.createElement(ma,{saveChanges:function(e){a($n.actions.replaceCardFieldContent("a",r,e))},storeValue:r.content.a,label:bt.constants.answerText,style:{backgroundColor:"#2EC4B6"},InputLabelProps:{style:{color:"#000000"}},fieldOrigin:null===(n=r.origin)||void 0===n?void 0:n.a})),B.a.createElement(Q.a,{item:!0},B.a.createElement(Oa,{cardField:"a",config:r})))))),B.a.createElement(Q.a,{item:!0},B.a.createElement($n.components.DeleteCardButton,{cardID:r.cardID}))))},Da=function(e){var t=e.config,n=Object(Me.b)();return B.a.createElement(xe.a,{variant:"elevation",elevation:5,style:{padding:"3px"}},B.a.createElement(Q.a,{container:!0,direction:"row",justify:"space-between"},B.a.createElement(Q.a,{item:!0},B.a.createElement(Q.a,{container:!0,direction:"row",spacing:1},B.a.createElement(Q.a,{item:!0},B.a.createElement(ma,{saveChanges:function(e){n($n.actions.cardReplace(Object(yt.a)(Object(yt.a)({},t),{},{content:e})))},storeValue:t.content,label:bt.constants.noteText,variant:"filled",style:{backgroundColor:"#CBF3F0"},InputLabelProps:{style:{color:"#000000"}},fieldOrigin:t.origin})),B.a.createElement(Q.a,{item:!0},B.a.createElement(Oa,{cardField:"note",config:t})))),B.a.createElement(Q.a,{item:!0},B.a.createElement($n.components.DeleteCardButton,{cardID:t.cardID}))))},ya=function(e){var t=e.config;e.riverID;switch(t.type){case"Note":return B.a.createElement(Da,{config:t});case"Q-A":return B.a.createElement(ga,{config:t})}},ja=function(){return B.a.createElement(Q.a,{item:!0},B.a.createElement(Ue.a,null))},Ca=function(e){var t=e.riverID,n=e.materialHeight,r=Object(Me.c)($n.selectors.getCards),a=Object(Me.c)(er)[t],c=a?a.cardIDs.map((function(e){return r[e]})):[],o=Object(Me.c)(ur),i=Object(Me.c)(lr),u=Object(H.useMemo)((function(){var e=c;return"NONE"===o?[]:("ALL"!==o&&("QAS"===o&&(e=c.filter((function(e){return"Q-A"===e.type}))),"NOTES"===o&&(e=c.filter((function(e){return"Note"===e.type})))),""!==i&&(e=e.filter((function(e){switch(e.type){case"Note":return function(e,t){return""===e.content||e.content.includes(t)}(e,i);case"Q-A":return function(e,t){return""===e.content.a||""===e.content.q||e.content.a.includes(t)||e.content.q.includes(t)}(e,i)}return!1}))),function(e,t){var n=Ee();return e.reduce((function(e,r,a,c){return e.push(B.a.createElement(Q.a,{item:!0,key:n()},B.a.createElement(ya,{config:r,riverID:t,key:n()}))),a<c.length-1&&e.push(B.a.createElement(ja,{key:n()})),e}),[])}(e,t))}),[c,t,o,i]);return B.a.createElement(Ir.a,{defaultExpanded:!0,style:{overflowY:"auto",height:n},elevation:5},B.a.createElement(Rr.a,null,B.a.createElement(ht.a,{variant:"h6",align:"center",style:{MozUserSelect:"none",WebkitUserSelect:"none",msUserSelect:"none"}},t)),B.a.createElement(wr.a,null,B.a.createElement(Q.a,{container:!0,direction:"column",spacing:2,justify:"center",alignItems:"stretch"},B.a.createElement(Q.a,{item:!0},B.a.createElement($n.components.AddQAButton,null),B.a.createElement($n.components.AddNoteButton,null),B.a.createElement(Ue.a,null)),B.a.createElement(Q.a,{item:!0},B.a.createElement(Q.a,{container:!0,direction:"column",spacing:2,justify:"center",alignItems:"stretch"},u)))))},ha=function(e){var t=e.children,n=e.riverID,r=Object(Me.b)();return B.a.createElement("span",{onMouseEnter:function(){r(gr(n))}},t)},Sa=n(157),Ta=function(e){return"CardRiver "+e},Aa=function(e){return parseInt(e.replace("CardRiver ",""))},Na=function(e){return{riverID:Ta(e),cardIDs:[]}},Ia=function(e){for(var t=Object(yt.a)({},e),n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.forEach((function(e){t.riverMakeUps[e.riverID]=e})),t},Ra=function(e,t){var n=Object.fromEntries(Object.entries(e.riverMakeUps).map((function(e){return[e[0],Object(yt.a)(Object(yt.a)({},e[1]),{},{cardIDs:e[1].cardIDs.filter((function(e){return e!==t}))})]})));return Object(yt.a)(Object(yt.a)({},e),{},{riverMakeUps:n})},wa={requestedOrigin:null,riverMakeUps:Object(Bn.a)({},Ta(1),{riverID:Ta(1),cardIDs:["2","0","1"]}),activeRiverMakeUpID:Ta(1),lastRiverIDNumber:1,riverShowState:"SHOW",riverContentState:"ALL",contentFilter:""},Ma={constants:l,components:P,reducer:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wa,r=arguments.length>1?arguments[1]:void 0,a=r.type,c=r.payload;switch(a){case sr:return Object(yt.a)(Object(yt.a)({},n),{},{activeRiverMakeUpID:c});case fr:return Object(yt.a)(Object(yt.a)({},n),{},{riverShowState:c});case mr:return Object(yt.a)(Object(yt.a)({},n),{},{riverContentState:c});case $n.actionTypes.CARD_PUSH:return e=n.riverMakeUps[n.activeRiverMakeUpID]?Object(yt.a)(Object(yt.a)({},n.riverMakeUps[n.activeRiverMakeUpID]),{},{cardIDs:[].concat(Object(Sa.a)(n.riverMakeUps[n.activeRiverMakeUpID].cardIDs),[c.cardID])}):{riverID:n.activeRiverMakeUpID,cardIDs:[c.cardID]},(t=Object(yt.a)({},n.riverMakeUps))[n.activeRiverMakeUpID]=e,Object(yt.a)(Object(yt.a)({},n),{},{riverMakeUps:t});case $n.actionTypes.CARD_REMOVE:return Ra(n,c);case Kn.actionTypes.DOCUMENT_CHANGE:return c?Object(yt.a)(Object(yt.a)({},wa),{},{riverMakeUps:c.riverMakeUps,lastRiverIDNumber:c.lastRiverIDNumber}):wa;case Kn.actionTypes.LOAD_DOCUMENT_DATA_SETS:return c.newActiveDataSet?Object(yt.a)(Object(yt.a)({},wa),{},{riverMakeUps:c.newActiveDataSet.riverMakeUps,lastRiverIDNumber:c.newActiveDataSet.lastRiverIDNumber}):n;case pr:return Object(yt.a)(Object(yt.a)({},n),{},{contentFilter:c});case vr:return Object(yt.a)(Object(yt.a)({},n),{},{requestedOrigin:c});default:return n}},selectors:h,actions:S,model:k},Pa=function(e){var t=e.page,n=e.pageRef,r=Object(Me.c)(me),a=Object(H.useRef)(0),c=Object(Me.b)(),o=Object(H.useCallback)((function(){var e=setInterval((function(){var t;if(10===a.current)return a.current=0,clearInterval(e),console.log("invalid origin clicked",r),void c(Ne());var o=null===(t=n.current)||void 0===t?void 0:t.children.item(1);if(o){var i=o.children.item(r.spanIndex);if(i)return i.scrollIntoView({behavior:"auto",block:"center",inline:"center"}),c(Ne()),a.current=0,void clearInterval(e)}a.current=a.current+1}),10)}),[c,a,r,n]);return Object(H.useEffect)((function(){if(r&&r.page===t&&n.current){var e=n.current.children.item(1);if(e){var i=e.children.item(r.spanIndex);i?(i.scrollIntoView({behavior:"auto",block:"center",inline:"center"}),c(Ne()),a.current=0):o()}else o()}}),[c,t,n,r,o]),null},ka={backgroundColor:"blue"};function xa(e){return function(t){return function(e,t){var n=e.length,r=t.length;if(""===t||""===e||r>n)return e;var a=e.indexOf(t);if(-1===a)return e;var c=B.a.createElement("mark",{style:ka},t),o=a>0&&e.slice(0,a),i=[];o&&i.push(o),i.push(c);var u=e.indexOf(t,a+r);if(-1===u){var l=a+r,d=l<n&&e.slice(l);return d&&i.push(d),i}var s=a+r,f=s!==u&&e.slice(s,u);f&&i.push(f),i.push(c);var m=e.indexOf(t,u+r);if(-1===m){var p=u+r;return p<n&&e.slice(p)&&i.push(f),i}var v=u+r,E=v<n&&e.slice(v,m);if(E&&i.push(E),i.push(c),m+r===n)return i;var b=e.slice(m+r);if(b===t)return i.push(c),i;var O=b.split(t);if(O.length<=1)return i.push(b),i;for(var g=0;g<O.length;g++){var D=O[g];0!==g||""!==D?g!==O.length-1||""===D?(""!==D&&i.push(D),i.push(c)):i.push(D):i.push(c)}return i}(t.str,e)}}var Ua=function(e){var t,n=e.pageNumber,r=null===(t=Object(Me.c)(ce))||void 0===t?void 0:t.width,a=Object(Me.c)(pe),c=""!==a?xa(a):void 0,o=Object(H.useRef)(null);return B.a.createElement(H.Fragment,null,B.a.createElement(fa.components.MaterialMouseUp,{page:n},B.a.createElement(At,null,B.a.createElement(Nt.b,{inputRef:function(e){o.current=e},pageNumber:n,width:r*Fa,onRenderSuccess:function(){console.log("rendered Page "+n)},customTextRenderer:c}))),B.a.createElement(Pa,{page:n,pageRef:o}))},_a=function(e){var t=e.index,n=e.data,r=e.style,a=t+1,c=Ma.model.pageNumberToRiverMakeUpID(a),o=n.materialHeights,i=Object(Me.c)(Ma.selectors.getRiverShowState),u=Object(Me.c)(se);return B.a.createElement("div",{style:Object(yt.a)(Object(yt.a)({},r),{},{margin:"4px"})},B.a.createElement(Ma.components.SwitchActiveRiver,{riverID:c},B.a.createElement(Q.a,{container:!0,justify:"space-between",direction:"row",alignItems:"flex-start"},B.a.createElement(Q.a,{item:!0,hidden:"HIDE"===i},B.a.createElement(Ma.components.CardRiver,{riverID:c,materialHeight:o.get(a)})),B.a.createElement(Q.a,{item:!0,hidden:"HIDE"===u},B.a.createElement(Ua,{pageNumber:a})))),B.a.createElement(Ue.a,{style:{marginTop:Ha/2}}))},La=function(e){var t=e.listRef,n=Object(Me.c)(le),r=Object(Me.c)(ue),a=Object(Me.c)(Ma.selectors.getOriginRequest);Object(H.useEffect)((function(){var e;null===(e=t.current)||void 0===e||e.scrollToItem(r-1,"start")}),[]);var c=Object(Me.b)();return Object(H.useEffect)((function(){var e,r;if(a)return null===(e=t.current)||void 0===e||e.scrollToItem(a.page-1,"auto"),c(Ae(a)),c(De(a.page,!1)),void c(Ma.actions.resetOriginRequest());n&&(null===(r=t.current)||void 0===r||r.scrollToItem(n-1,"start"),c(De(n,!1)))}),[c,t,n,a]),null},Fa=.57,Ha=20,Ba=function(e){var t=e.pdfProxyRef,n=e.cachedPageDimensions,r=Object(H.useRef)(),a=Object(Me.c)(ce),c=a?Array.from(n.keys()).reduce((function(e,t){return e.set(t,function(e,t,n){var r=t.get(e),a=n*Fa/r[0];return r[1]*a+20}(t,n,a.width)),e}),new Map):void 0,o=Object(Me.b)(),i=Object(Me.c)(ve);return console.log(null===a||void 0===a?void 0:a.height,i,(a?a.height:0)-i),B.a.createElement(H.Fragment,null,a&&c&&B.a.createElement(Rt.a,{height:a.height-i,itemCount:t.current.numPages,itemSize:function(e){return c.get(e+1)+Ha},itemData:{materialHeights:c},ref:r,width:"100%",onItemsRendered:function(e){o(De(e.visibleStopIndex+1,!1))}},_a),B.a.createElement(La,{listRef:r}))};Nt.c.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(Nt.c.version,"/pdf.worker.js");var qa={cMapUrl:"cmaps/",cMapPacked:!0},Va=function(){var e=Object(Me.c)(ae),t=Object(H.useState)(),n=Object(jt.a)(t,2),r=n[0],a=n[1],c=Object(H.useRef)(),o=Object(Me.b)(),i=null===e||void 0===e?void 0:e.name,u=Object(H.useRef)(i);return u.current!==i&&(u.current=i),B.a.createElement(Nt.a,{loading:bt.constants.loadingMaterialText,noData:bt.constants.noMaterialText,options:qa,file:e,renderMode:"canvas",onLoadSuccess:function(t){o(ge(t.numPages)),e&&function(e,t,n,r){var a=Array.from({length:e.numPages},(function(e,t){return t+1})).map((function(t){return e.getPage(t)}));Promise.all(a).then((function(e){if(t===n.current){var a,c=new Map,o=Object(It.a)(e);try{for(o.s();!(a=o.n()).done;){var i=a.value,u=1*i.view[2],l=1*i.view[3];c.set(i._pageIndex+1,[u,l])}}catch(d){o.e(d)}finally{o.f()}r(c)}}))}(t,i,u,a),c.current=t},onItemClick:function(e){var t=e.pageNumber;o(De(parseInt(t),!0))}},r&&u.current===i&&B.a.createElement(Ba,{pdfProxyRef:c,cachedPageDimensions:r}))},Qa=n(142),Ga=function(){var e=Object(Me.b)(),t=Object(Qa.debounce)(50,(function(){var t=document.documentElement,n=t.clientWidth,r=t.clientHeight;e(be({width:n,height:r}))}));return Object(H.useLayoutEffect)((function(){t()}),[t]),Object(H.useEffect)((function(){return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}})),null},Wa={displayStatus:"SHOW",totalPages:1e3,currentPage:1,scrollToPage:null,windowMeasurements:null,spanOrigin:null,documentSearch:"",topOffset:0},za={actions:o,actionTypes:a,components:x,constants:r,reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wa,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case W:return Object(yt.a)(Object(yt.a)({},e),{},{pdf:r,pdfName:r.name});case Kn.actionTypes.DOCUMENT_CHANGE:return r?r.name===e.pdfName?e:Object(yt.a)(Object(yt.a)({},Wa),{},{pdf:void 0,pdfName:r.name,totalPages:r.totalPages,currentPage:r.currentPage}):e;case z:return Object(yt.a)(Object(yt.a)({},e),{},{totalPages:r});case Y:return Object(yt.a)(Object(yt.a)({},e),{},{currentPage:r.page,scrollToPage:r.shouldScroll?r.page:null});case J:return Object(yt.a)(Object(yt.a)({},e),{},{displayStatus:r});case K:return Object(yt.a)(Object(yt.a)({},e),{},{spanOrigin:r});case X:return Object(yt.a)(Object(yt.a)({},e),{},{documentSearch:r});case Z:return Object(yt.a)(Object(yt.a)({},e),{},{topOffset:r});case $:return Object(yt.a)(Object(yt.a)({},e),{},{windowMeasurements:r});default:return e}},selectors:c},Ja=n(28),Ya=n.n(Ja),Ka=Object(ne.a)(za.selectors.getPDFName,za.selectors.getTotalPages,za.selectors.getCurrentPage,Ma.selectors.getRiverMakeUps,Ma.selectors.getActiveRiverMakeUpID,Ma.selectors.getLastRiverIDNumber,$n.selectors.getCards,$n.selectors.getLastCardIDNumber,(function(e,t,n,r,a,c,o,i){return{name:e,totalPages:t,currentPage:n,riverMakeUps:r,activeRiverMakeUpID:a,lastRiverIDNumber:c,cards:o,lastCardIDNumber:i}})),Xa=function(){return function(e,t){var n=t();if(void 0!==za.selectors.getPDFName(n)){var r=Ka(n);e(Kn.actions.archiveDBData(r))}}},$a=n(210),Za=function(){return function(e,t){e(Xa());var n=Kn.selectors.getDocumentDataSets(t()),r=(new Date).toLocaleString();$a(JSON.stringify(n),r+" ClayMemory.txt")}},ec=function(e){return function(t,n){var r=e.name,a=n(),c=za.selectors.getPDFName(a),o=Kn.selectors.getAll(a);if(void 0!==c){var i=Ka(a);t(Kn.actions.archiveDBData(i))}if(t(za.actions.pdfUpload(e)),r!==c){var u=o[r];t(u?{type:Kn.actionTypes.DOCUMENT_CHANGE,payload:u}:{type:Kn.actionTypes.DOCUMENT_CHANGE}),t(Ja.ActionCreators.clearHistory())}}},tc=function(e){return function(t,n){var r=n(),a=za.selectors.getPDFName(r),c=Kn.selectors.getAll(r);if(void 0!==a){var o=Ka(r);t(Kn.actions.archiveDBData(o))}var i=c[e];t({type:Kn.actionTypes.DOCUMENT_CHANGE,payload:i}),t(Ja.ActionCreators.clearHistory())}},nc=function(e){return function(t,n){var r=n(),a=za.selectors.getPDFName(r);a&&a===e&&(t({type:Kn.actionTypes.DOCUMENT_CHANGE}),t(Ja.ActionCreators.clearHistory())),t(Kn.actions.deleteDocumentDataSet(e))}},rc=n(289),ac=n(290),cc=n(288),oc=n(147),ic=n.n(oc),uc=n(148),lc=n.n(uc),dc=n(298),sc=n(284),fc=n(285),mc=n(286),pc=n(287),vc=n(143),Ec=n.n(vc),bc=function(e){var t=e.document,n=e.handleClose,r=e.open,a=Object(Me.b)();return B.a.createElement(dc.a,{open:r,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},B.a.createElement(sc.a,{id:"alert-dialog-title"},"Delete "+t+" and all associated card data?"),B.a.createElement(fc.a,null,B.a.createElement(mc.a,{id:"alert-dialog-description"},"This change can not be undone.")),B.a.createElement(pc.a,null,B.a.createElement(cc.a,{onClick:n,color:"primary"},"Abort"),B.a.createElement(cc.a,{onClick:function(){a(nc(t)),n()},color:"primary",autoFocus:!0},"Delete document and associated card data")))},Oc=function(e){var t=e.document,n=Object(H.useState)(!1),r=Object(jt.a)(n,2),a=r[0],c=r[1];return B.a.createElement("div",null,B.a.createElement(Pe.a,{title:bt.constants.deleteDocumentTooltip,enterDelay:bt.constants.defaultEnterDelay,enterNextDelay:bt.constants.defaultEnterNextDelay},B.a.createElement(ke.a,{type:"button",onClick:function(){c(!0)}},B.a.createElement(Ec.a,{fontSize:"small"}))),B.a.createElement(bc,{document:t,open:a,handleClose:function(){c(!1)}}))},gc=n(144),Dc=n.n(gc),yc=function(e){var t=e.handleClose,n=e.label,r=Object(Me.b)(),a=Object(Me.c)(za.selectors.getPDFName),c=Object(H.useRef)(null);return B.a.createElement(H.Fragment,null,B.a.createElement(da.a,{onClick:function(){c.current.click()}},B.a.createElement(cc.a,{variant:"contained",color:"primary",disableElevation:!0,startIcon:B.a.createElement(Dc.a,null)},n)),B.a.createElement("input",{ref:c,style:{display:"none"},onChange:function(e){var n=e.target.files,c=n?n[0]:null;if(c){var o=new FileReader;o.readAsText(c),o.onload=function(){var e=JSON.parse(o.result),t=e.find((function(e){return e.name===a}));r(Kn.actions.loadDocumentDataSets(e,t))}}t()},type:"file",accept:".txt"}))},jc=n(145),Cc=n.n(jc),hc=function(e){var t=e.handleClose,n=e.label,r=Object(Me.b)(),a=Object(H.useRef)(null);return B.a.createElement(H.Fragment,null,B.a.createElement(da.a,{onClick:function(){a.current.click()}},B.a.createElement(cc.a,{variant:"contained",color:"primary",disableElevation:!0,startIcon:B.a.createElement(Cc.a,null)},n)),B.a.createElement("input",{ref:a,style:{display:"none"},onChange:function(e){var n=e.target.files,a=n?n[0]:null;a&&r(ec(a)),t()},type:"file",accept:".pdf"}))},Sc=n(146),Tc=n.n(Sc),Ac=function(e){var t=e.document,n=Object(Me.b)();return B.a.createElement(Pe.a,{title:bt.constants.loadSavedDocumentTooltip,enterDelay:bt.constants.defaultEnterDelay,enterNextDelay:bt.constants.defaultEnterNextDelay},B.a.createElement(ke.a,{type:"button",onClick:function(){n(tc(t))}},B.a.createElement(Tc.a,{fontSize:"small"})))},Nc=function(e){var t=e.document;return B.a.createElement(Q.a,{container:!0,direction:"row"},B.a.createElement(Q.a,{item:!0},B.a.createElement(Ac,{document:t})),B.a.createElement(Q.a,{item:!0},B.a.createElement(Ue.a,{orientation:"vertical"})),B.a.createElement(Q.a,{item:!0},B.a.createElement(Oc,{document:t})))},Ic=function(e){var t=e.document;return B.a.createElement(Q.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",spacing:1},B.a.createElement(Q.a,{item:!0},t.replace(".pdf","")),B.a.createElement(Q.a,{item:!0},B.a.createElement(xe.a,{variant:"outlined"},B.a.createElement(Nc,{document:t}))))},Rc=function(e){var t=e.document;return B.a.createElement(Q.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",spacing:1},B.a.createElement(Q.a,{item:!0},t.replace(".pdf","")),B.a.createElement(Q.a,{item:!0},B.a.createElement(xe.a,{variant:"outlined"},B.a.createElement(Oc,{document:t}))))},wc=function(){var e=Object(Me.c)(za.selectors.getPDFName),t=Object(Me.c)(Kn.selectors.getDocumentNames).filter((function(t){return t!==e})),n=B.a.useState(null),r=Object(jt.a)(n,2),a=r[0],c=r[1],o=function(){c(null)},i=Object(Me.b)(),u=Ee();return B.a.createElement("div",null,B.a.createElement(ke.a,{type:"button",onClick:function(e){c(e.currentTarget)}},B.a.createElement(ic.a,null)),B.a.createElement(la.a,{id:"simple-menu",anchorEl:a,keepMounted:!0,open:Boolean(a),onClose:o,MenuListProps:{style:{paddingLeft:"8px",paddingRight:"8px"}}},e&&[B.a.createElement(ht.a,{key:u(),component:"span",variant:"h6"},bt.constants.activeDocumentText),B.a.createElement(Rc,{key:u(),document:e}),B.a.createElement(Ue.a,{key:u(),style:{marginTop:"6px"}})],t.length>0&&[B.a.createElement(ht.a,{key:u(),component:"span",variant:"h6"},bt.constants.existingDataText),B.a.createElement(ht.a,{key:u(),component:"span"},B.a.createElement("ul",{style:{listStyleType:"square"}},t.map((function(e){return e?B.a.createElement("li",{key:u()},B.a.createElement(Ic,{document:e,key:u()})):null})))),B.a.createElement(Ue.a,{key:u(),style:{marginTop:"6px"}})],B.a.createElement(hc,{handleClose:o,label:"Load document"}),B.a.createElement(Ue.a,null),B.a.createElement(da.a,{onClick:function(){i(Za()),o()}},B.a.createElement(cc.a,{variant:"contained",color:"primary",disableElevation:!0,startIcon:B.a.createElement(lc.a,null)},bt.constants.downloadDatasetsText)),B.a.createElement(Ue.a,null),B.a.createElement(yc,{handleClose:o,label:bt.constants.uploadDatasetsText})))},Mc=n(149),Pc=n.n(Mc),kc=n(292),xc=function(){var e=Object(Me.b)(),t=Object(Me.c)(Ma.selectors.getRiverContentFilter),n=Object(H.useState)(t),r=Object(jt.a)(n,2),a=r[0],c=r[1],o=Object(H.useState)("cards"),i=Object(jt.a)(o,2),u=i[0],l=i[1],d=function(){e(Ma.actions.resetContentFilter())},s=function(){e(za.actions.resetDocumentSearch())},f="cards"===u?function(t){""===t&&e(Ma.actions.resetContentFilter()),c(t)}:function(t){""===t&&e(za.actions.resetDocumentSearch()),c(t)},m="cards"===u?d:s,p="cards"===u?function(){return e(Ma.actions.setContentFilter(a))}:function(){return e(za.actions.setDocumentSearch(a))};return B.a.createElement(Q.a,{container:!0,direction:"row",alignItems:"center",spacing:1},B.a.createElement(Q.a,{item:!0},B.a.createElement(kc.a,{variant:"outlined",color:"secondary",native:!0,value:"cards"===u?"Filter cards":"Search document",onChange:function(e){var t;t="Search document"===e.target.value?"document":"cards",l(t),"cards"===t?s():d(),c("")}},B.a.createElement("option",null,"Filter cards"),B.a.createElement("option",null,"Search document"))),B.a.createElement(Q.a,{item:!0},B.a.createElement(Pc.a,{value:a,placeholder:"cards"===u?"Filter cards":"Search document",onChange:f,onCancelSearch:m,onRequestSearch:p,cancelOnEscape:!0})))},Uc=n(150),_c=n.n(Uc),Lc=n(151),Fc=n.n(Lc),Hc=function(){var e=Object(Me.b)();return B.a.createElement(Pe.a,{title:bt.constants.undoTooltip,enterDelay:bt.constants.defaultEnterDelay,enterNextDelay:bt.constants.defaultEnterNextDelay},B.a.createElement("span",null,B.a.createElement(ke.a,{type:"button",onClick:function(){e(Ja.ActionCreators.undo())}},B.a.createElement(_c.a,null))))},Bc=function(){var e=Object(Me.b)();return B.a.createElement(Pe.a,{title:bt.constants.redoTooltip,enterDelay:bt.constants.defaultEnterDelay,enterNextDelay:bt.constants.defaultEnterNextDelay},B.a.createElement(ke.a,{type:"button",onClick:function(){e(Ja.ActionCreators.redo())}},B.a.createElement(Fc.a,null)))},qc=function(){return B.a.createElement(xe.a,{variant:"outlined"},B.a.createElement(Q.a,{container:!0,direction:"row"},B.a.createElement(Q.a,{item:!0},B.a.createElement(Hc,null)),B.a.createElement(Q.a,{item:!0},B.a.createElement(Ue.a,{orientation:"vertical"})),B.a.createElement(Q.a,{item:!0},B.a.createElement(Bc,null))))},Vc=n(152),Qc=n.n(Vc),Gc=function(){var e=Object(Me.b)(),t=Object(Me.c)(Ma.selectors.getRiverShowState);return B.a.createElement(cc.a,{startIcon:B.a.createElement(Pt.a,{label:"River",control:B.a.createElement(Ar,{checked:"SHOW"===t})}),variant:"contained",color:"primary",onClick:function(){e(Ma.actions.toggleRiverShowState())}})},Wc=function(){var e=Object(Me.b)(),t=Object(Me.c)(za.selectors.getDisplayStatus);return B.a.createElement(cc.a,{startIcon:B.a.createElement(Pt.a,{label:"Material",control:B.a.createElement(Ar,{checked:"SHOW"===t})}),variant:"contained",color:"primary",onClick:function(){e(za.actions.toggleDisplayState())}})},zc=function(){var e=B.a.useState(null),t=Object(jt.a)(e,2),n=t[0],r=t[1];return B.a.createElement("div",null,B.a.createElement(ke.a,{type:"button",onClick:function(e){r(e.currentTarget)}},B.a.createElement(Qc.a,null)),B.a.createElement(la.a,{anchorEl:n,keepMounted:!0,open:Boolean(n),onClose:function(){r(null)},MenuListProps:{style:{paddingLeft:"8px",paddingRight:"8px"}}},B.a.createElement(ht.a,{variant:"h6"},"Show:"),B.a.createElement(Q.a,{container:!0,direction:"row",justify:"space-between",spacing:1},B.a.createElement(Q.a,{item:!0},B.a.createElement(xe.a,{variant:"outlined",style:{paddingLeft:"4px",paddingRight:"4px"}},B.a.createElement(Ma.components.RiverContentFormGroup,null))),B.a.createElement(Q.a,{item:!0},B.a.createElement(xe.a,{variant:"outlined",style:{padding:"4px"}},B.a.createElement(Q.a,{container:!0,direction:"column",spacing:1},B.a.createElement(Q.a,{item:!0},B.a.createElement(Gc,null)),B.a.createElement(Q.a,{item:!0},B.a.createElement(Wc,null))))))))},Jc=function(){var e=Object(Me.c)(za.selectors.getPDFName),t=Object(Me.c)(za.selectors.getTopOffset),n=Object(H.useRef)(null),r=Object(Me.b)();return Object(H.useLayoutEffect)((function(){if(n.current){var e=n.current.getBoundingClientRect().bottom;e!==t&&r(za.actions.setTopOffset(e))}}),[n,r,t]),B.a.createElement(za.components.PageKeyboardControl,null,B.a.createElement(rc.a,{ref:n,position:"sticky",style:{width:"100%"}},B.a.createElement(ac.a,{variant:"regular"},B.a.createElement(Q.a,{item:!0},B.a.createElement(Q.a,{container:!0,spacing:1,direction:"row",alignItems:"center",justify:"flex-start"},B.a.createElement(Q.a,{item:!0,style:{width:"20%"}},B.a.createElement(za.components.PageChooser,null)),B.a.createElement(Q.a,{item:!0},B.a.createElement(za.components.PageNavigation,null)),B.a.createElement(Q.a,{item:!0},B.a.createElement(qc,null)))),B.a.createElement(ht.a,{style:{flexGrow:1}},null===e||void 0===e?void 0:e.replace(".pdf","")),B.a.createElement(Q.a,{item:!0},B.a.createElement(xc,null)),B.a.createElement(zc,null),B.a.createElement(wc,null))))},Yc={actions:_,components:L,selectors:U};function Kc(){return B.a.createElement("div",null,B.a.createElement(za.components.HTMLElementMeasurer,null),B.a.createElement(Q.a,{container:!0,justify:"center",direction:"column",alignItems:"stretch",style:{height:"100%",width:"100%"}},B.a.createElement(Q.a,{item:!0},B.a.createElement(Yc.components.ControlBar,null)),B.a.createElement(Q.a,{item:!0},B.a.createElement(za.components.PDFDocument,null))),B.a.createElement(fa.components.ContextMenu,null),B.a.createElement(fa.components.SelectionSnackbar,null))}var Xc,$c=n(30),Zc=n(153),eo=n(63),to=n(154),no=n.n(to),ro=Object(eo.a)((function(e){return function(e){return Object(yt.a)(Object(yt.a)({},e),{},{documentRef:null,materialData:null,pdf:null})}(e)}),(function(e){return function(e){return Object(yt.a)(Object(yt.a)({},e),{},{pdf:void 0,spanOrigin:null,windowMeasurements:null,documentSearch:""})}(e)}),{whitelist:[za.constants.NAME]}),ao=function(e){return Object(yt.a)(Object(yt.a)({},e),{},{contentFilter:""})},co=Object(eo.a)((function(e){return e}),(function(e){return{present:ao(e.present),future:e.future.map(ao),past:e.past.map(ao)}}),{whitelist:[Ma.constants.NAME]}),oo={key:"root",storage:no.a,transforms:[ro,co]},io=n(155),uo=Object($c.combineReducers)((Xc={},Object(Bn.a)(Xc,fa.constants.NAME,Ya()(fa.reducer,{filter:Object(Ja.includeAction)([fa.actionTypes.SELECTION_GOAL,fa.actionTypes.SELECTION_SOURCE])})),Object(Bn.a)(Xc,Ma.constants.NAME,Ya()(Ma.reducer,{filter:Object(Ja.includeAction)([$n.actionTypes.CARD_PUSH,$n.actionTypes.CARD_REMOVE,Kn.actionTypes.LOAD_DOCUMENT_DATA_SETS])})),Object(Bn.a)(Xc,za.constants.NAME,za.reducer),Object(Bn.a)(Xc,$n.constants.NAME,Ya()($n.reducer,{filter:Object(Ja.includeAction)([Kn.actionTypes.LOAD_DOCUMENT_DATA_SETS,$n.actionTypes.CARD_PUSH,$n.actionTypes.CARD_REPLACE,$n.actionTypes.CARD_REMOVE])})),Object(Bn.a)(Xc,Kn.constants.NAME,Ya()(Kn.reducer,{filter:Object(Ja.includeAction)([Kn.actionTypes.LOAD_DOCUMENT_DATA_SETS])})),Xc)),lo=Object(eo.b)(oo,uo),so=Object(io.composeWithDevTools)({stateSanitizer:function(e){return e.displayData.pdf?Object(yt.a)(Object(yt.a)({},e),{},{displayData:Object(yt.a)(Object(yt.a)({},e.displayData),{},{pdf:"PDF_FILE_IS_HERE"})}):e}})(Object($c.applyMiddleware)(Zc.a)),fo=Object($c.createStore)(lo,so),mo=Object(eo.c)(fo),po=n(156);n(242),V.a.render(B.a.createElement(B.a.StrictMode,null,B.a.createElement(Me.a,{store:fo},B.a.createElement(po.a,{loading:null,persistor:mo},B.a.createElement(Kc,null)))),document.getElementById("root"))}},[[171,1,2]]]);
//# sourceMappingURL=main.ec143d7f.chunk.js.map