(this.webpackJsonpclaymemory=this.webpackJsonpclaymemory||[]).push([[0],{181:function(e,t,n){e.exports=n(255)},195:function(e,t,n){},218:function(e,t){},219:function(e,t){},220:function(e,t){},221:function(e,t){},222:function(e,t){},255:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"NAME",(function(){return U}));var a={};n.r(a),n.d(a,"pageNumberToRiverMakeUpID",(function(){return W})),n.d(a,"riverMakeUpIDToPageNumber",(function(){return z})),n.d(a,"emptyCardRiver",(function(){return _})),n.d(a,"updateStateWithMakeUps",(function(){return K})),n.d(a,"removeCardFromRivers",(function(){return J}));var c={};n.r(c),n.d(c,"NAME",(function(){return G}));var o={};n.r(o),n.d(o,"toFieldValue",(function(){return $})),n.d(o,"createReplace",(function(){return Z})),n.d(o,"changeCardObject",(function(){return ee}));var i={};n.r(i),n.d(i,"emptyContent",(function(){return re})),n.d(i,"noteContentIsEmpty",(function(){return ae})),n.d(i,"qaContentIsNotFull",(function(){return ce})),n.d(i,"strToCardContent",(function(){return le})),n.d(i,"strToNewCardContent",(function(){return ue})),n.d(i,"noteContentContainsStringOrEmpty",(function(){return de})),n.d(i,"qaContentContainsStringOrEmpty",(function(){return se}));var l={};n.r(l),n.d(l,"cardIDToNumber",(function(){return fe})),n.d(l,"nextCardID",(function(){return me})),n.d(l,"cardIsNotFull",(function(){return ve})),n.d(l,"strToCardConfig",(function(){return ge})),n.d(l,"cardFieldToType",(function(){return be})),n.d(l,"emptyNote",(function(){return Oe})),n.d(l,"emptyQA",(function(){return je}));var u={};n.r(u),n.d(u,"getState",(function(){return ye})),n.d(u,"hasPast",(function(){return he})),n.d(u,"hasFuture",(function(){return Ce})),n.d(u,"getAll",(function(){return De})),n.d(u,"getLastCardIDNumber",(function(){return Se})),n.d(u,"getNextCardID",(function(){return Te})),n.d(u,"getCards",(function(){return we})),n.d(u,"getCardByID",(function(){return xe}));var d={};n.r(d),n.d(d,"switchToActiveRiverTooltip",(function(){return Ne})),n.d(d,"switchToSummaryRiverTooltip",(function(){return Pe})),n.d(d,"undoTooltip",(function(){return Ae})),n.d(d,"redoTooltip",(function(){return Fe})),n.d(d,"nextPageTooltip",(function(){return Me})),n.d(d,"previousPageTooltip",(function(){return Le})),n.d(d,"deleteCardTooltip",(function(){return Ue})),n.d(d,"jumpToOriginTooltip",(function(){return Be})),n.d(d,"ChoiceCardAsAppendTarget",(function(){return qe})),n.d(d,"AppendToCardTooltip",(function(){return Ve})),n.d(d,"CardIsAppendTargetTooltip",(function(){return He})),n.d(d,"ChoiceCardAsReplaceTarget",(function(){return Qe})),n.d(d,"ReplaceCardTooltip",(function(){return We})),n.d(d,"CardIsReplaceTargetTooltip",(function(){return ze})),n.d(d,"newQACardTooltip",(function(){return _e})),n.d(d,"newNoteCardTooltip",(function(){return Ke})),n.d(d,"unhideCardsTooltip",(function(){return Je})),n.d(d,"deleteDocumentTooltip",(function(){return Ge})),n.d(d,"loadSavedDocumentTooltip",(function(){return Xe})),n.d(d,"noMaterialText",(function(){return $e})),n.d(d,"loadingMaterialText",(function(){return Ye})),n.d(d,"activeDocumentText",(function(){return Ze})),n.d(d,"existingDataText",(function(){return et})),n.d(d,"loadMaterialText",(function(){return tt})),n.d(d,"downloadDatasetsText",(function(){return nt})),n.d(d,"uploadDatasetsText",(function(){return rt})),n.d(d,"noteText",(function(){return at})),n.d(d,"questionText",(function(){return ct})),n.d(d,"answerText",(function(){return ot})),n.d(d,"defaultEnterDelay",(function(){return it})),n.d(d,"defaultEnterNextDelay",(function(){return lt}));var s={};n.r(s),n.d(s,"NewNoteCardTooltip",(function(){return ft})),n.d(s,"AddQAButtonTooltip",(function(){return mt})),n.d(s,"DeleteCardButtonTooltip",(function(){return pt})),n.d(s,"UnhideCardsTooltip",(function(){return vt})),n.d(s,"BiggerTooltip",(function(){return st}));var f={};n.r(f),n.d(f,"AddNoteButton",(function(){return Ct})),n.d(f,"AddQAButton",(function(){return Tt})),n.d(f,"DeleteCardButton",(function(){return It})),n.d(f,"UndoRedoCard",(function(){return Kt})),n.d(f,"UndoRedoKeyListener",(function(){return Jt}));var m={};n.r(m),n.d(m,"emptyOrigin",(function(){return $t})),n.d(m,"singleOriginToCardOrigin",(function(){return Yt}));var p={};n.r(p),n.d(p,"config",(function(){return l})),n.d(p,"origin",(function(){return m})),n.d(p,"permutation",(function(){return o})),n.d(p,"content",(function(){return i}));var v={};n.r(v),n.d(v,"getAll",(function(){return tn})),n.d(v,"getRiverMakeUps",(function(){return nn})),n.d(v,"getNonEmptyRiverIDs",(function(){return rn})),n.d(v,"getNonEmptyRiverIDsSorted",(function(){return an})),n.d(v,"getNonEmptyRiverMakeUpsSorted",(function(){return cn})),n.d(v,"getNonEmptyRiverCardsSorted",(function(){return on})),n.d(v,"getActiveRiverMakeUpID",(function(){return ln})),n.d(v,"getActiveRiverMakeUp",(function(){return un})),n.d(v,"getActiveRiverCardIDs",(function(){return dn})),n.d(v,"getActiveRiverCards",(function(){return sn})),n.d(v,"getRiverShowState",(function(){return fn})),n.d(v,"riverShowStateIsShow",(function(){return mn})),n.d(v,"getRiverContentState",(function(){return pn})),n.d(v,"getRiverContentFilter",(function(){return vn})),n.d(v,"getOriginRequest",(function(){return gn}));var g={};n.r(g),n.d(g,"getAll",(function(){return qn})),n.d(g,"getTargetConfig",(function(){return Vn})),n.d(g,"getSourceConfig",(function(){return Hn})),n.d(g,"sourceConfigExists",(function(){return Qn}));var E={};n.r(E),n.d(E,"selectionToCard",(function(){return Wn}));var b={};n.r(b),n.d(b,"resetSelectionSource",(function(){return Zn})),n.d(b,"resetSelectionTarget",(function(){return tr})),n.d(b,"addSelectionSource",(function(){return nr})),n.d(b,"addMaterialSelectionSource",(function(){return rr})),n.d(b,"addCardSelectionSource",(function(){return ar})),n.d(b,"addSelectionTarget",(function(){return cr})),n.d(b,"addCardAppendSelectionTarget",(function(){return or})),n.d(b,"addCardReplaceSelectionTarget",(function(){return ir}));var O={};n.r(O),n.d(O,"SelectionSnackbar",(function(){return dr})),n.d(O,"MaterialMouseUp",(function(){return sr})),n.d(O,"CardFieldMouseUp",(function(){return fr})),n.d(O,"AppendButton",(function(){return Er})),n.d(O,"ContextMenu",(function(){return jr})),n.d(O,"ReplaceButton",(function(){return Sr}));var j={};n.r(j),n.d(j,"getSelectionWorkaround",(function(){return zn})),n.d(j,"use_selection",(function(){return E}));var y={};n.r(y),n.d(y,"RiverContentFormGroup",(function(){return Pn})),n.d(y,"CardRiver",(function(){return Wr})),n.d(y,"SwitchActiveRiver",(function(){return zr})),n.d(y,"ClayCard",(function(){return Mr})),n.d(y,"ShowRiverCheckbox",(function(){return Kr}));var h={};n.r(h),n.d(h,"filterCardConfigs",(function(){return qr}));var C={};n.r(C),n.d(C,"NAME",(function(){return Yr})),n.d(C,"MaterialMultiplier",(function(){return Zr}));var D={};n.r(D),n.d(D,"getAll",(function(){return ea})),n.d(D,"getPDF",(function(){return ta})),n.d(D,"getPDFName",(function(){return na})),n.d(D,"getTotalPages",(function(){return ra})),n.d(D,"getCurrentPage",(function(){return aa})),n.d(D,"getPageControlData",(function(){return ca})),n.d(D,"getPDFShowStatus",(function(){return oa})),n.d(D,"getSpanOrigin",(function(){return ia})),n.d(D,"getDocumentSearch",(function(){return la}));var S={};n.r(S),n.d(S,"PageChooser",(function(){return Ca})),n.d(S,"PageNavigation",(function(){return Qa})),n.d(S,"PageKeyboardControl",(function(){return Ta})),n.d(S,"ShowMaterialCheckbox",(function(){return Ma})),n.d(S,"PDFDocument",(function(){return Ia})),n.d(S,"PDFPage",(function(){return Fa}));var T={};n.r(T),n.d(T,"getAll",(function(){return _a})),n.d(T,"getDocumentNames",(function(){return Ka})),n.d(T,"getDocumentDataSets",(function(){return Ja})),n.d(T,"collectCurrentDBData",(function(){return Ga}));var w={};n.r(w),n.d(w,"DataOptions",(function(){return Nc}));var x={};n.r(x),n.d(x,"getAll",(function(){return Vc})),n.d(x,"getWindowMeasurements",(function(){return Hc})),n.d(x,"getTopOffset",(function(){return Qc})),n.d(x,"getListIndex",(function(){return Wc})),n.d(x,"getScrollToPage",(function(){return zc})),n.d(x,"getScrollToOriginSpan",(function(){return _c})),n.d(x,"getCurrentView",(function(){return Kc}));var I={};n.r(I),n.d(I,"Display",(function(){return wo}));var R=n(0),k=n.n(R),N=n(15),P=n.n(N),A=n(4),F=n(20),M=n(25),L=n(71),U="cardRiverState",B=n(293),q=n(294),V=n(52),H=n(10),Q=n(8),W=function(e){return"CardRiver "+e},z=function(e){return parseInt(e.replace("CardRiver ",""))},_=function(e){return{riverID:W(e),cardIDs:[]}},K=function(e){for(var t=Object(Q.a)({},e),n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.forEach((function(e){t.riverMakeUps[e.riverID]=e})),t},J=function(e,t){var n=Object.fromEntries(Object.entries(e.riverMakeUps).map((function(e){return[e[0],Object(Q.a)(Object(Q.a)({},e[1]),{},{cardIDs:e[1].cardIDs.filter((function(e){return e!==t}))})]})).filter((function(e){return 0!==e[1].cardIDs.length})));return Object(Q.a)(Object(Q.a)({},e),{},{riverMakeUps:n})},G="cards",X={note:function(e){return e},q:function(e){return e.q},a:function(e){return e.a}},$=function(e,t){return X[e](t)},Y={note:function(e,t){return t(e)},q:function(e,t){return Object(Q.a)(Object(Q.a)({},e),{},{q:t(e.q)})},a:function(e,t){return Object(Q.a)(Object(Q.a)({},e),{},{a:t(e.a)})}},Z=function(e){return function(t){return e}},ee=function(e){var t=$(e.inputField,e.inputObject),n=e.createModify(t);return function(e,t,n){return Y[e](t,n)}(e.fieldToBeChanged,e.objectToBeChanged,n)},te=function(){return{q:"",a:""}},ne={q:te,a:te,note:function(){return""}},re=function(e){return ne[e]()},ae=function(e){return""===e},ce=function(e){return""===e.q||""===e.a},oe={APPEND:function(e){return function(t){return(t+" "+e).trim()}},REPLACE:Z},ie=function(e){return oe[e]},le=function(e,t,n,r){var a={inputObject:e,inputField:"note",fieldToBeChanged:t,objectToBeChanged:r,createModify:ie(n)};return ee(a)},ue=function(e,t){var n=re(t);return le(e,t,"REPLACE",n)},de=function(e,t){return""===e.content||e.content.includes(t)},se=function(e,t){return""===e.content.a||""===e.content.q||e.content.a.includes(t)||e.content.q.includes(t)},fe=function(e){return parseInt(e)},me=function(e){return(e+1).toString()},pe={Note:function(e){return ae(e.content)},"Q-A":function(e){return ce(e.content)}},ve=function(e){return pe[e.type](e)},ge=function(e,t,n,r){var a=le(e,t,n,r.content);return Object(Q.a)(Object(Q.a)({},r),{},{content:a})},Ee={q:"Q-A",a:"Q-A",note:"Note"},be=function(e){return Ee[e]},Oe=function(e){return{type:"Note",content:"",cardID:e}},je=function(e){return{type:"Q-A",content:{q:"",a:""},cardID:e}},ye=function(e){return e[G]},he=Object(H.a)(ye,(function(e){return e.past.length>0})),Ce=Object(H.a)(ye,(function(e){return e.future.length>0})),De=function(e){return e[G].present},Se=Object(H.a)(De,(function(e){return e.lastCardIDNumber})),Te=Object(H.a)(Se,me),we=Object(H.a)(De,(function(e){return e.cards})),xe=function(e,t){return we(e)[t]},Ie=n(140),Re=n.n(Ie),ke=n(109),Ne="Switch to the Active-River view",Pe="Switch to the Summary-River view",Ae="Undo last action",Fe="Redo last action",Me="Next page",Le="Previous page",Ue="Delete this card",Be="Jump to the origin of the card content",qe="Mark this card field so the next selection is added to it",Ve="Add the current selection to this card field",He="The next selection will be added to this card field (click to unselect)",Qe="Mark this card field to be replaced by the next selection",We="Replace this card field with the current selection",ze="The next selection will replace this card field (click to unselect)",_e="Create new QA-card",Ke="Create new Note-card",Je="This river contains hidden cards. Click to show.",Ge="Delete this document and all its corresponding cards",Xe="Load the card data of this document",$e="No PDF file specified.",Ye="Loading PDF\u2026",Ze="Active Document:",et="Inactive documents with existing data:",tt="Load document",nt="Download document datasets",rt="Upload document datasets",at="Note",ct="Question",ot="Answer",it=500,lt=1e3,ut=n(7),dt=n(311),st=Object(ut.a)((function(e){return{tooltip:{fontSize:14}}}))(dt.a),ft=function(e){var t=e.children;return k.a.createElement(st,{title:Ke,enterDelay:it,enterNextDelay:lt},t)},mt=function(e){var t=e.children;return k.a.createElement(st,{title:_e,enterDelay:it,enterNextDelay:lt},t)},pt=function(e){var t=e.children;return k.a.createElement(st,{title:Ue,enterDelay:it,enterNextDelay:lt},t)},vt=function(e){var t=e.children;return k.a.createElement(st,{title:Je,enterDelay:it,enterNextDelay:lt},t)},gt={components:s,constants:d},Et=n(38),bt={cards:{},lastCardIDNumber:0},Ot=function(e,t){var n=Object(Q.a)({},e);return n[t.cardID]=t,n},jt=Object(Et.a)({name:G,initialState:bt,reducers:{cardPush:function(e,t){var n=t.payload;return Object(Q.a)(Object(Q.a)({},e),{},{cards:Ot(e.cards,n),lastCardIDNumber:fe(n.cardID)+1})},cardReplace:function(e,t){var n=t.payload;return Object(Q.a)(Object(Q.a)({},e),{},{cards:Ot(e.cards,n)})},cardFieldReplace:function(e,t){var n=t.payload;return Object(Q.a)(Object(Q.a)({},e),{},{cards:Ot(e.cards,ge(n.newValue,n.cardField,"REPLACE",n.cardConfig))})},cardRemove:function(e,t){var n=t.payload,r=Object(Q.a)({},e.cards);return delete r[n],Object(Q.a)(Object(Q.a)({},e),{},{cards:r})},allCardsReplace:function(e,t){return t.payload},allCardsReset:function(){return bt}}}),yt=jt.actions,ht=jt,Ct=function(){var e=Object(A.c)(),t=Object(A.d)(Te);return k.a.createElement(gt.components.NewNoteCardTooltip,null,k.a.createElement(ke.a,{type:"button",onClick:function(){e(yt.cardPush(Oe(t)))}},k.a.createElement(Re.a,null)))},Dt=n(141),St=n.n(Dt),Tt=function(){var e=Object(A.c)(),t=Object(A.d)(Te);return k.a.createElement(gt.components.AddQAButtonTooltip,null,k.a.createElement(ke.a,{type:"button",onClick:function(){e(yt.cardPush(je(t)))}},k.a.createElement(St.a,null)))},wt=n(142),xt=n.n(wt),It=function(e){var t=e.cardID,n=Object(A.c)();return k.a.createElement(gt.components.DeleteCardButtonTooltip,null,k.a.createElement(ke.a,{type:"button",onClick:function(){n(yt.cardRemove(t))}},k.a.createElement(xt.a,{fontSize:"small"})))},Rt=n(17),kt=n(290),Nt=n(291),Pt=n(292),At=n(143),Ft=n.n(At),Mt=n(144),Lt=n.n(Mt),Ut=n(33),Bt=n.n(Ut),qt=n(312),Vt=n(91),Ht=n.n(Vt);function Qt(e){var t=e.message,n=e.close,r=function(e,t){"clickaway"!==t&&n()};return k.a.createElement(qt.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:!0,autoHideDuration:4e3,onClose:r,message:t,action:k.a.createElement(ke.a,{size:"small","aria-label":"close",color:"inherit",onClick:r},k.a.createElement(Ht.a,{fontSize:"small"}))})}var Wt,zt=function(e){var t=e.announce,n=Object(A.c)(),r=Object(A.d)(he);return k.a.createElement(gt.components.BiggerTooltip,{title:gt.constants.undoTooltip,enterDelay:gt.constants.defaultEnterDelay,enterNextDelay:gt.constants.defaultEnterNextDelay},k.a.createElement("span",null,k.a.createElement(ke.a,{type:"button",onClick:function(){n(Ut.ActionCreators.undo()),t()},disabled:!r},k.a.createElement(Ft.a,null))))},_t=function(e){var t=e.announce,n=Object(A.c)(),r=Object(A.d)(Ce);return k.a.createElement(gt.components.BiggerTooltip,{title:gt.constants.redoTooltip,enterDelay:gt.constants.defaultEnterDelay,enterNextDelay:gt.constants.defaultEnterNextDelay},k.a.createElement("span",null,k.a.createElement(ke.a,{type:"button",onClick:function(){n(Ut.ActionCreators.redo()),t()},disabled:!r},k.a.createElement(Lt.a,null))))},Kt=function(){var e=Object(R.useState)(""),t=Object(Rt.a)(e,2),n=t[0],r=t[1],a=function(){r("")};return k.a.createElement(k.a.Fragment,null,"undo"===n&&k.a.createElement(Qt,{message:"Executed undo",close:a}),"redo"===n&&k.a.createElement(Qt,{message:"Executed redo",close:a}),k.a.createElement(kt.a,{variant:"outlined"},k.a.createElement(Nt.a,{container:!0,direction:"row"},k.a.createElement(Nt.a,{item:!0},k.a.createElement(zt,{announce:function(){r("undo")}})),k.a.createElement(Nt.a,{item:!0},k.a.createElement(Pt.a,{orientation:"vertical"})),k.a.createElement(Nt.a,{item:!0},k.a.createElement(_t,{announce:function(){r("redo")}})))))},Jt=function(e){var t=e.children,n=Object(A.c)(),r=Object(R.useState)(""),a=Object(Rt.a)(r,2),c=a[0],o=a[1],i=function(){o("")};return k.a.createElement("span",{onKeyDown:function(e){e.ctrlKey&&("z"===e.key?(n(Ut.ActionCreators.undo()),e.preventDefault(),o("undo")):"y"===e.key&&(n(Ut.ActionCreators.redo()),e.preventDefault(),o("redo")))}},"undo"===c&&k.a.createElement(Qt,{message:"Executed undo",close:i}),"redo"===c&&k.a.createElement(Qt,{message:"Executed redo",close:i}),t)},Gt=function(){return{q:{},a:{}}},Xt={q:Gt,a:Gt,note:function(){return""}},$t=function(e){return Xt[e]()},Yt=function(e,t,n){var r={inputObject:e,inputField:"note",fieldToBeChanged:t,objectToBeChanged:n||$t(t),createModify:Z};return ee(r)},Zt=ht.reducer,en={constants:c,actions:ht.actions,reducer:Zt,name:ht.name,selectors:u,components:f,model:p},tn=function(e){return e[U].present},nn=Object(H.a)(tn,(function(e){return e.riverMakeUps})),rn=Object(H.a)(nn,(function(e){return Object.keys(e)})),an=Object(H.a)(rn,(function(e){return e.sort((function(e,t){return z(e)-z(t)}))})),cn=Object(H.a)(nn,(function(e){return Object.values(e).sort((function(e,t){return z(e.riverID)-z(t.riverID)}))})),on=Object(H.a)(cn,en.selectors.getCards,(function(e,t){var n,r=[],a=Object(V.a)(e);try{for(a.s();!(n=a.n()).done;){var c,o=n.value,i=Object(V.a)(o.cardIDs);try{for(i.s();!(c=i.n()).done;){var l=c.value;r.push(t[l])}}catch(u){i.e(u)}finally{i.f()}}}catch(u){a.e(u)}finally{a.f()}return r})),ln=Object(H.a)(tn,(function(e){return e.riverActiveID})),un=Object(H.a)(nn,ln,(function(e,t){var n=e[t];return n||{cardIDs:[]}})),dn=Object(H.a)(un,(function(e){return e.cardIDs})),sn=Object(H.a)(dn,en.selectors.getCards,(function(e,t){return e.map((function(e){return t[e]}))})),fn=Object(H.a)(tn,(function(e){return e.riverShowState})),mn=Object(H.a)(fn,(function(e){return"SHOW"===e})),pn=Object(H.a)(tn,(function(e){return e.riverContentState})),vn=Object(H.a)(tn,(function(e){return e.riverContentFilter})),gn=Object(H.a)(tn,(function(e){return e.riverOriginRequest})),En=n(307),bn=n(95),On=Object(ut.a)({root:{color:bn.a[400],"&$checked":{color:bn.a[600]}},checked:{}})((function(e){return k.a.createElement(En.a,Object.assign({color:"default"},e))})),jn=n(167),yn=function(){var e=0;return function(){var t=e;return e++,t}},hn=function(e){return function(t,n){var r=n.payload;return Object(Q.a)(Object(Q.a)({},t),{},Object(F.a)({},e,r))}},Cn={riverOriginRequest:null,riverMakeUps:{},riverActiveID:W(1),riverShowState:"SHOW",riverContentState:"ALL",riverContentFilter:"",count_DONT_USE:0},Dn=hn("riverActiveID"),Sn=hn("riverShowState"),Tn=hn("riverContentState"),wn=hn("riverContentFilter"),xn=hn("riverOriginRequest"),In=function(e){return Object(Q.a)(Object(Q.a)({},e),{},{count_DONT_USE:e.count_DONT_USE+1})},Rn=Object(Et.a)({name:U,initialState:Cn,reducers:{riverActiveID:Dn,riverShowState:Sn,riverContentState:Tn,riverContentFilter:wn,riverOriginRequest:xn,riverUnhide:function(e){return Object(Q.a)(Object(Q.a)({},e),{},{riverContentState:"ALL",riverContentFilter:""})},allRiversReset:function(e){return Cn},allRiversReplace:function(e,t){var n=t.payload;return Object(Q.a)(Object(Q.a)({},Cn),{},{riverMakeUps:n})}},extraReducers:(Wt={},Object(F.a)(Wt,en.actions.cardPush.type,(function(e,t){var n,r,a=t.payload;return n=e.riverMakeUps[e.riverActiveID]?Object(Q.a)(Object(Q.a)({},e.riverMakeUps[e.riverActiveID]),{},{cardIDs:[].concat(Object(jn.a)(e.riverMakeUps[e.riverActiveID].cardIDs),[a.cardID])}):{riverID:e.riverActiveID,cardIDs:[a.cardID]},(r=Object(Q.a)({},e.riverMakeUps))[e.riverActiveID]=n,Object(Q.a)(Object(Q.a)({},e),{},{riverMakeUps:r,count_DONT_USE:0})})),Object(F.a)(Wt,en.actions.cardRemove.type,(function(e,t){var n=t.payload;return Object(Q.a)(Object(Q.a)({},J(e,n)),{},{count_DONT_USE:0})})),Object(F.a)(Wt,en.actions.cardReplace.type,In),Object(F.a)(Wt,en.actions.cardFieldReplace.type,In),Wt)}),kn=Rn.actions,Nn=Rn,Pn=function(){var e=Object(A.d)(pn),t=Object(A.c)(),n="ALL"===e||"QAS"===e,r="ALL"===e||"NOTES"===e,a=function(e){n||"QAS"!==e?r||"NOTES"!==e?n&&"QAS"===e?t(r?kn.riverContentState("NOTES"):kn.riverContentState("NONE")):r&&"NOTES"===e&&t(n?kn.riverContentState("QAS"):kn.riverContentState("NONE")):t(n?kn.riverContentState("ALL"):kn.riverContentState("NOTES")):t(r?kn.riverContentState("ALL"):kn.riverContentState("QAS"))};return k.a.createElement(B.a,null,k.a.createElement(q.a,{control:k.a.createElement(On,{checked:n,onClick:function(){a("QAS")}}),label:"QAs"}),k.a.createElement(q.a,{control:k.a.createElement(On,{checked:r,onClick:function(){a("NOTES")}}),label:"Notes"}))},An=n(112),Fn=n(313),Mn=n(296),Ln=n(297),Un=n(169),Bn=n(308),qn=function(e){return e.selectionData},Vn=Object(H.a)(qn,(function(e){return e.targetConfig})),Hn=Object(H.a)(qn,(function(e){return e.sourceConfig})),Qn=Object(H.a)(Hn,(function(e){return!!e})),Wn=function(e,t,n,r){if(function(e){return!!!e.cardID}(t)){var a=function(e,t){var n=e.contentOrigin,r=e.contentStr,a=t.cardField;return{type:en.model.config.cardFieldToType(a),content:en.model.content.strToNewCardContent(r,a),origin:n?en.model.origin.singleOriginToCardOrigin(n,a):void 0}}(e,t),c=Te(r);n(en.actions.cardPush(Object(Q.a)(Object(Q.a)({},a),{},{cardID:c})))}else{var o=function(e,t,n){var r=en.selectors.getCardByID(n,t.cardID),a=e.contentOrigin,c=e.contentStr,o=t.cardField;return Object(Q.a)(Object(Q.a)({},r),{},{content:en.model.content.strToCardContent(c,o,t.updateType,r.content),origin:a?en.model.origin.singleOriginToCardOrigin(a,o,r.origin):r.origin})}(e,t,r);n(en.actions.cardReplace(o))}},zn=function(){var e=window.getSelection();if(!e)return null;try{var t=document.activeElement;if(t&&t.value){var n=t.value.substring(t.selectionStart,t.selectionEnd).trim();return""===n?null:{text:n,selection:e}}var r=e.toString().trim();return""===r?null:{text:r,selection:e}}catch(a){return null}},_n=function(e){var t=zn();return!(!t||t.text.length>1e3)&&function(e,t){var n,r,a=e.selection,c=null===(n=a.anchorNode)||void 0===n?void 0:n.parentNode,o=null===(r=a.focusNode)||void 0===r?void 0:r.parentNode;if(!c||!o)return!1;if("MARK"===c.nodeName&&!(c=c.parentNode))return!1;if("MARK"===o.nodeName&&!(o=o.parentNode))return!1;if("SPAN"!==c.nodeName){var i;if("DIV"!==c.nodeName||"SPAN"!==(null===(i=a.anchorNode)||void 0===i?void 0:i.nodeName))return!1;c=a.anchorNode}if("SPAN"!==o.nodeName){var l;if("DIV"!==o.nodeName||"SPAN"!==(null===(l=a.focusNode)||void 0===l?void 0:l.nodeName))return!1;o=a.focusNode}var u=c.parentNode;if(!u||"DIV"!==u.nodeName)return!1;var d=Array.from(u.childNodes);if(0===d.length)return!1;var s=d.indexOf(c),f=d.indexOf(o);return-1!==s&&-1!==f&&{contentStr:e.text,contentOrigin:{spanIndexStart:s,spanIndexEnd:f,page:t}}}(t,e)},Kn=hn("sourceConfig"),Jn=hn("targetConfig"),Gn=Object(Et.a)({name:"selectionData",initialState:{sourceConfig:null,targetConfig:null},reducers:{selectionSource:Kn,selectionTarget:Jn},extraReducers:Object(F.a)({},en.actions.cardRemove.type,(function(e,t){var n=t.payload;return Object(Q.a)(Object(Q.a)({},e),{},{targetConfig:e.targetConfig&&e.targetConfig.cardID&&e.targetConfig.cardID===n?null:e.targetConfig})}))}),Xn=Gn.actions,$n=Gn,Yn=Xn.selectionSource,Zn=function(){return Yn(null)},er=Xn.selectionTarget,tr=function(){return er(null)},nr=function(e){return function(t,n){var r=n(),a=Vn(r);a?(Wn(e,a,t,r),t(tr())):t(Yn(e))}},rr=function(e){var t=_n(e);return!!t&&nr(t)},ar=function(e){var t=function(e){var t=zn();return!!t&&{contentStr:t.text,contentOrigin:e}}(e);return!!t&&nr(t)},cr=function(e){return function(t,n){var r=n(),a=Hn(r);a?(Wn(a,e,t,r),t(Zn())):t(er(e))}},or=function(e,t){return cr({cardID:e,cardField:t,updateType:"APPEND"})},ir=function(e,t){return cr({cardID:e,cardField:t,updateType:"REPLACE"})},lr=n(145),ur=n.n(lr),dr=function(){var e=Object(R.useState)(!1),t=Object(Rt.a)(e,2),n=t[0],r=t[1],a=Object(A.c)(),c=Object(A.d)(Hn);!c&&n&&r(!1),c&&!n&&r(!0);var o=function(){r(!1),a(Zn())},i=function(e){!n||"Escape"!==e.key&&"Esc"!==e.key||o()};return Object(R.useEffect)((function(){return document.addEventListener("keydown",i),function(){document.removeEventListener("keydown",i)}})),k.a.createElement(ur.a,{positionOffset:{x:"0%",y:"0%"},bounds:"parent"},k.a.createElement(qt.a,{style:{maxWidth:"400px",overflowX:"auto"},anchorOrigin:{vertical:"top",horizontal:"center"},open:n,onClose:function(e,t){"clickaway"!==t&&(r(!1),a(Zn()))},onContextMenu:function(e){e.preventDefault(),r(!1),a(Zn())},message:k.a.createElement(Nt.a,{container:!0,direction:"row",spacing:1},k.a.createElement(Nt.a,{item:!0},k.a.createElement(kt.a,{variant:"outlined",color:"secondary",style:{padding:"4px",color:"white",backgroundColor:"#3f51b5",maxWidth:"400px",overflowX:"auto"},square:!0},k.a.createElement(An.a,{variant:"h4"},"Selection:")),k.a.createElement(kt.a,{variant:"outlined",style:{padding:"4px",color:"black",backgroundColor:"white"},square:!0},k.a.createElement(An.a,{variant:"body1"},null===c||void 0===c?void 0:c.contentStr))),(null===c||void 0===c?void 0:c.contentOrigin)&&k.a.createElement(Nt.a,{item:!0},k.a.createElement(kt.a,{variant:"outlined",color:"secondary",style:{padding:"4px",color:"black",backgroundColor:"white"},square:!0},k.a.createElement(An.a,{variant:"h4"},"Origin:")),k.a.createElement(kt.a,{variant:"outlined",style:{padding:"4px",color:"white",backgroundColor:"#3f51b5"},square:!0},k.a.createElement(An.a,{variant:"body1"},"Page ",c.contentOrigin.page)))),action:k.a.createElement(ke.a,{size:"small","aria-label":"close",color:"inherit",onClick:o},k.a.createElement(Ht.a,{fontSize:"small"}))}))},sr=function(e){var t=e.children,n=e.page,r=Object(A.c)();return k.a.createElement("span",{onMouseUp:function(){var e=rr(n);e&&r(e)},onMouseDown:function(e){var t;0===e.button&&(null===(t=window.getSelection())||void 0===t||t.empty())}},t)},fr=function(e){var t=e.children,n=e.fieldOrigin,r=Object(A.c)();return k.a.createElement("span",{onMouseUp:function(){var e=ar(n);e&&r(e)}},t)},mr=n(147),pr=n.n(mr),vr=n(146),gr=n.n(vr),Er=function(e){var t=e.cardField,n=e.cardID,r=Object(A.c)(),a=Object(A.d)(Hn),c=Object(A.d)(Vn),o=Object(R.useState)(!1),i=Object(Rt.a)(o,2),l=i[0],u=i[1],d=!!c&&!!c.cardID&&c.cardID===n&&c.cardField===t,s=d&&"APPEND"===c.updateType;return s?l||u(!0):l&&u(!1),k.a.createElement(gt.components.BiggerTooltip,{title:s?gt.constants.CardIsAppendTargetTooltip:a?gt.constants.AppendToCardTooltip:gt.constants.ChoiceCardAsAppendTarget,enterDelay:gt.constants.defaultEnterDelay,enterNextDelay:gt.constants.defaultEnterNextDelay},k.a.createElement("span",null,k.a.createElement(ke.a,{type:"button",onClick:function(){l||c?s&&r(tr()):r(or(n,t))},disabled:d&&!s||!!c&&!d},l?k.a.createElement(gr.a,{fontSize:"small"}):k.a.createElement(pr.a,{fontSize:"small"}))))},br=n(168),Or=n(315),jr=function(){var e=Object(R.useState)(void 0),t=Object(Rt.a)(e,2),n=t[0],r=t[1],a=Object(R.useRef)(null),c=Object(R.useCallback)((function(e){!function(e,t){var n,r,a=t.target;return!!(null===(n=e.current)||void 0===n||null===(r=n.querySelector("div.MuiPaper-root"))||void 0===r?void 0:r.contains(a))}(a,e)&&r(void 0)}),[a,r]);Object(R.useEffect)((function(){return document.addEventListener("mousedown",c),function(){document.removeEventListener("mousedown",c)}}),[c]);var o=Object(A.d)(Qn),i=Object(R.useCallback)((function(e){o&&(e.preventDefault(),r({left:e.x,top:e.y}))}),[o,r]);Object(R.useEffect)((function(){return document.addEventListener("contextmenu",i),function(){document.removeEventListener("contextmenu",i)}}),[i]);var l=!!n,u=Object(A.c)();return k.a.createElement(br.a,{ref:a,keepMounted:!0,open:l,anchorReference:"anchorPosition",anchorPosition:n},k.a.createElement(Or.a,{onClick:function(){u(cr({cardField:"note",updateType:"REPLACE"})),r(void 0)}},"New: Note"),k.a.createElement(Pt.a,null),k.a.createElement(Or.a,{onClick:function(){u(cr({cardField:"q",updateType:"REPLACE"})),r(void 0)}},"New: Q (Q-A)"),k.a.createElement(Or.a,{onClick:function(){u(cr({cardField:"a",updateType:"REPLACE"})),r(void 0)}},"New: A (Q-A)"))},yr=n(148),hr=n.n(yr),Cr=n(149),Dr=n.n(Cr),Sr=function(e){var t=e.cardField,n=e.cardID,r=Object(A.c)(),a=Object(A.d)(Hn),c=Object(A.d)(Vn),o=Object(R.useState)(!1),i=Object(Rt.a)(o,2),l=i[0],u=i[1],d=!!c&&!!c.cardID&&c.cardID===n&&c.cardField===t,s=d&&"REPLACE"===c.updateType;return s?l||u(!0):l&&u(!1),k.a.createElement(gt.components.BiggerTooltip,{title:s?gt.constants.CardIsReplaceTargetTooltip:a?gt.constants.ReplaceCardTooltip:gt.constants.ChoiceCardAsReplaceTarget,enterDelay:gt.constants.defaultEnterDelay,enterNextDelay:gt.constants.defaultEnterNextDelay},k.a.createElement("span",null,k.a.createElement(ke.a,{type:"button",onClick:function(){l||c?s&&r(tr()):r(ir(n,t))},disabled:d&&!s||!!c&&!d},l?k.a.createElement(hr.a,{fontSize:"small"}):k.a.createElement(Dr.a,{fontSize:"small"}))))},Tr=$n.reducer,wr={actions:b,name:$n.name,components:O,reducer:Tr,selectors:g,services:j},xr=function(e){var t=e.storeValue,n=void 0===t?"":t,r=e.saveChanges,a=e.fieldOrigin,c=e.style,o=Object(Un.a)(e,["storeValue","saveChanges","fieldOrigin","style"]),i=Object(R.useState)({storeValue:n,mutableValue:n}),l=Object(Rt.a)(i,2),u=l[0],d=l[1];return u.storeValue!==n&&d({storeValue:n,mutableValue:n}),k.a.createElement(wr.components.CardFieldMouseUp,{fieldOrigin:a&&void 0!==a.spanIndexStart?a:void 0},k.a.createElement(Bn.a,Object.assign({InputProps:{disableUnderline:!0,style:{minWidth:"400px"}},multiline:!0,variant:"filled",value:u.mutableValue,onChange:function(e){var t=e.target.value;d(Object(Q.a)(Object(Q.a)({},u),{},{mutableValue:t}))},onBlur:function(e){r(e.target.value)},style:c},o)))},Ir=n(150),Rr=n.n(Ir),kr=function(e){var t=e.cardOrigin,n=Object(A.c)();return k.a.createElement(gt.components.BiggerTooltip,{title:gt.constants.jumpToOriginTooltip,enterDelay:gt.constants.defaultEnterDelay,enterNextDelay:gt.constants.defaultEnterNextDelay},k.a.createElement(ke.a,{type:"button",onClick:function(){n(kn.riverOriginRequest(t))}},k.a.createElement(Rr.a,{fontSize:"small"})))},Nr=n(90),Pr=function(e){var t=e.config,n=e.cardField,r=t.origin?en.model.permutation.toFieldValue(n,t.origin):null,a=void 0!==(null===r||void 0===r?void 0:r.page);return k.a.createElement(Nr.a,{variant:"outlined"},k.a.createElement(Nt.a,{container:!0,direction:"row"},k.a.createElement(Nt.a,{item:!0},k.a.createElement(wr.components.AppendButton,{cardID:t.cardID,cardField:n})),k.a.createElement(Nt.a,{item:!0},k.a.createElement(wr.components.ReplaceButton,{cardID:t.cardID,cardField:n})),k.a.createElement(Nt.a,{item:!0},a&&k.a.createElement(kr,{cardOrigin:r}))))},Ar=function(e){var t,n,r=e.config,a=Object(A.c)();return k.a.createElement(kt.a,{variant:"elevation",elevation:5,style:{padding:"3px"}},k.a.createElement(Nt.a,{container:!0,direction:"row",justify:"space-between"},k.a.createElement(Nt.a,{item:!0},k.a.createElement(Nt.a,{container:!0,direction:"column",spacing:1},k.a.createElement(Nt.a,{item:!0},k.a.createElement(Nt.a,{container:!0,direction:"row",spacing:1},k.a.createElement(Nt.a,{item:!0},k.a.createElement(xr,{saveChanges:function(e){a(en.actions.cardFieldReplace({cardField:"q",cardConfig:r,newValue:e}))},storeValue:r.content.q,label:gt.constants.questionText,variant:"filled",style:{backgroundColor:"#FFBF69"},InputLabelProps:{style:{color:"#000000"}},fieldOrigin:null===(t=r.origin)||void 0===t?void 0:t.q})),k.a.createElement(Nt.a,{item:!0},k.a.createElement(Pr,{cardField:"q",config:r})))),k.a.createElement(Nt.a,{item:!0},k.a.createElement(Nt.a,{container:!0,direction:"row",spacing:1},k.a.createElement(Nt.a,{item:!0},k.a.createElement(xr,{saveChanges:function(e){a(en.actions.cardFieldReplace({cardField:"a",cardConfig:r,newValue:e}))},storeValue:r.content.a,label:gt.constants.answerText,style:{backgroundColor:"#2EC4B6"},InputLabelProps:{style:{color:"#000000"}},fieldOrigin:null===(n=r.origin)||void 0===n?void 0:n.a})),k.a.createElement(Nt.a,{item:!0},k.a.createElement(Pr,{cardField:"a",config:r})))))),k.a.createElement(Nt.a,{item:!0},k.a.createElement(en.components.DeleteCardButton,{cardID:r.cardID}))))},Fr=function(e){var t=e.config,n=Object(A.c)();return k.a.createElement(kt.a,{variant:"elevation",elevation:5,style:{padding:"3px"}},k.a.createElement(Nt.a,{container:!0,direction:"row",justify:"space-between"},k.a.createElement(Nt.a,{item:!0},k.a.createElement(Nt.a,{container:!0,direction:"row",spacing:1},k.a.createElement(Nt.a,{item:!0},k.a.createElement(xr,{saveChanges:function(e){n(en.actions.cardReplace(Object(Q.a)(Object(Q.a)({},t),{},{content:e})))},storeValue:t.content,label:gt.constants.noteText,variant:"filled",style:{backgroundColor:"#CBF3F0"},InputLabelProps:{style:{color:"#000000"}},fieldOrigin:t.origin})),k.a.createElement(Nt.a,{item:!0},k.a.createElement(Pr,{cardField:"note",config:t})))),k.a.createElement(Nt.a,{item:!0},k.a.createElement(en.components.DeleteCardButton,{cardID:t.cardID}))))},Mr=function(e){var t=e.config;switch(t.type){case"Note":return k.a.createElement(Fr,{config:t});case"Q-A":return k.a.createElement(Ar,{config:t})}},Lr=function(){return k.a.createElement(Nt.a,{item:!0},k.a.createElement(Pt.a,null))},Ur=function(e){return"Q-A"===e.type},Br=function(e){return"Note"===e.type},qr=function(e,t,n){if("NONE"===t)return[];var r=[];return"ALL"!==t&&("QAS"===t?r.push(Ur):"NOTES"===t&&r.push(Br)),""!==n&&r.push(function(e){return function(t){switch(t.type){case"Note":return en.model.content.noteContentContainsStringOrEmpty(t,e);case"Q-A":return en.model.content.qaContentContainsStringOrEmpty(t,e)}}}(n)),r.length>0?e.filter(function(e){return function(t){return e.reduce((function(e,n){return e||n(t)}),!1)}}(r)):e},Vr=n(151),Hr=n.n(Vr),Qr=function(){var e=Object(A.c)();return k.a.createElement(gt.components.UnhideCardsTooltip,null,k.a.createElement(ke.a,{type:"button",onClick:function(){e(kn.riverUnhide())}},k.a.createElement(Hr.a,null)))},Wr=function(e){var t=e.riverID,n=e.materialHeight,r=Object(A.d)(en.selectors.getCards),a=Object(A.d)(nn)[t],c=a?a.cardIDs.map((function(e){return r[e]})):[],o=Object(A.d)(pn),i=Object(A.d)(vn),l=qr(c,o,i),u=function(e){var t=yn();return e.reduce((function(e,n,r,a){return e.push(k.a.createElement(Nt.a,{item:!0,key:t()},k.a.createElement(Mr,{config:n,key:t()}))),r<a.length-1&&e.push(k.a.createElement(Lr,{key:t()})),e}),[])}(l),d=c.length!==l.length;return k.a.createElement(Fn.a,{expanded:!0,defaultExpanded:!0,style:{overflow:"auto",height:n},elevation:5},k.a.createElement(Mn.a,null,k.a.createElement(An.a,{variant:"h6",align:"center",style:{MozUserSelect:"none",WebkitUserSelect:"none",msUserSelect:"none"}},t)),k.a.createElement(Ln.a,null,k.a.createElement(Nt.a,{container:!0,direction:"column",spacing:2,justify:"center",alignItems:"stretch"},k.a.createElement(Nt.a,{item:!0},k.a.createElement(Nt.a,{container:!0,direction:"row"},k.a.createElement(Nt.a,{item:!0},k.a.createElement(en.components.AddQAButton,null)),k.a.createElement(Nt.a,{item:!0},k.a.createElement(en.components.AddNoteButton,null)),k.a.createElement(Nt.a,{item:!0},d&&k.a.createElement(Pt.a,{orientation:"vertical"})),k.a.createElement(Nt.a,{item:!0},d&&k.a.createElement(Qr,null))),k.a.createElement(Pt.a,{style:{marginTop:"4px"}})),k.a.createElement(Nt.a,{item:!0},k.a.createElement(Nt.a,{container:!0,direction:"column",spacing:2,justify:"center",alignItems:"stretch"},u)))))},zr=function(e){var t=e.children,n=e.riverID,r=Object(A.c)(),a=Object(A.d)(ln);return k.a.createElement("span",{onMouseEnter:function(){a!==n&&r(kn.riverActiveID(n))}},t)},_r=n(298),Kr=function(){var e=Object(A.c)(),t=Object(A.d)(fn);return k.a.createElement(_r.a,{startIcon:k.a.createElement(q.a,{label:"River",control:k.a.createElement(On,{checked:"SHOW"===t})}),variant:"contained",color:"primary",onClick:function(){e(kn.riverShowState("SHOW"===t?"HIDE":"SHOW"))}})},Jr=Nn.actions,Gr={constants:r,components:y,reducer:Nn.reducer,name:Nn.name,selectors:v,actions:Jr,model:a,services:h},Xr=n(304),$r=n(305),Yr="pdfData",Zr=.63,ea=function(e){return e[Yr]},ta=Object(H.a)(ea,(function(e){return e.pdf})),na=Object(H.a)(ea,(function(e){return e.pdfName})),ra=Object(H.a)(ea,(function(e){return e.totalPages})),aa=Object(H.a)(ea,(function(e){return e.currentPage})),ca=Object(H.a)(ra,aa,(function(e,t){return{currentPage:t,totalPages:e}})),oa=Object(H.a)(ea,(function(e){return e.pdfShowStatus})),ia=Object(H.a)(ea,(function(e){return e.spanOrigin})),la=Object(H.a)(ea,(function(e){return e.documentSearch})),ua={pdfShowStatus:"SHOW",totalPages:1e3,currentPage:1,spanOrigin:null,documentSearch:""},da=hn("totalPages"),sa=hn("pdfShowStatus");hn("spanOrigin");var fa,ma=hn("documentSearch"),pa=hn("currentPage"),va=function(e,t){return e===t+1?1:e},ga=function(e,t){return 0===e?t:e},Ea=Object(Et.a)({name:Yr,initialState:ua,reducers:{pdfUpload:function(e,t){var n=t.payload;return Object(Q.a)(Object(Q.a)({},e),{},{pdf:n,pdfName:n.name,currentPage:e.pdfName===n.name?e.currentPage:ua.currentPage})},totalPages:da,pdfShowStatus:sa,spanOrigin:function(e,t){var n=t.payload;return Object(Q.a)(Object(Q.a)({},e),{},{spanOrigin:n,currentPage:n?n.page:e.currentPage})},documentSearch:ma,pageUpdate:pa,nextPage:function(e){var t=va(e.currentPage+1,e.totalPages);return Object(Q.a)(Object(Q.a)({},e),{},{currentPage:t,scrollToPage:t})},previousPage:function(e){var t=ga(e.currentPage-1,e.totalPages);return Object(Q.a)(Object(Q.a)({},e),{},{currentPage:t,scrollToPage:t})},existingDocumentPayload:function(e,t){var n=t.payload;return Object(Q.a)(Object(Q.a)({},ua),{},{pdf:void 0},n)}}}),ba=Ea.actions,Oa=Ea,ja=/(\D)/,ya=function(e){var t=e.totalPages,n=Object(A.c)(),r=Object(A.d)(aa),a=Object(R.useState)({error:!1,value:null===r||void 0===r?void 0:r.toString(),userInput:null===r||void 0===r?void 0:r.toString()}),c=Object(Rt.a)(a,2),o=c[0],i=c[1];return o.value!==r.toString()&&i({error:!1,value:r.toString(),userInput:r.toString()}),k.a.createElement(Bn.a,{inputProps:{style:{padding:"0px",fontSize:"1.25rem",fontFamily:'"Roboto", "Helvetica", "Arial", sansSerif',fontWeight:500,lineHeight:1.6,letterSpacing:"0.0075em"}},type:"text",variant:"filled",value:o.userInput,onKeyDown:function(e){if("Enter"===e.key){e.preventDefault();var t=e.target.value;o.error||n(ba.pageUpdate(parseInt(t)))}},onChange:function(e){var n=e.target.value;!function(e,t){if(""===e||null!==e.trim().match(ja))return!1;var n=parseInt(e);return!(n<1||t<n)}(n,t)?i(Object(Q.a)(Object(Q.a)({},o),{},{error:!0,userInput:n})):i(Object(Q.a)(Object(Q.a)({},o),{},{error:!1,userInput:n}))},error:o.error})},ha=function(e){var t=e.totalPages;return k.a.createElement(An.a,{variant:"h6"},"of ",t)},Ca=function(){var e=Object(A.d)(ra);return k.a.createElement(kt.a,{variant:"outlined"},k.a.createElement(Nt.a,{item:!0},k.a.createElement(Nt.a,{container:!0,direction:"row",alignItems:"center",justify:"space-between"},k.a.createElement(Nt.a,{item:!0,style:{width:"37%"}},k.a.createElement(ya,{totalPages:e})),k.a.createElement(Nt.a,{item:!0,style:{width:"61%"}},k.a.createElement(ha,{totalPages:e})))))},Da={ArrowLeft:ba.previousPage(),ArrowRight:ba.nextPage()},Sa=(fa=Da,function(e,t){var n=fa[e.key];n&&(e.preventDefault(),t(n))}),Ta=function(e){var t=e.children,n=Object(A.c)(),r=Object(R.useRef)(null);return k.a.createElement("span",{ref:r,onKeyDown:function(e){Sa(e,n)},tabIndex:0},t)},wa=(n(195),n(196),n(66));wa.c.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(wa.c.version,"/pdf.worker.js");var xa={cMapUrl:"cmaps/",cMapPacked:!0},Ia=function(e){var t=e.ChildComponent,n=Object(A.d)(ta),r=Object(R.useState)(),a=Object(Rt.a)(r,2),c=a[0],o=a[1],i=Object(R.useRef)(),l=Object(A.c)(),u=null===n||void 0===n?void 0:n.name,d=Object(R.useRef)(u);return d.current!==u&&(d.current=u),k.a.createElement(wa.a,{loading:gt.constants.loadingMaterialText,noData:gt.constants.noMaterialText,options:xa,file:n,renderMode:"canvas",onLoadSuccess:function(e){l(ba.totalPages(e.numPages)),n&&function(e,t,n,r){var a=Array.from({length:e.numPages},(function(e,t){return t+1})).map((function(t){return e.getPage(t)}));Promise.all(a).then((function(e){if(t===n.current){var a,c=new Map,o=Object(V.a)(e);try{for(o.s();!(a=o.n()).done;){var i=a.value,l=1*i.view[2],u=1*i.view[3];c.set(i._pageIndex+1,[l,u])}}catch(d){o.e(d)}finally{o.f()}r(c)}}))}(e,u,d,o),i.current=e},onItemClick:function(e){var t=e.pageNumber;l(ba.pageUpdate(parseInt(t)))}},c&&d.current===u&&k.a.createElement(t,{pdfProxyRef:i,cachedPageDimensions:c}))},Ra=function(e){return function(t){return function(e,t){var n=e.itemIndex;return n>=t.spanIndexStart&&n<=t.spanIndexEnd?k.a.createElement("mark",{style:{backgroundColor:"red"}},e.str):e.str}(t,e)}},ka={backgroundColor:"blue"};function Na(e){return function(t){return function(e,t){var n=e.length,r=t.length;if(""===t||""===e||r>n)return e;var a=e.indexOf(t);if(-1===a)return e;var c=k.a.createElement("mark",{style:ka},t),o=a>0&&e.slice(0,a),i=[];o&&i.push(o),i.push(c);var l=e.indexOf(t,a+r);if(-1===l){var u=a+r,d=u<n&&e.slice(u);return d&&i.push(d),i}var s=a+r,f=s!==l&&e.slice(s,l);f&&i.push(f),i.push(c);var m=e.indexOf(t,l+r);if(-1===m){var p=l+r;return p<n&&e.slice(p)&&i.push(f),i}var v=l+r,g=v<n&&e.slice(v,m);if(g&&i.push(g),i.push(c),m+r===n)return i;var E=e.slice(m+r);if(E===t)return i.push(c),i;var b=E.split(t);if(b.length<=1)return i.push(E),i;for(var O=0;O<b.length;O++){var j=b[O];0!==O||""!==j?O!==b.length-1||""===j?(""!==j&&i.push(j),i.push(c)):i.push(j):i.push(c)}return i}(t.str,e)}}var Pa,Aa,Fa=function(e){var t=e.pageNumber,n=e.pageRef,r=e.materialWidth,a=Object(A.d)(la),c=Object(A.d)(ia),o=c&&c.page===t?Ra(c):void 0,i=function(e,t){return e?t?function(n){return t(Object(Q.a)(Object(Q.a)({},n),{},{str:e(n)}))}:e:t}(""!==a?Na(a):void 0,o);return k.a.createElement("div",{style:{overflow:"auto"}},k.a.createElement(wr.components.MaterialMouseUp,{page:t},k.a.createElement(Ta,null,k.a.createElement(wa.b,{inputRef:function(e){n.current=e},pageNumber:t,width:r*Zr,customTextRenderer:i,renderAnnotationLayer:!1}))))},Ma=function(){var e=Object(A.c)(),t=Object(A.d)(oa);return k.a.createElement(_r.a,{startIcon:k.a.createElement(q.a,{label:"Material",control:k.a.createElement(On,{checked:"SHOW"===t})}),variant:"contained",color:"primary",onClick:function(){e(ba.pdfShowStatus("SHOW"===t?"HIDE":"SHOW"))}})},La=n(154),Ua=n.n(La),Ba=n(153),qa=n.n(Ba),Va=function(){var e=Object(A.c)();return k.a.createElement(gt.components.BiggerTooltip,{title:gt.constants.previousPageTooltip,enterDelay:gt.constants.defaultEnterDelay,enterNextDelay:gt.constants.defaultEnterNextDelay},k.a.createElement(ke.a,{type:"button",onClick:function(){e(ba.previousPage())}},k.a.createElement(qa.a,null)))},Ha=function(){var e=Object(A.c)();return k.a.createElement(gt.components.BiggerTooltip,{title:gt.constants.nextPageTooltip,enterDelay:gt.constants.defaultEnterDelay,enterNextDelay:gt.constants.defaultEnterNextDelay},k.a.createElement(ke.a,{type:"button",onClick:function(){e(ba.nextPage())}},k.a.createElement(Ua.a,null)))},Qa=function(){return k.a.createElement(kt.a,{variant:"outlined"},k.a.createElement(Nt.a,{container:!0,direction:"row"},k.a.createElement(Nt.a,{item:!0},k.a.createElement(Va,null)),k.a.createElement(Nt.a,{item:!0},k.a.createElement(Pt.a,{orientation:"vertical"})),k.a.createElement(Nt.a,{item:!0},k.a.createElement(Ha,null))))},Wa=Oa.reducer,za={actions:Oa.actions,components:S,name:Oa.name,reducer:Wa,selectors:D,constants:C},_a=function(e){return e.documentDB},Ka=Object(H.a)(_a,(function(e){return Object.keys(e)})),Ja=Object(H.a)(_a,(function(e){return Object.values(e)})),Ga=Object(H.a)(za.selectors.getPDFName,za.selectors.getTotalPages,za.selectors.getCurrentPage,Gr.selectors.getRiverMakeUps,en.selectors.getCards,en.selectors.getLastCardIDNumber,(function(e,t,n,r,a,c){return{name:e,totalPages:t,currentPage:n,riverMakeUps:r,cards:a,lastCardIDNumber:c}})),Xa=Object(Et.a)({name:"documentDB",initialState:{},reducers:{storeInDocumentDB:function(e,t){var n=t.payload;return Object(Q.a)(Object(Q.a)({},e),{},Object(F.a)({},n.name,n))},removeFromDocumentDB:function(e,t){var n=t.payload;return Object.fromEntries(Object.entries(e).filter((function(e){return e[0]!==n})))},updateDocumentDB:function(e,t){var n=t.payload;return Object(Q.a)(Object(Q.a)({},e),n.reduce((function(e,t){return e[t.name]=t,e}),{}))}}}),$a=Xa.actions,Ya=Xa,Za=n(160),ec=n.n(Za),tc=n(155),nc=n.n(tc),rc=function(e,t){if(void 0!==za.selectors.getPDFName(t)){var n=Ga(t);e($a.storeInDocumentDB(n))}},ac=n(223),cc=function(e){e(Gr.actions.allRiversReset()),e(en.actions.allCardsReset()),e(Ut.ActionCreators.clearHistory())},oc=function(e,t,n){e(en.actions.allCardsReplace({cards:t.cards,lastCardIDNumber:t.lastCardIDNumber})),e(Gr.actions.allRiversReplace(t.riverMakeUps)),void 0!==n&&t.name!==n&&e(za.actions.existingDocumentPayload({pdfName:t.name,currentPage:t.currentPage,totalPages:t.totalPages})),e(Ut.ActionCreators.clearHistory())},ic=function(e){return function(t,n){var r=n(),a=za.selectors.getPDFName(r);t(a&&a===e?function(e,t){cc(e);var n=t(),r=za.selectors.getPDFName(n);e($a.removeFromDocumentDB(r))}:$a.removeFromDocumentDB(e))}},lc=function(e){var t=e.document,n=e.afterClick,r=Object(A.c)();return k.a.createElement(gt.components.BiggerTooltip,{title:gt.constants.loadSavedDocumentTooltip,enterDelay:gt.constants.defaultEnterDelay,enterNextDelay:gt.constants.defaultEnterNextDelay},k.a.createElement(ke.a,{type:"button",onClick:function(){r(function(e){return function(t,n){var r=n(),a=za.selectors.getPDFName(r),c=za.selectors.getPDF(r),o=_a(r);rc(t,r);var i=o[e];oc(t,i,c||a?a:"")}}(t)),n()}},k.a.createElement(nc.a,{fontSize:"small"})))},uc=n(314),dc=n(299),sc=n(300),fc=n(301),mc=n(302),pc=n(156),vc=n.n(pc),gc=function(e){var t=e.document,n=e.handleClose,r=e.open,a=Object(A.c)();return k.a.createElement(uc.a,{open:r,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},k.a.createElement(dc.a,{id:"alert-dialog-title"},"Delete "+t+" and all associated card data?"),k.a.createElement(sc.a,null,k.a.createElement(fc.a,{id:"alert-dialog-description"},"This change can not be undone.")),k.a.createElement(mc.a,null,k.a.createElement(_r.a,{onClick:n,color:"primary"},"Abort"),k.a.createElement(_r.a,{onClick:function(){a(ic(t)),n()},color:"primary",autoFocus:!0},"Delete document and associated card data")))},Ec=function(e){var t=e.document,n=e.afterClick,r=Object(R.useState)(!1),a=Object(Rt.a)(r,2),c=a[0],o=a[1];return k.a.createElement("div",null,k.a.createElement(gt.components.BiggerTooltip,{title:gt.constants.deleteDocumentTooltip,enterDelay:gt.constants.defaultEnterDelay,enterNextDelay:gt.constants.defaultEnterNextDelay},k.a.createElement(ke.a,{type:"button",onClick:function(){o(!0)}},k.a.createElement(vc.a,{fontSize:"small"}))),k.a.createElement(gc,{document:t,open:c,handleClose:function(){o(!1),n()}}))},bc=function(e){var t=e.document,n=e.afterClick;return k.a.createElement(Nt.a,{container:!0,direction:"row"},k.a.createElement(Nt.a,{item:!0},k.a.createElement(lc,{document:t,afterClick:n})),k.a.createElement(Nt.a,{item:!0},k.a.createElement(Pt.a,{orientation:"vertical"})),k.a.createElement(Nt.a,{item:!0},k.a.createElement(Ec,{document:t,afterClick:n})))},Oc=function(e){var t=e.document,n=e.afterClick;return k.a.createElement(Nt.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",spacing:1},k.a.createElement(Nt.a,{item:!0},t.replace(".pdf","")),k.a.createElement(Nt.a,{item:!0},k.a.createElement(kt.a,{variant:"outlined"},k.a.createElement(bc,{document:t,afterClick:n}))))},jc=function(e){var t=e.afterClick,n=Object(A.d)(za.selectors.getPDFName),r=Object(A.d)(Ka).filter((function(e){return e!==n})).sort(),a=yn();return k.a.createElement("span",null,r.length>0&&[k.a.createElement(An.a,{key:a(),component:"span",variant:"h6"},gt.constants.existingDataText),k.a.createElement(An.a,{key:a(),component:"span"},k.a.createElement("ul",{style:{listStyleType:"square"}},r.map((function(e){return e?k.a.createElement("li",{key:a()},k.a.createElement(Oc,{document:e,afterClick:t,key:a()})):null}))))])},yc=function(e){var t=e.afterClick,n=Object(A.d)(za.selectors.getPDFName),r=yn();return k.a.createElement("span",null,n&&[k.a.createElement(An.a,{key:r(),component:"span",variant:"h6"},gt.constants.activeDocumentText),k.a.createElement(Nt.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",spacing:1},k.a.createElement(Nt.a,{item:!0},n.replace(".pdf","")),k.a.createElement(Nt.a,{item:!0},k.a.createElement(kt.a,{variant:"outlined"},k.a.createElement(Ec,{document:n,afterClick:t})))),k.a.createElement(Pt.a,{key:r(),style:{marginTop:"6px"}})])},hc=n(157),Cc=n.n(hc),Dc=function(e){var t=e.handleClose,n=e.label,r=Object(A.c)(),a=Object(R.useRef)(null);return k.a.createElement(R.Fragment,null,k.a.createElement(Or.a,{onClick:function(){a.current.click()}},k.a.createElement(_r.a,{variant:"contained",color:"primary",disableElevation:!0,startIcon:k.a.createElement(Cc.a,null)},n)),k.a.createElement("input",{ref:a,style:{display:"none"},onChange:function(e){var n,a=e.target.files,c=a?a[0]:null;c&&r((n=c,function(e,t){var r=n.name,a=t(),c=za.selectors.getPDFName(a),o=_a(a);if(rc(e,a),e(za.actions.pdfUpload(n)),r!==c){var i=o[r];i?oc(e,i):cc(e)}})),t()},type:"file",accept:".pdf"}))},Sc=n(158),Tc=n.n(Sc),wc=function(){var e=Object(A.c)();return k.a.createElement("span",{onClick:function(){e((function(e,t){var n=t();rc(e,n),n=t();var r=Ja(n),a=(new Date).toLocaleString();ac(JSON.stringify(r),a+" ClayMemory.txt")}))}},k.a.createElement(_r.a,{variant:"contained",color:"primary",disableElevation:!0,startIcon:k.a.createElement(Tc.a,null)},gt.constants.downloadDatasetsText))},xc=n(159),Ic=n.n(xc),Rc=function(e){var t=e.handleClose,n=e.label,r=Object(R.useRef)(null),a=Object(R.useState)(),c=Object(Rt.a)(a,2),o=c[0],i=c[1];return k.a.createElement(R.Fragment,null,k.a.createElement(Or.a,{onClick:function(){r.current.click()}},k.a.createElement(_r.a,{variant:"contained",color:"primary",disableElevation:!0,startIcon:k.a.createElement(Ic.a,null)},n)),k.a.createElement("input",{ref:r,style:{display:"none"},onChange:function(e){var t=e.target.files,n=t?t[0]:null;n&&i(n)},type:"file",accept:".txt"}),k.a.createElement(kc,{handleClose:function(){t(),i(void 0)},open:!!o,file:o}))},kc=function(e){var t=e.handleClose,n=e.open,r=e.file,a=Object(A.c)(),c=Object(A.d)(za.selectors.getPDFName);return k.a.createElement(uc.a,{open:n,onClose:t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},k.a.createElement(dc.a,{id:"alert-dialog-title"},"Load the uploaded dataset?"),k.a.createElement(sc.a,null,k.a.createElement(fc.a,{id:"alert-dialog-description"},"This overwrites existing data of the uploaded document-datasets and can not be undone.")),k.a.createElement(mc.a,null,k.a.createElement(_r.a,{onClick:t,color:"primary"},"Abort"),k.a.createElement(_r.a,{onClick:function(){var e=new FileReader;e.readAsText(r),e.onload=function(){var n=JSON.parse(e.result),r=n.find((function(e){return e.name===c}));a($a.updateDocumentDB(n)),r&&oc(a,r),t()}},color:"primary",autoFocus:!0},"Load datasets and possibly overwrite existing data")))},Nc=function(){var e=k.a.useState(null),t=Object(Rt.a)(e,2),n=t[0],r=t[1],a=function(){r(null)};return k.a.createElement("div",null,k.a.createElement(ke.a,{type:"button",onClick:function(e){r(e.currentTarget)}},k.a.createElement(ec.a,null)),k.a.createElement(br.a,{id:"simple-menu",anchorEl:n,keepMounted:!0,open:Boolean(n),onClose:a,MenuListProps:{style:{paddingLeft:"8px",paddingRight:"8px"}}},k.a.createElement(yc,{afterClick:a}),k.a.createElement(jc,{afterClick:a}),k.a.createElement(Pt.a,null),k.a.createElement(Dc,{handleClose:a,label:"Load document"}),k.a.createElement(Pt.a,null),k.a.createElement(Rc,{handleClose:a,label:gt.constants.uploadDatasetsText}),k.a.createElement(Pt.a,null),k.a.createElement(Or.a,{onClick:function(){a()}},k.a.createElement(wc,null))))},Pc=Ya.reducer,Ac={name:Ya.name,reducer:Pc,selectors:T,components:w},Fc=n(161),Mc=n.n(Fc),Lc=n(309),Uc=function(){var e=Object(A.c)(),t=Object(A.d)(Gr.selectors.getRiverContentFilter),n=Object(R.useState)(t),r=Object(Rt.a)(n,2),a=r[0],c=r[1];Object(R.useEffect)((function(){a!==t&&c(t)}),[t]);var o=Object(R.useState)("cards"),i=Object(Rt.a)(o,2),l=i[0],u=i[1],d=function(){e(Gr.actions.riverContentFilter(""))},s=function(){e(za.actions.documentSearch(""))},f="cards"===l?function(t){""===t&&e(Gr.actions.riverContentFilter("")),c(t)}:function(t){""===t&&e(za.actions.documentSearch("")),c(t)},m="cards"===l?d:s,p="cards"===l?function(){return e(Gr.actions.riverContentFilter(a))}:function(){return e(za.actions.documentSearch(a))};return k.a.createElement(Nt.a,{container:!0,direction:"row",alignItems:"center",spacing:1},k.a.createElement(Nt.a,{item:!0},k.a.createElement(Lc.a,{variant:"outlined",color:"secondary",native:!0,value:"cards"===l?"Filter cards":"Search document",onChange:function(e){var t;t="Search document"===e.target.value?"document":"cards",u(t),"cards"===t?s():d(),c("")}},k.a.createElement("option",null,"Filter cards"),k.a.createElement("option",null,"Search document"))),k.a.createElement(Nt.a,{item:!0},k.a.createElement(Mc.a,{value:a,placeholder:"cards"===l?"Filter cards":"Search document",onChange:f,onCancelSearch:m,onRequestSearch:p,cancelOnEscape:!0})))},Bc=n(306),qc=n(303),Vc=function(e){return e.displayData},Hc=Object(H.a)(Vc,(function(e){return e.windowMeasurements})),Qc=Object(H.a)(Vc,(function(e){return e.topOffset})),Wc=Object(H.a)(Vc,(function(e){return e.listIndex})),zc=Object(H.a)(Vc,(function(e){return e.scrollToPage})),_c=Object(H.a)(Vc,(function(e){return e.scrollToOriginSpan})),Kc=Object(H.a)(Vc,(function(e){return e.currentView}));!function(e){e[e.RiverMaterial=0]="RiverMaterial",e[e.RiverExplorer=1]="RiverExplorer",e[e.CardExplorer=2]="CardExplorer"}(Pa||(Pa={}));var Jc,Gc={topOffset:0,currentView:Pa.RiverMaterial,listIndex:0,scrollToPage:!1,scrollToOriginSpan:null},Xc=hn("topOffset"),$c=hn("windowMeasurements"),Yc=hn("listIndex"),Zc=hn("scrollToPage"),eo=function(e){return Object(Q.a)(Object(Q.a)({},e),{},{scrollToPage:!0})},to=hn("scrollToOriginSpan"),no=hn("currentView"),ro=Object(Et.a)({name:"displayData",initialState:Gc,reducers:{topOffset:Xc,windowMeasurements:$c,listIndex:Yc,scrollToPage:Zc,currentView:no,scrollToOriginSpan:to},extraReducers:(Aa={},Object(F.a)(Aa,en.actions.allCardsReplace.type,(function(e,t){var n=t.payload;return Object(Q.a)(Object(Q.a)({},e),{},{currentView:n.lastCardIDNumber>1?Pa.RiverExplorer:Pa.RiverMaterial})})),Object(F.a)(Aa,za.actions.pdfUpload.type,(function(e){return Object(Q.a)(Object(Q.a)({},e),{},{currentView:Pa.RiverMaterial})})),Object(F.a)(Aa,za.actions.pageUpdate.type,eo),Object(F.a)(Aa,za.actions.nextPage.type,eo),Object(F.a)(Aa,za.actions.previousPage.type,eo),Object(F.a)(Aa,za.actions.spanOrigin.type,eo),Aa)}),ao=ro.actions,co=ro,oo=function(){var e=Object(A.d)(Kc),t=Object(A.c)();return k.a.createElement(kt.a,null,k.a.createElement(Bc.a,{value:e,onChange:function(e,n){t(ao.currentView(n))}},k.a.createElement(qc.a,{label:"River-Material"}),k.a.createElement(qc.a,{label:"River Explorer"})))},io=n(162),lo=n.n(io),uo=function(){var e=k.a.useState(null),t=Object(Rt.a)(e,2),n=t[0],r=t[1];return k.a.createElement("div",null,k.a.createElement(ke.a,{type:"button",onClick:function(e){r(e.currentTarget)}},k.a.createElement(lo.a,null)),k.a.createElement(br.a,{anchorEl:n,keepMounted:!0,open:Boolean(n),onClose:function(){r(null)},MenuListProps:{style:{paddingLeft:"8px",paddingRight:"8px"}}},k.a.createElement(An.a,{variant:"h6"},"Show:"),k.a.createElement(Nt.a,{container:!0,direction:"row",justify:"space-between",spacing:1},k.a.createElement(Nt.a,{item:!0},k.a.createElement(kt.a,{variant:"outlined",style:{paddingLeft:"4px",paddingRight:"4px"}},k.a.createElement(Gr.components.RiverContentFormGroup,null))),k.a.createElement(Nt.a,{item:!0},k.a.createElement(kt.a,{variant:"outlined",style:{padding:"4px"}},k.a.createElement(Nt.a,{container:!0,direction:"column",spacing:1},k.a.createElement(Nt.a,{item:!0},k.a.createElement(Gr.components.ShowRiverCheckbox,null)),k.a.createElement(Nt.a,{item:!0},k.a.createElement(za.components.ShowMaterialCheckbox,null))))))))},so=function(){var e=Object(A.d)(za.selectors.getPDFName),t=Object(A.d)(Qc),n=Object(R.useRef)(null),r=Object(A.c)();return Object(R.useLayoutEffect)((function(){if(n.current){var e=n.current.getBoundingClientRect().bottom;e!==t&&r(ao.topOffset(e))}}),[n,r,t]),k.a.createElement(za.components.PageKeyboardControl,null,k.a.createElement(Xr.a,{ref:n,position:"sticky"},k.a.createElement($r.a,{variant:"regular",disableGutters:!0},k.a.createElement(Nt.a,{container:!0,direction:"row",alignItems:"center",justify:"space-between"},k.a.createElement(Nt.a,{item:!0,xs:6},k.a.createElement(Nt.a,{container:!0,direction:"row",alignItems:"center",spacing:1,style:{paddingLeft:"4px"}},k.a.createElement(Nt.a,{item:!0,style:{maxWidth:"15%"}},k.a.createElement(za.components.PageChooser,null)),k.a.createElement(Nt.a,{item:!0},k.a.createElement(za.components.PageNavigation,null)),k.a.createElement(Nt.a,{item:!0},k.a.createElement(en.components.UndoRedoCard,null)),k.a.createElement(Nt.a,{item:!0},k.a.createElement(oo,null)))),k.a.createElement(Nt.a,{item:!0,xs:2,style:{overflowX:"auto"}},k.a.createElement(An.a,{variant:"subtitle1"},null===e||void 0===e?void 0:e.replace(".pdf",""))),k.a.createElement(Nt.a,{item:!0,xs:4},k.a.createElement(Nt.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center"},k.a.createElement(Nt.a,{item:!0},k.a.createElement(Uc,null)),k.a.createElement(Nt.a,{item:!0},k.a.createElement(uo,null)),k.a.createElement(Nt.a,{item:!0},k.a.createElement(Ac.components.DataOptions,null))))))))},fo=n(163),mo=function(){var e=Object(A.c)(),t=Object(fo.debounce)(50,(function(){var t=document.documentElement,n=t.clientWidth,r=t.clientHeight;e(ao.windowMeasurements({width:n,height:r}))}));return Object(R.useLayoutEffect)((function(){t()}),[t]),Object(R.useEffect)((function(){return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}})),null},po=function(){var e=Object(R.useState)(!1),t=Object(Rt.a)(e,2),n=t[0],r=t[1],a=Object(A.d)(za.selectors.getSpanOrigin),c=Object(A.c)();!a&&n&&r(!1),a&&!n&&r(!0);var o=function(){r(!1),c(za.actions.spanOrigin(null))},i=function(e){!n||"Escape"!==e.key&&"Esc"!==e.key||o()};return Object(R.useEffect)((function(){return document.addEventListener("keydown",i),function(){document.removeEventListener("keydown",i)}})),k.a.createElement(qt.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:n,onClose:function(e,t){"clickaway"!==t&&(r(!1),c(za.actions.spanOrigin(null)))},message:"Origin is marked",action:k.a.createElement(_r.a,{color:"secondary",size:"small",onClick:o},"UNMARK")})},vo=n(170),go=function(e,t){if(!e.current)return!1;var n=e.current.children.item(1);if(n){var r=n.children.item(t.spanIndexStart);return!!r&&(r.scrollIntoView({behavior:"auto",block:"center",inline:"center"}),!0)}return!1},Eo=function(e){var t=e.page,n=e.pageRef,r=Object(A.d)(_c),a=Object(A.d)(za.selectors.getCurrentPage),c=Object(A.d)(Wc),o=Object(A.c)();return Object(R.useEffect)((function(){r&&r.page===t&&c+1===a&&function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(10===a)return console.log("invalid origin clicked",n),r(za.actions.spanOrigin(null)),r(ao.scrollToOriginSpan(null)),!1;go(t,n)?r(ao.scrollToOriginSpan(null)):setTimeout((function(){e(t,n,r,a+1)}),10)}(n,r,o)}),[o,n,r,t,c,a]),null},bo=function(e){var t=e.riverID,n=e.materialHeight,r=e.materialWidth;return k.a.createElement("div",{style:{maxWidth:.35*r}},k.a.createElement(Gr.components.CardRiver,{riverID:t,materialHeight:n}))},Oo=function(e){var t,n=e.index,r=e.data,a=e.style,c=n+1,o=Gr.model.pageNumberToRiverMakeUpID(c),i=r.materialHeights,l=Object(A.d)(Gr.selectors.getRiverShowState),u=Object(A.d)(za.selectors.getPDFShowStatus),d=null===(t=Object(A.d)(Hc))||void 0===t?void 0:t.width,s=Object(R.useRef)(null);return k.a.createElement("div",{style:Object(Q.a)({},a)},k.a.createElement(Eo,{page:c,pageRef:s}),k.a.createElement(Gr.components.SwitchActiveRiver,{riverID:o},k.a.createElement(Nt.a,{container:!0,justify:"space-between",direction:"row",alignItems:"flex-start"},k.a.createElement(Nt.a,{item:!0,hidden:"HIDE"===l},k.a.createElement(bo,{riverID:o,materialHeight:i.get(c),materialWidth:d})),k.a.createElement(Nt.a,{item:!0,hidden:"HIDE"===u},k.a.createElement(za.components.PDFPage,{pageNumber:c,pageRef:s,materialWidth:d})))),k.a.createElement(Pt.a,{style:{marginTop:10}}))},jo=function(e){var t=e.listRef,n=Object(A.d)(Wc),r=Object(A.d)(za.selectors.getCurrentPage),a=Object(A.d)(zc),c=Object(A.d)(Kc),o=Object(A.d)(Gr.selectors.getOriginRequest),i=Object(A.c)();return Object(R.useEffect)((function(){var e;r!==n+1&&a?(null===(e=t.current)||void 0===e||e.scrollToItem(r-1,"start"),i(ao.scrollToPage(!1))):Object(A.b)((function(){i(za.actions.pageUpdate(n+1)),i(ao.scrollToPage(!1))}))}),[i,r,n,a,t]),Object(R.useEffect)((function(){o&&Object(A.b)((function(){c!==Pa.RiverMaterial&&i(ao.currentView(Pa.RiverMaterial)),i(za.actions.spanOrigin(o)),i(ao.scrollToOriginSpan(o)),i(Gr.actions.riverOriginRequest(null))}))}),[i,t,o,c]),null},yo=function(e){var t=e.listRef,n=e.materialHeights,r=Object(R.useRef)(n);return Object(R.useEffect)((function(){var e;n!==r.current&&(null===(e=t.current)||void 0===e||e.resetAfterIndex(0),r.current=n)})),null},ho=function(e){var t=e.pdfProxyRef,n=e.cachedPageDimensions,r=Object(R.useRef)(),a=Object(A.d)(Hc),c=a?Array.from(n.keys()).reduce((function(e,t){return e.set(t,function(e,t,n){var r=t.get(e),a=n*za.constants.MaterialMultiplier/r[0];return r[1]*a+20}(t,n,a.width)),e}),new Map):void 0,o=Object(A.c)(),i=Object(A.d)(Qc);return k.a.createElement(R.Fragment,null,a&&c&&k.a.createElement(vo.a,{height:a.height-i,itemCount:t.current.numPages,itemSize:function(e){return c.get(e+1)+20},itemData:{materialHeights:c},ref:r,width:"100%",onItemsRendered:function(e){o(ao.listIndex(e.visibleStopIndex))}},Oo),c&&k.a.createElement(yo,{listRef:r,materialHeights:c}),k.a.createElement(jo,{listRef:r}))},Co=function(){return k.a.createElement(R.Fragment,null,k.a.createElement(za.components.PDFDocument,{ChildComponent:ho}),k.a.createElement(po,null))},Do=function(e){var t=e.riverID,n=Object(A.d)(Hc),r=Object(A.d)(Qc);return n&&r?k.a.createElement("div",{style:{marginBottom:"8px",marginTop:"4px"}},k.a.createElement(Gr.components.CardRiver,{riverID:t,materialHeight:(null===n||void 0===n?void 0:n.height)-r-10})):null},So=function(){var e=Object(A.d)(an),t=yn();return k.a.createElement(Nt.a,{container:!0,justify:"space-evenly",alignItems:"center",spacing:2,style:{width:"100%",height:"100%"}},e.map((function(e){return k.a.createElement(Nt.a,{item:!0,xs:4,key:t()},k.a.createElement(Gr.components.SwitchActiveRiver,{riverID:e},k.a.createElement(Do,{riverID:e})))})))},To=function(){var e=Object(A.d)(Kc);return k.a.createElement(R.Fragment,null,k.a.createElement("div",{hidden:e!==Pa.RiverMaterial,style:{width:"100%",height:"100%"}},k.a.createElement(Co,null)),k.a.createElement("div",{hidden:e!==Pa.RiverExplorer,style:{width:"100%",height:"100%"}},k.a.createElement(So,null)))},wo=function(){return k.a.createElement(en.components.UndoRedoKeyListener,null,k.a.createElement("div",null,k.a.createElement(wr.components.ContextMenu,null),k.a.createElement(wr.components.SelectionSnackbar,null),k.a.createElement(mo,null),k.a.createElement(Nt.a,{container:!0,justify:"center",direction:"column",alignItems:"stretch",style:{height:"100%",width:"100%"}},k.a.createElement(Nt.a,{item:!0},k.a.createElement(so,null)),k.a.createElement(Nt.a,{item:!0},k.a.createElement(To,null)))))},xo=co.reducer,Io={actions:co.actions,components:I,name:co.name,reducer:xo,selectors:x},Ro=n(74),ko=n(164),No=n.n(ko),Po=Object(Ro.a)((function(e){return e}),(function(e){return t=e,Object(Q.a)(Object(Q.a)({},t),{},{pdf:null});var t}),{whitelist:[za.name]}),Ao={key:"root",storage:No.a,transforms:[Po]},Fo=n(165),Mo=[en.actions.cardPush.type,en.actions.cardRemove.type,en.actions.cardReplace.type,en.actions.cardFieldReplace.type],Lo=Object(M.combineReducers)((Jc={},Object(F.a)(Jc,Ac.name,Ac.reducer),Object(F.a)(Jc,wr.name,wr.reducer),Object(F.a)(Jc,Gr.constants.NAME,Bt()(Gr.reducer,{filter:Object(Ut.includeAction)(Mo)})),Object(F.a)(Jc,en.name,Bt()(en.reducer,{filter:Object(Ut.includeAction)(Mo)})),Object(F.a)(Jc,za.name,za.reducer),Object(F.a)(Jc,Io.name,Io.reducer),Jc)),Uo=Object(Ro.b)(Ao,Lo),Bo=Object(Fo.composeWithDevTools)({})(Object(M.applyMiddleware)(L.a)),qo=Object(M.createStore)(Uo,Bo),Vo=Object(Ro.c)(qo),Ho=n(166);n(254),P.a.render(k.a.createElement(k.a.StrictMode,null,k.a.createElement(A.a,{store:qo},k.a.createElement(Ho.a,{loading:null,persistor:Vo},k.a.createElement(Io.components.Display,null)))),document.getElementById("root"))}},[[181,1,2]]]);
//# sourceMappingURL=main.58d5696a.chunk.js.map