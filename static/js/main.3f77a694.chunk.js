(this.webpackJsonprem=this.webpackJsonprem||[]).push([[0],{176:function(e,t,n){e.exports=n(273)},199:function(e,t,n){},200:function(e,t,n){},204:function(e,t){},206:function(e,t){},207:function(e,t){},208:function(e,t){},209:function(e,t){},273:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"NAME",(function(){return x}));var a={};n.r(a),n.d(a,"PDF_UPLOADED",(function(){return q})),n.d(a,"MATERIAL_LOADED",(function(){return H})),n.d(a,"DISPLAY_STATUS",(function(){return Q})),n.d(a,"PAGE_UPDATE",(function(){return G})),n.d(a,"ZOOM_QUEUE",(function(){return B})),n.d(a,"MATERIAL_DATA",(function(){return W}));var c={};n.r(c),n.d(c,"getAll",(function(){return X})),n.d(c,"getPDF",(function(){return Y})),n.d(c,"getPDFName",(function(){return Z})),n.d(c,"getRenderCritialData",(function(){return J})),n.d(c,"getTotalPages",(function(){return K})),n.d(c,"getCurrentPage",(function(){return $})),n.d(c,"getPageControlData",(function(){return ee})),n.d(c,"getDocumentRef",(function(){return te})),n.d(c,"getMaterialData",(function(){return ne})),n.d(c,"getTimeStamp",(function(){return re})),n.d(c,"getMaterialSpans",(function(){return ae})),n.d(c,"getSpanIndex",(function(){return ce})),n.d(c,"getMaterialBoundingRects",(function(){return oe})),n.d(c,"getDataExists",(function(){return ue})),n.d(c,"getDisplayStatus",(function(){return ie})),n.d(c,"displayStatusIsShow",(function(){return le})),n.d(c,"getZoomQueue",(function(){return se}));var o={};n.r(o),n.d(o,"pdfUpload",(function(){return Oe})),n.d(o,"materialUploaded",(function(){return Ee})),n.d(o,"materialLoaded",(function(){return ve})),n.d(o,"tryInterval",(function(){return be})),n.d(o,"captureMaterialData",(function(){return ge})),n.d(o,"setPage",(function(){return Ce})),n.d(o,"movePage",(function(){return ye})),n.d(o,"nextPage",(function(){return Re})),n.d(o,"previousPage",(function(){return Se})),n.d(o,"toggleDisplayState",(function(){return he})),n.d(o,"setZoomQueue",(function(){return Ie})),n.d(o,"zoomToCardOrigin",(function(){return Ae})),n.d(o,"emptyZoomQueue",(function(){return Te}));var u={};n.r(u),n.d(u,"NAME",(function(){return Xe}));var i={};n.r(i),n.d(i,"FOCUS_UPDATE",(function(){return Ye})),n.d(i,"DISPLAY_FOCUS_UPDATE",(function(){return Ze}));var l={};n.r(l),n.d(l,"getAll",(function(){return Je})),n.d(l,"getFocus",(function(){return Ke})),n.d(l,"getDisplayFocus",(function(){return $e}));var s={};n.r(s),n.d(s,"updateFocus",(function(){return et})),n.d(s,"tryUpdateFocus",(function(){return tt})),n.d(s,"toggleContextMenuFocus",(function(){return nt})),n.d(s,"updateDisplayFocus",(function(){return rt}));var d={};n.r(d),n.d(d,"PageChooser",(function(){return Be})),n.d(d,"PageNavigation",(function(){return xe})),n.d(d,"MaterialDisplayColumnWithSize",(function(){return lt}));var f={};n.r(f),n.d(f,"transformInputOrigin",(function(){return Ot}));var p={};n.r(p),n.d(p,"NAME",(function(){return Et}));var m={};n.r(m),n.d(m,"CARD_UPDATE",(function(){return vt})),n.d(m,"CARD_PUSH",(function(){return bt})),n.d(m,"CARD_REMOVE",(function(){return gt})),n.d(m,"CARD_GOAL",(function(){return Ct})),n.d(m,"DOCUMENT_CHANGE",(function(){return jt}));var O={};n.r(O),n.d(O,"getAll",(function(){return Dt})),n.d(O,"getLastCardIDNumber",(function(){return yt})),n.d(O,"getCards",(function(){return Rt})),n.d(O,"getGoalCard",(function(){return St}));var E={};n.r(E),n.d(E,"cardPush",(function(){return Tt})),n.d(E,"cardUpdate",(function(){return Nt})),n.d(E,"updateCardContent",(function(){return Mt})),n.d(E,"pushCardContent",(function(){return Ut})),n.d(E,"removeCard",(function(){return _t})),n.d(E,"setGoalCard",(function(){return Pt})),n.d(E,"resetGoalCard",(function(){return kt}));var v={};n.r(v),n.d(v,"NAME",(function(){return Ft}));var b={};n.r(b),n.d(b,"ARCHIVE_CURRENT_DATA",(function(){return wt})),n.d(b,"LOAD_DOCUMENT_DATA_SETS",(function(){return Lt}));var g={};n.r(g),n.d(g,"archiveDBData",(function(){return Vt})),n.d(g,"loadDocumentDataSets",(function(){return xt}));var C={};n.r(C),n.d(C,"getAll",(function(){return Qt})),n.d(C,"getDocumentDB",(function(){return Gt})),n.d(C,"getDocumentNames",(function(){return Bt})),n.d(C,"getDocumentDataSets",(function(){return Wt}));var j={};n.r(j),n.d(j,"NAME",(function(){return $t}));var D={};n.r(D),n.d(D,"getAll",(function(){return en})),n.d(D,"getRiverMakeUps",(function(){return tn})),n.d(D,"getActiveRiverMakeUpID",(function(){return nn})),n.d(D,"getPushToRiver",(function(){return rn})),n.d(D,"getPushToRiverMakeUp",(function(){return an})),n.d(D,"getActiveRiverMakeUp",(function(){return cn})),n.d(D,"getPushToRiverCardIDs",(function(){return on})),n.d(D,"getPushToRiverCards",(function(){return un})),n.d(D,"getActiveRiverCardIDs",(function(){return ln})),n.d(D,"getActiveRiverCards",(function(){return sn})),n.d(D,"getRiverShowState",(function(){return dn})),n.d(D,"riverShowStateIsShow",(function(){return fn})),n.d(D,"getHoveredCardData",(function(){return pn})),n.d(D,"getSourceCard",(function(){return mn})),n.d(D,"getLastRiverIDNumber",(function(){return On})),n.d(D,"getRiverContentState",(function(){return En})),n.d(D,"getRiverContentFilter",(function(){return vn}));var y={};n.r(y),n.d(y,"toggleRiverShowState",(function(){return wn})),n.d(y,"setRiverContentState",(function(){return Ln})),n.d(y,"setPushToRiver",(function(){return Vn})),n.d(y,"trySetPushToRiver",(function(){return xn})),n.d(y,"setHoveredCard",(function(){return qn})),n.d(y,"trySetHoveredCard",(function(){return Hn})),n.d(y,"setSourceCard",(function(){return Qn})),n.d(y,"trySetSourceCard",(function(){return Gn})),n.d(y,"resetSourceCard",(function(){return Bn})),n.d(y,"tryResetSourceCard",(function(){return Wn})),n.d(y,"setContentFilter",(function(){return zn}));var R={};n.r(R),n.d(R,"ActiveRiverView",(function(){return Or})),n.d(R,"SummaryRiverView",(function(){return fr})),n.d(R,"RiverContentFormGroup",(function(){return Dr}));var S={};n.r(S),n.d(S,"collectCurrentDBData",(function(){return Nr}));var h={};n.r(h),n.d(h,"archiveCurrentDBData",(function(){return Mr})),n.d(h,"downloadDBData",(function(){return _r})),n.d(h,"changeDocument",(function(){return Pr}));var I={};n.r(I),n.d(I,"NAME",(function(){return Fr}));var A={};n.r(A),n.d(A,"TOGGLE_CONTEXT_MENU",(function(){return wr})),n.d(A,"CLOSE_CONTEXT_MENU",(function(){return Lr})),n.d(A,"OPEN_CONTEXT_MENU",(function(){return Vr})),n.d(A,"SELECTED_STRING",(function(){return xr})),n.d(A,"SELECTED_PARENT",(function(){return qr})),n.d(A,"DOCUMENT_POSITION",(function(){return Hr}));var T={};n.r(T),n.d(T,"getAll",(function(){return Qr})),n.d(T,"getContextMenuState",(function(){return Gr})),n.d(T,"getContextMenuRef",(function(){return Br})),n.d(T,"getContextMenuFullCardsRef",(function(){return Wr})),n.d(T,"getContextMenuQARefs",(function(){return zr})),n.d(T,"getCurrentSelectionPosition",(function(){return Xr})),n.d(T,"getContextMenuInitData",(function(){return Yr})),n.d(T,"getCurrentSelectedString",(function(){return Zr})),n.d(T,"getCurrentSelectedParent",(function(){return Jr})),n.d(T,"getCurrentOrigin",(function(){return Kr}));var N={};n.r(N),n.d(N,"toggleContextMenu",(function(){return $r})),n.d(N,"closeContextMenu",(function(){return ea})),n.d(N,"openContextMenu",(function(){return ta})),n.d(N,"grabSelectionForContextMenu",(function(){return na})),n.d(N,"hasNonEmptyOrigin",(function(){return ra})),n.d(N,"grabSelectionForSourceMenu",(function(){return aa})),n.d(N,"updateManuallySelectedString",(function(){return ca})),n.d(N,"resetManuallySelectedString",(function(){return oa})),n.d(N,"selectedParent",(function(){return ua})),n.d(N,"updateSelectionPosition",(function(){return ia}));var M={};n.r(M),n.d(M,"ContextMenuContainer",(function(){return ya})),n.d(M,"SelectionSnackbar",(function(){return Ia}));var U={};n.r(U),n.d(U,"contextMenuContainsTargetNode",(function(){return Aa}));var _={};n.r(_),n.d(_,"ControlContainer",(function(){return wa})),n.d(_,"ControlBar",(function(){return ic}));var P=n(0),k=n.n(P),F=n(13),w=n.n(F),L=n(312),V=n(2),x="displayData",q=x+"/PDF_UPLOADED",H=x+"/MATERIAL_LOADED",Q=x+"/DISPLAY_STATUS",G=x+"/PAGE_UPDATE",B=x+"/ZOOM_QUEUE",W=x+"/MATERIAL_DATA",z=n(8),X=function(e){return e[x]},Y=Object(z.a)(X,(function(e){return{pdf:e.pdf?e.pdf:null}})),Z=Object(z.a)(X,(function(e){return e.pdfName})),J=Object(z.a)(X,(function(e){return{pdf:e.pdf,currentPage:e.currentPage,documentRef:e.documentRef}})),K=Object(z.a)(X,(function(e){return e.totalPages})),$=Object(z.a)(X,(function(e){return e.currentPage})),ee=Object(z.a)(K,$,(function(e,t){return{currentPage:t,totalPages:e}})),te=Object(z.a)(X,(function(e){return e.documentRef})),ne=Object(z.a)(X,(function(e){return e.materialData})),re=Object(z.a)(ne,(function(e){return e.materialDataTimeStamp})),ae=Object(z.a)(ne,(function(e){return e.materialSpans})),ce=function(e,t){return ae(e).indexOf(t)},oe=Object(z.a)(ne,(function(e){return e.materialBoundingRects})),ue=Object(z.a)(re,(function(e){return e>0})),ie=Object(z.a)(X,(function(e){return e.displayStatus})),le=Object(z.a)(ie,(function(e){return"SHOW"===e})),se=Object(z.a)(X,(function(e){return e.zoomQueue})),de=function(){var e=0;return function(){var t=e;return e++,t}},fe=n(67),pe=function(e){return{span:e,rect:e.getBoundingClientRect()}},me=function(e){var t=Array.from(e.querySelectorAll("span"));if(0===t.length)return null;var n=function(e){var t,n=[],r=[],a=Object(fe.a)(e);try{for(a.s();!(t=a.n()).done;){var c=t.value;n.push(c.span),r.push(c.rect)}}catch(o){a.e(o)}finally{a.f()}return{spans:n,boundingRects:r}}(function(e){return e.map(pe)}(t).sort((function(e,t){return e.rect.y-t.rect.y})));return{materialSpans:n.spans,materialBoundingRects:n.boundingRects}},Oe=function(e){return{type:q,payload:e}},Ee=function(e){return function(t){var n=e.target.files,r=n?n[0]:null;r&&t(Oe(r))}},ve=function(e){return{type:H,payload:e}},be=function(e,t,n){var r=de(),a=setInterval((function(){(r()>e||n())&&clearInterval(a)}),t)};function ge(e){return function(t,n){var r=n(),a=e.current;if(a){var c=Date.now(),o=me(a);if(o&&re(r)<c){var u=Object(V.a)(Object(V.a)({},o),{},{materialDataTimeStamp:c});t({type:W,payload:u}),t(Te())}else be(10,20,(function(){var e=me(a);if(e&&re(n())<c){var r=Object(V.a)(Object(V.a)({},e),{},{materialDataTimeStamp:c});return t({type:W,payload:r}),!0}return!1}))}}}var Ce=function(e){return{type:G,payload:e}},je=function(e,t){return e===t+1?1:e},De=function(e,t){return 0===e?t:e},ye=function(e){return function(t,n){var r=ee(n()),a=r.currentPage,c=r.totalPages;switch(e){case"NEXT":t({type:G,payload:je(a+1,c)});break;case"PREVIOUS":t({type:G,payload:De(a-1,c)})}}},Re=function(){return ye("NEXT")},Se=function(){return ye("PREVIOUS")},he=function(){return function(e,t){var n="SHOW"===ie(t())?"HIDE":"SHOW";e({type:Q,payload:n})}},Ie=function(e){return{type:B,payload:e}},Ae=function(e,t){return function(n){n(Ce(t)),n(Ie(e))}},Te=function(){return function(e,t){var n=t(),r=se(n);if(r){var a=ae(n)[r];a.focus(),a.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),e(Ie(null))}}},Ne=n(5),Me=n(119),Ue=n(311),_e=n(313),Pe=n(146),ke=n.n(Pe),Fe=n(145),we=n.n(Fe),Le=function(){var e=Object(Ne.c)();return k.a.createElement(Me.a,{type:"button",onClick:function(){e(Se())}},k.a.createElement(we.a,null))},Ve=function(){var e=Object(Ne.c)();return k.a.createElement(Me.a,{type:"button",onClick:function(){e(Re())}},k.a.createElement(ke.a,null))},xe=function(){return k.a.createElement(Ue.a,{variant:"outlined"},k.a.createElement(L.a,{container:!0,direction:"row"},k.a.createElement(L.a,{item:!0},k.a.createElement(Le,null)),k.a.createElement(L.a,{item:!0},k.a.createElement(_e.a,{orientation:"vertical"})),k.a.createElement(L.a,{item:!0},k.a.createElement(Ve,null))))},qe=n(17),He=n(326),Qe=n(277),Ge=/(\D)/,Be=function(){var e=Object(Ne.c)(),t=Object(Ne.d)(ee),n=t.currentPage,r=t.totalPages,a=Object(P.useState)({error:!1,value:null===n||void 0===n?void 0:n.toString(),userInput:null===n||void 0===n?void 0:n.toString()}),c=Object(qe.a)(a,2),o=c[0],u=c[1];return o.value!==n.toString()&&u({error:!1,value:n.toString(),userInput:n.toString()}),k.a.createElement(Ue.a,{variant:"outlined"},k.a.createElement(L.a,{item:!0},k.a.createElement(L.a,{container:!0,direction:"row",alignItems:"center",justify:"space-between"},k.a.createElement(L.a,{item:!0,style:{width:"37%"}},k.a.createElement(He.a,{inputProps:{style:{padding:"0px",fontSize:"1.25rem",fontFamily:'"Roboto", "Helvetica", "Arial", sansSerif',fontWeight:500,lineHeight:1.6,letterSpacing:"0.0075em"}},type:"text",variant:"filled",value:o.userInput,onKeyDown:function(t){if("Enter"===t.key){t.preventDefault();var n=t.target.value;o.error||e(Ce(parseInt(n)))}},onChange:function(e){var t=e.target.value;!function(e,t){if(""===e||null!==e.trim().match(Ge))return!1;var n=parseInt(e);return!(n<1||t<n)}(t,r)?u(Object(V.a)(Object(V.a)({},o),{},{error:!0,userInput:t})):u(Object(V.a)(Object(V.a)({},o),{},{error:!1,userInput:t}))},error:o.error})),k.a.createElement(L.a,{item:!0,style:{width:"61%"}},k.a.createElement(Qe.a,{variant:"h6"},"of ",r)))))},We=n(147),ze=n(105),Xe="appFocus",Ye=Xe+"/FOCUS_UPDATE",Ze=Xe+"/DISPLAY_FOCUS_UPDATE",Je=function(e){return e[Xe]},Ke=Object(z.a)(Je,(function(e){return e.userFocus})),$e=Object(z.a)(Je,(function(e){return e.displayFocus})),et=function(e){return{type:Ye,payload:e}},tt=function(e){return function(t,n){Ke(n())!==e&&t(et(e))}},nt=function(){return function(e,t){switch(Ke(t())){case"CONTEXT_MENU":e(et("DOCUMENT"));break;case"DOCUMENT":e(et("CONTEXT_MENU"))}}},rt=function(e){return{type:Ze,payload:e}},at={userFocus:"CONTROL",displayFocus:"ACTIVE_RIVER"},ct={actions:s,constants:u,reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case Ye:return Object(V.a)(Object(V.a)({},e),{},{userFocus:r});case Ze:return Object(V.a)(Object(V.a)({},e),{},{displayFocus:r});default:return e}},selectors:l,actionTypes:i},ot=(n(199),n(200),n(87));ot.pdfjs.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(ot.pdfjs.version,"/pdf.worker.js");var ut={cMapUrl:"cmaps/",cMapPacked:!0};var it=Object(Ne.b)(J,{materialLoaded:ve,captureMaterialData:ge})((function(e){var t=e.parentSize,n=e.pdf,r=e.currentPage,a=e.materialLoaded,c=e.captureMaterialData,o=e.documentRef,u=Object(Ne.c)();return k.a.createElement(ot.Document,{file:n,options:ut,onLoadSuccess:function(e){var t=e.numPages;a(t)},inputRef:o,onItemClick:function(e){var t=e.pageNumber;u(Ce(parseInt(t)))}},n&&k.a.createElement(ot.Page,{width:t.width,pageNumber:r,onRenderSuccess:function(){document.querySelectorAll(".react-pdf__Page__textContent").forEach((function(e){var t=e.style;t.top="0",t.left="0",t.transform=""})),c(o)}}))}));var lt=Object(We.withSize)({monitorHeight:!0,noPlaceholder:!0})((function(e){var t=e.size,n=e.hidden,r=Object(Ne.c)(),a=Object(P.useState)(3),c=Object(qe.a)(a,2),o=c[0],u=c[1];return k.a.createElement(L.a,{item:!0,style:{width:"60%"},onMouseEnter:function(){r(ct.actions.tryUpdateFocus("DOCUMENT")),u(20)},onMouseLeave:function(){u(3)},hidden:n},k.a.createElement(ze.a,{elevation:o},k.a.createElement(it,{parentSize:t})))})),st=n(16),dt={displayStatus:"SHOW",totalPages:1e3,currentPage:1,documentRef:Object(P.createRef)(),pageSpans:{},zoomQueue:null,materialData:{materialDataTimeStamp:-1/0}},ft={actions:o,actionTypes:a,components:d,constants:r,reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case q:return Object(V.a)(Object(V.a)({},e),{},{pdf:r,pdfName:r.name});case H:return Object(V.a)(Object(V.a)({},e),{},{totalPages:r});case G:return Object(V.a)(Object(V.a)({},e),{},{currentPage:r});case Q:return Object(V.a)(Object(V.a)({},e),{},{displayStatus:r});case W:return Object(V.a)(Object(V.a)({},e),{},{materialData:r,pageSpans:Object(V.a)(Object(V.a)({},e.pageSpans),{},Object(st.a)({},e.currentPage,r.materialSpans.length-1))});default:return e}},selectors:c},pt=n(49),mt=function(e,t){return e[t]},Ot=function(e,t,n,r){return r?t===n?function(e,t){return Object(V.a)(Object(V.a)({},t),e)}(e,r):"note"===t&&function(e){return!Object(pt.isNullOrUndefined)(e.q)}(r)?Object(V.a)(Object(V.a)({},r),{},Object(st.a)({},n,e)):"note"===n?mt(e,t):"q"===n?{q:e.a,a:r.a}:{a:e.q,q:r.q}:t===n?e:"note"===t?function(e,t){return Object(st.a)({q:{},a:{}},t,e)}(e,n):"note"===n?mt(e,t):function(e,t,n){var r;return r={},Object(st.a)(r,t,{}),Object(st.a)(r,n,e[t]),r}(e,t,n)},Et="cards",vt=Et+"/CARD_UPDATE",bt=Et+"/CARD_PUSH",gt=Et+"/CARD_REMOVE",Ct=Et+"/CARD_GOAL",jt=Et+"/DOCUMENT_CHANGE",Dt=function(e){return e[Et].present},yt=Object(z.a)(Dt,(function(e){return e.lastCardIDNumber})),Rt=Object(z.a)(Dt,(function(e){return e.cards})),St=Object(z.a)(Dt,(function(e){return e.goalCard})),ht={REPLACE:function(e,t){return t},APPEND:function(e,t){return e+t}},It={note:function(e,t){return Object(V.a)(Object(V.a)({},e),{},{content:t(e.content)})},q:function(e,t){var n=e.content;return Object(V.a)(Object(V.a)({},e),{},{content:Object(V.a)(Object(V.a)({},n),{},{q:t(n.q)})})},a:function(e,t){var n=e.content;return Object(V.a)(Object(V.a)({},e),{},{content:Object(V.a)(Object(V.a)({},n),{},{a:t(n.a)})})}},At=function(e,t,n,r,a){var c=function(e,t){return function(n){return ht[e](n,t)}}(r,e);return!!a?It[n](a,c):It[n]({type:t,content:"Q-A"===t?{q:"",a:""}:""},c)},Tt=function(e){return function(t,n){var r;t({type:bt,payload:Object(V.a)(Object(V.a)({},e),{},{card:Object(V.a)(Object(V.a)({},e.card),{},{cardID:(r=yt(n()),(r+1).toString())})})})}},Nt=function(e){return{type:vt,payload:e}},Mt=function(e,t,n,r,a){return function(c,o){var u=o(),i=Rt(u)[t],l=At(e,i.type,n,r,i);c(Nt({card:Object(V.a)(Object(V.a)({},l),{},{origin:a})}))}},Ut=function(e,t,n,r,a){var c=At(e,r,t,n);return Tt({card:Object(V.a)(Object(V.a)({},c),{},{origin:a})})},_t=function(e){return{type:gt,payload:e}},Pt=function(e,t){return{type:Ct,payload:Object(V.a)(Object(V.a)({},e),{},{creationType:t})}},kt=function(){return{type:Ct,payload:null}},Ft="documentDB",wt=Ft+"/ARCHIVE_CURRENT_DATA",Lt=Ft+"/LOAD_DOCUMENT_DATA_SETS",Vt=function(e){return{type:wt,payload:e}},xt=function(e,t){return{type:Lt,payload:{dbData:e,newActiveDataSet:t}}},qt={documentDB:{}},Ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case wt:return Object(V.a)(Object(V.a)({},e),{},{documentDB:Object(V.a)(Object(V.a)({},e.documentDB),{},Object(st.a)({},r.name,r))});case Lt:return Object(V.a)(Object(V.a)({},e),{},{documentDB:Object(V.a)(Object(V.a)({},e.documentDB),r.dbData.reduce((function(e,t){return e[t.name]=t,e}),{}))});default:return e}},Qt=function(e){return e[Ft].present},Gt=Object(z.a)(Qt,(function(e){return e.documentDB})),Bt=Object(z.a)(Gt,(function(e){return Object.keys(e)})),Wt=Object(z.a)(Gt,(function(e){return Object.values(e)})),zt={actions:g,actionTypes:b,constants:v,reducer:Ht,selectors:C},Xt={cards:{0:{cardID:"0",type:"Q-A",content:{q:"Was ist der Sinn des Lebens?",a:"42"}},1:{cardID:"1",type:"Q-A",content:{q:"Welches Layout macht mehr Sinn?",a:"??"}},2:{cardID:"2",type:"Note",content:"Note here"}},lastCardIDNumber:2,goalCard:null},Yt=function(e,t){var n=Object(V.a)({},e.cards);return delete n[t],Object(V.a)(Object(V.a)({},e),{},{cards:n})},Zt={services:f,constants:p,actionTypes:m,actions:E,reducer:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,r=arguments.length>1?arguments[1]:void 0,a=r.type,c=r.payload;switch(a){case bt:var o=n.lastCardIDNumber+1;return(t=Object(V.a)({},n.cards))[c.card.cardID]=c.card,Object(V.a)(Object(V.a)({},n),{},{cards:t,lastCardIDNumber:o});case vt:return e=c.card.cardID,(t=Object(V.a)({},n.cards))[e]=c.card,Object(V.a)(Object(V.a)({},n),{},{cards:t});case gt:return Yt(n,c);case Ct:return Object(V.a)(Object(V.a)({},n),{},{goalCard:c});case jt:return c?Object(V.a)(Object(V.a)({},Xt),{},{cards:c.cards,lastCardIDNumber:c.lastCardIDNumber}):Xt;case zt.actionTypes.LOAD_DOCUMENT_DATA_SETS:return c.newActiveDataSet?Object(V.a)(Object(V.a)({},Xt),{},{cards:c.newActiveDataSet.cards,lastCardIDNumber:c.newActiveDataSet.lastCardIDNumber}):n;default:return n}},selectors:O},Jt=n(26),Kt=n.n(Jt),$t="cardRiverState",en=function(e){return e[$t].present},tn=Object(z.a)(en,(function(e){return e.riverMakeUps})),nn=Object(z.a)(en,(function(e){return e.activeRiverMakeUpID})),rn=Object(z.a)(en,(function(e){return e.pushToRiverID})),an=Object(z.a)(tn,rn,(function(e,t){return e[t]})),cn=Object(z.a)(tn,nn,(function(e,t){return e[t]})),on=Object(z.a)(an,(function(e){return e.cardIDs})),un=Object(z.a)(on,Zt.selectors.getCards,(function(e,t){return e.map((function(e){return t[e]}))})),ln=Object(z.a)(cn,(function(e){return e.cardIDs})),sn=Object(z.a)(ln,Zt.selectors.getCards,(function(e,t){return e.map((function(e){return t[e]}))})),dn=Object(z.a)(en,(function(e){return e.riverShowState})),fn=Object(z.a)(dn,(function(e){return"SHOW"===e})),pn=Object(z.a)(en,(function(e){return{id:e.highlightedCardID,field:e.highlightedCardField}})),mn=Object(z.a)(en,Zt.selectors.getCards,(function(e,t){return e.sourceCard&&t[e.sourceCard]?e.sourceCard:null})),On=Object(z.a)(en,(function(e){return e.lastRiverIDNumber})),En=Object(z.a)(en,(function(e){return e.riverContentState})),vn=Object(z.a)(en,(function(e){return e.contentFilter})),bn=n(86),gn=function(e){var t=e.storeValue,n=void 0===t?"":t,r=e.saveChanges,a=e.style,c=Object(bn.a)(e,["storeValue","saveChanges","style"]),o=Object(P.useState)({storeValue:n,mutableValue:n}),u=Object(qe.a)(o,2),i=u[0],l=u[1];return i.storeValue!==n&&l({storeValue:n,mutableValue:n}),k.a.createElement(He.a,Object.assign({multiline:!0,variant:"filled",value:i.mutableValue,onChange:function(e){var t=e.target.value;l(Object(V.a)(Object(V.a)({},i),{},{mutableValue:t}))},onBlur:function(e){r(e.target.value)},style:a},c))},Cn=n(148),jn=n.n(Cn),Dn=function(e){var t=e.cardID,n=Object(Ne.c)();return k.a.createElement(Me.a,{type:"button",onClick:function(){n(Zt.actions.removeCard(t))},onMouseEnter:function(){n(ct.actions.tryUpdateFocus("RIVER_CONTROL"))}},k.a.createElement(jn.a,null))},yn=n(149),Rn=n.n(yn),Sn=function(e){var t=e.cardOrigin,n=Object(Ne.c)();return k.a.createElement(Me.a,{type:"button",onClick:function(){n(ct.actions.updateDisplayFocus("ACTIVE_RIVER")),n(ft.actions.zoomToCardOrigin(t.spanIndex,t.page))}},k.a.createElement(Rn.a,null))},hn=n(151),In=n.n(hn),An=n(150),Tn=n.n(An),Nn=function(e){var t=e.cardConfig,n=e.creationType,r=Object(Ne.c)(),a=Object(Ne.d)(Zt.selectors.getGoalCard),c=Object(P.useState)(!0),o=Object(qe.a)(c,2),u=o[0],i=o[1];a?function(e,t,n){return e.cardID===n.cardID&&t===n.creationType}(t,n,a)?u&&i(!1):u||i(!0):u||i(!0);return k.a.createElement(Me.a,{type:"button",onMouseEnter:function(){r(ct.actions.tryUpdateFocus("RIVER_CONTROL"))},onClick:function(){r(u?Zt.actions.setGoalCard(t,n):Zt.actions.resetGoalCard())}},u?k.a.createElement(Tn.a,null):k.a.createElement(In.a,null))},Mn=$t+"/RIVER_SHOW_STATE",Un=$t+"/RIVER_CONTENT_STATE",_n=$t+"/RIVER_PUSH_STATE",Pn=$t+"/RIVER_HOVERED_CARD",kn=$t+"/RIVER_CARD_SOURCE",Fn=$t+"/RIVER_CONTENT_FILTER",wn=function(){return function(e,t){e({type:Mn,payload:fn(t())?"HIDE":"SHOW"})}},Ln=function(e){return{type:Un,payload:e}},Vn=function(e){return{type:_n,payload:e}},xn=function(e){return function(t,n){rn(n())!==e&&t(Vn(e))}},qn=function(e,t){return{payload:{id:e,field:t},type:Pn}},Hn=function(e,t){return function(n,r){var a=r(),c=pn(a);c.id===e&&c.field===t||n(qn(e,t))}},Qn=function(e,t){return{type:kn,payload:{origin:t,sourceField:e}}},Gn=function(e,t){return function(n,r){var a=mn(r());a&&a.sourceField===e&&a.origin===t||n(Qn(e,t))}},Bn=function(){return{type:kn,payload:null}},Wn=function(){return function(e,t){null!==mn(t())&&e(Bn())}},zn=function(e){return{type:Fn,payload:e}},Xn={border:"4px solid green",borderRadius:"4px"},Yn=function(e){var t=e.config,n=Object(Ne.c)(),r=Object(Ne.d)(pn).id,a=t.cardID===r,c="ACTIVE_RIVER"===Object(Ne.d)(ct.selectors.getDisplayFocus);return k.a.createElement(Ue.a,{variant:"elevation",elevation:5,style:a?Xn:void 0},k.a.createElement(gn,{saveChanges:function(e){n(Zt.actions.updateCardContent(e,t.cardID,"note","REPLACE",t.origin))},storeValue:t.content,label:"Note",variant:"filled",style:{backgroundColor:"#CBF3F0"},InputLabelProps:{style:{color:"#000000"}},onMouseEnter:function(){n(ct.actions.tryUpdateFocus("RIVER")),n(Gn("note",t.origin))}}),k.a.createElement(Dn,{cardID:t.cardID}),c&&k.a.createElement(Nn,{cardConfig:t,creationType:"note"}),t.origin&&k.a.createElement(Sn,{cardOrigin:t.origin}))},Zn=function(e){var t,n,r=e.config,a=Object(Ne.c)(),c=Object(Ne.d)(pn),o=c.id,u=c.field,i=r.cardID===o,l="ACTIVE_RIVER"===Object(Ne.d)(ct.selectors.getDisplayFocus);return k.a.createElement(Ue.a,{variant:"elevation",elevation:5},k.a.createElement(L.a,{container:!0,direction:"column",spacing:1},k.a.createElement(L.a,{item:!0},k.a.createElement("div",{style:i&&"q"===u?Xn:void 0},k.a.createElement(gn,{saveChanges:function(e){a(Zt.actions.updateCardContent(e,r.cardID,"q","REPLACE",r.origin))},storeValue:r.content.q,label:"Question",variant:"filled",style:{backgroundColor:"#FFBF69"},InputLabelProps:{style:{color:"#000000"}},onMouseEnter:function(){a(ct.actions.tryUpdateFocus("RIVER")),a(Gn("q",r.origin))}}),l&&k.a.createElement(Nn,{cardConfig:r,creationType:"q"}),r.origin&&!Object(pt.isNullOrUndefined)(null===(t=r.origin.q)||void 0===t?void 0:t.spanIndex)&&k.a.createElement(Sn,{cardOrigin:r.origin.q}))),k.a.createElement(L.a,{item:!0},k.a.createElement("div",{style:i&&"a"===u?Xn:void 0},k.a.createElement(gn,{saveChanges:function(e){a(Zt.actions.updateCardContent(e,r.cardID,"a","REPLACE",r.origin))},storeValue:r.content.a,label:"Answer",style:{backgroundColor:"#2EC4B6"},InputLabelProps:{style:{color:"#000000"}},onMouseEnter:function(){a(ct.actions.tryUpdateFocus("RIVER")),a(Gn("a",r.origin))}}),l&&k.a.createElement(Nn,{cardConfig:r,creationType:"a"}),r.origin&&!Object(pt.isNullOrUndefined)(null===(n=r.origin.a)||void 0===n?void 0:n.spanIndex)&&k.a.createElement(Sn,{cardOrigin:r.origin.a}))),k.a.createElement(L.a,{item:!0},k.a.createElement(Dn,{cardID:r.cardID}))))},Jn=function(e){var t=e.config,n=e.riverID;switch(t.type){case"Note":return k.a.createElement(Yn,{config:t,riverID:n});case"Q-A":return k.a.createElement(Zn,{config:t,riverID:n})}},Kn=function(){return k.a.createElement(L.a,{item:!0},k.a.createElement(_e.a,null))},$n=n(329),er=n(315),tr=n(316),nr=n(152),rr=n.n(nr),ar=function(){var e=Object(Ne.c)();return k.a.createElement(Me.a,{type:"button",onClick:function(){e(Zt.actions.cardPush({card:{type:"Note",content:""}}))},onMouseEnter:function(){e(ct.actions.tryUpdateFocus("RIVER_CONTROL"))}},k.a.createElement(rr.a,null))},cr=n(153),or=n.n(cr),ur=function(){var e=Object(Ne.c)();return k.a.createElement(Me.a,{type:"button",onClick:function(){e(Zt.actions.cardPush({card:{type:"Q-A",content:{q:"",a:""}}}))},onMouseEnter:function(){e(ct.actions.tryUpdateFocus("RIVER_CONTROL"))}},k.a.createElement(or.a,null))},ir=function(e){var t=e.riverID,n=e.gridItems,r=e.summary,a=Object(P.useState)(3),c=Object(qe.a)(a,2),o=c[0],u=c[1],i=Object(Ne.d)(rn);t===i&&3===o?u(20):t!==i&&3!==o&&u(3);var l=Object(Ne.c)();return k.a.createElement($n.a,{defaultExpanded:!0,onMouseEnter:function(){l(xn(t))},elevation:o},k.a.createElement(er.a,null,k.a.createElement(Qe.a,{variant:"h6",align:"center",style:{MozUserSelect:"none",WebkitUserSelect:"none",msUserSelect:"none"}},r)),k.a.createElement(tr.a,null,k.a.createElement(L.a,{container:!0,direction:"column",spacing:2,justify:"center",alignItems:"stretch"},k.a.createElement(L.a,{item:!0},k.a.createElement(ur,null),k.a.createElement(ar,null),k.a.createElement(_e.a,null)),n)))},lr=function(e){var t=e.riverID,n=e.riverCards,r=Object(Ne.d)(En),a=Object(Ne.d)(vn);console.log(a);var c=Object(P.useMemo)((function(){var e=n;return"NONE"===r?[]:("ALL"!==r&&("QAS"===r&&(e=n.filter((function(e){return"Q-A"===e.type}))),"NOTES"===r&&(e=n.filter((function(e){return"Note"===e.type})))),""!==a&&(e=e.filter((function(e){switch(e.type){case"Note":return function(e,t){return e.content.includes(t)}(e,a);case"Q-A":return function(e,t){return e.content.a.includes(t)||e.content.q.includes(t)}(e,a)}return!1}))),function(e,t){var n=de();return e.reduce((function(e,r,a,c){return e.push(k.a.createElement(L.a,{item:!0,key:n()},k.a.createElement(Jn,{config:r,riverID:t,key:n()}))),a<c.length-1&&e.push(k.a.createElement(Kn,{key:n()})),e}),[])}(e,t))}),[n,t,r,a]);return k.a.createElement(ir,{riverID:t,gridItems:c,summary:t})},sr=function(e){return"CardRiver "+e},dr=function(){var e=Object(Ne.d)(ct.selectors.getDisplayFocus),t=Object(Ne.d)(ft.selectors.getCurrentPage),n=Object(Ne.d)(Zt.selectors.getCards),r=Object.values(Object(Ne.d)(tn)),a=Object(P.useRef)(null);Object(P.useEffect)((function(){"SUMMARY_RIVER"===e&&null!==a.current&&(a.current.focus(),a.current.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}))}),[e,t]);var c=de();return k.a.createElement(L.a,{container:!0,justify:"flex-start",direction:"row",alignItems:"stretch",spacing:1},r.map((function(e){return e.cardIDs.length>0?k.a.createElement(L.a,{item:!0,ref:(r=e.riverID,parseInt(r.replace("CardRiver ",""))===t?a:null),key:c()},k.a.createElement(lr,{riverID:e.riverID,riverCards:e.cardIDs.map((function(e){return n[e]})),key:c()})):null;var r})))},fr=function(){var e=Object(Ne.d)(ct.selectors.getDisplayFocus);return k.a.createElement(L.a,{item:!0,hidden:"SUMMARY_RIVER"!==e},k.a.createElement(dr,null))},pr=function(){var e=Object(Ne.d)(nn),t=Object(Ne.d)(sn);return k.a.createElement(lr,{riverID:e,riverCards:t})},mr=function(e){var t=e.hidden;return k.a.createElement(L.a,{item:!0,style:{width:"38%"},hidden:t},k.a.createElement(pr,null))},Or=function(){var e=Object(Ne.d)(ct.selectors.getDisplayFocus),t=Object(Ne.d)(ft.selectors.displayStatusIsShow),n=Object(Ne.d)(fn);return k.a.createElement(L.a,{item:!0,hidden:"ACTIVE_RIVER"!==e},k.a.createElement(L.a,{container:!0,justify:"space-around",direction:"row",alignItems:"stretch"},k.a.createElement(mr,{hidden:!n}),k.a.createElement(ft.components.MaterialDisplayColumnWithSize,{hidden:!t})))},Er=n(317),vr=n(318),br=n(7),gr=n(328),Cr=n(110),jr=Object(br.a)({root:{color:Cr.a[400],"&$checked":{color:Cr.a[600]}},checked:{}})((function(e){return k.a.createElement(gr.a,Object.assign({color:"default"},e))})),Dr=function(){var e=Object(Ne.d)(En),t=Object(Ne.c)(),n="ALL"===e||"QAS"===e,r="ALL"===e||"NOTES"===e,a=function(e){n||"QAS"!==e?r||"NOTES"!==e?n&&"QAS"===e?t(Ln(r?"NOTES":"NONE")):r&&"NOTES"===e&&t(Ln(n?"QAS":"NONE")):t(Ln(n?"ALL":"NOTES")):t(Ln(r?"ALL":"QAS"))};return k.a.createElement(Er.a,null,k.a.createElement(vr.a,{control:k.a.createElement(jr,{checked:n,onClick:function(){a("QAS")}}),label:"QAs"}),k.a.createElement(vr.a,{control:k.a.createElement(jr,{checked:r,onClick:function(){a("NOTES")}}),label:"Notes"}))},yr=n(109),Rr={riverMakeUps:Object(st.a)({},sr(1),{riverID:sr(1),cardIDs:["2","0","1"]}),pushToRiverID:sr(1),activeRiverMakeUpID:sr(1),lastRiverIDNumber:1,riverShowState:"SHOW",highlightedCardID:null,highlightedCardField:null,riverContentState:"ALL",sourceCard:null,contentFilter:""},Sr=function(e){return{riverID:sr(e),cardIDs:[]}},hr=function(e){for(var t=Object(V.a)({},e),n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.forEach((function(e){t.riverMakeUps[e.riverID]=e})),t},Ir=function(e){return Object(V.a)(Object(V.a)({},e.riverMakeUps[e.activeRiverMakeUpID]),{},{active:!1})},Ar=function(e,t){var n=Object.fromEntries(Object.entries(e.riverMakeUps).map((function(e){return[e[0],Object(V.a)(Object(V.a)({},e[1]),{},{cardIDs:e[1].cardIDs.filter((function(e){return e!==t}))})]})));return Object(V.a)(Object(V.a)({},e),{},{riverMakeUps:n})},Tr={constants:j,components:R,reducer:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rr,r=arguments.length>1?arguments[1]:void 0,a=r.type,c=r.payload;switch(a){case ft.actionTypes.PAGE_UPDATE:var o;o=n.riverMakeUps[sr(c)]?Object(V.a)({},n.riverMakeUps[sr(c)]):Sr(c);var u=Ir(n);return Object(V.a)(Object(V.a)({},hr(n,o,u)),{},{activeRiverMakeUpID:o.riverID,pushToRiverID:o.riverID});case Zt.actionTypes.CARD_PUSH:return e=Object(V.a)(Object(V.a)({},n.riverMakeUps[n.pushToRiverID]),{},{cardIDs:[].concat(Object(yr.a)(n.riverMakeUps[n.pushToRiverID].cardIDs),[c.card.cardID])}),(t=Object(V.a)({},n.riverMakeUps))[n.pushToRiverID]=e,Object(V.a)(Object(V.a)({},n),{},{riverMakeUps:t});case Zt.actionTypes.CARD_REMOVE:return Ar(n,c);case Mn:return Object(V.a)(Object(V.a)({},n),{},{riverShowState:c});case Un:return Object(V.a)(Object(V.a)({},n),{},{riverContentState:c});case _n:return Object(V.a)(Object(V.a)({},n),{},{pushToRiverID:c});case Pn:return Object(V.a)(Object(V.a)({},n),{},{highlightedCardID:c.id,highlightedCardField:c.field});case ct.actionTypes.FOCUS_UPDATE:var i=n.sourceCard;return"DOCUMENT"===c&&i&&(i=null),null!==n.highlightedCardID&&"CONTEXT_MENU"!==c?Object(V.a)(Object(V.a)({},n),{},{highlightedCardID:null,highlightedCardField:null,sourceCard:i}):Object(V.a)(Object(V.a)({},n),{},{sourceCard:i});case Zt.actionTypes.DOCUMENT_CHANGE:return c?Object(V.a)(Object(V.a)({},Rr),{},{riverMakeUps:c.riverMakeUps,activeRiverMakeUpID:c.activeRiverMakeUpID,pushToRiverID:c.pushToRiverID,lastRiverIDNumber:c.lastRiverIDNumber}):Rr;case zt.actionTypes.LOAD_DOCUMENT_DATA_SETS:return c.newActiveDataSet?Object(V.a)(Object(V.a)({},Rr),{},{riverMakeUps:c.newActiveDataSet.riverMakeUps,activeRiverMakeUpID:c.newActiveDataSet.activeRiverMakeUpID,pushToRiverID:c.newActiveDataSet.pushToRiverID,lastRiverIDNumber:c.newActiveDataSet.lastRiverIDNumber}):n;case kn:return Object(V.a)(Object(V.a)({},n),{},{sourceCard:c});case Fn:return Object(V.a)(Object(V.a)({},n),{},{contentFilter:c});default:return n}},selectors:D,actions:y},Nr=Object(z.a)(ft.selectors.getPDFName,Tr.selectors.getRiverMakeUps,Tr.selectors.getActiveRiverMakeUpID,Tr.selectors.getPushToRiver,Tr.selectors.getLastRiverIDNumber,Zt.selectors.getCards,Zt.selectors.getLastCardIDNumber,(function(e,t,n,r,a,c,o){return{name:e,riverMakeUps:t,activeRiverMakeUpID:n,pushToRiverID:r,lastRiverIDNumber:a,cards:c,lastCardIDNumber:o}})),Mr=function(){return function(e,t){var n=t();if(void 0!==ft.selectors.getPDFName(n)){var r=Nr(n);e(zt.actions.archiveDBData(r))}}},Ur=n(244),_r=function(){return function(e,t){e(Mr());var n=zt.selectors.getDocumentDataSets(t()),r=(new Date).toLocaleString();Ur(JSON.stringify(n),r+" ClayMemory.txt")}},Pr=function(e){return function(t,n){var r=e.name,a=n(),c=ft.selectors.getPDFName(a),o=zt.selectors.getDocumentDB(a);if(void 0!==c){var u=Nr(a);t(zt.actions.archiveDBData(u))}if(t(ft.actions.pdfUpload(e)),r!==c){var i=o[r];t(i?{type:Zt.actionTypes.DOCUMENT_CHANGE,payload:i}:{type:Zt.actionTypes.DOCUMENT_CHANGE}),t(Jt.ActionCreators.clearHistory())}}},kr=function(e,t){var n=Object(P.useRef)((function(){}));Object(P.useEffect)((function(){n.current=t}),[t]),Object(P.useEffect)((function(){var t=function(e){return n.current(e)};return document.addEventListener(e,t),function(){document.removeEventListener(e,t)}}),[e])},Fr="creationData",wr=Fr+"/TOGGLE_CONTEXT_MENU",Lr=Fr+"/CLOSE_CONTEXT_MENU",Vr=Fr+"/OPEN_CONTEXT_MENU",xr=Fr+"/SELECTED_STRING",qr=Fr+"/SELECTED_PARENT",Hr=Fr+"/SELECITON_POSITION",Qr=function(e){return e[Fr].present},Gr=Object(z.a)(Qr,(function(e){return e.open})),Br=Object(z.a)(Qr,(function(e){return e.menuRef})),Wr=Object(z.a)(Qr,(function(e){return e.fullCardRef})),zr=Object(z.a)(Qr,(function(e){return e.qaRefs})),Xr=Object(z.a)(Qr,(function(e){return e.selectionPosition})),Yr=Object(z.a)(Xr,Gr,Br,zr,Tr.selectors.getPushToRiverCards,(function(e,t,n,r,a){return{position:e,state:t,menuRef:n,qaRefs:r,riverCards:a}})),Zr=Object(z.a)(Qr,(function(e){return e.manuallySelectedString})),Jr=Object(z.a)(Qr,(function(e){return e.selectedParentSpan})),Kr=Object(z.a)((function(e){return e}),ft.selectors.getCurrentPage,Jr,(function(e,t,n){return{spanIndex:ft.selectors.getSpanIndex(e,n),page:t}})),$r=function(){return function(e,t){var n=t();ft.selectors.getDataExists(n)&&(e({type:wr}),e(ct.actions.toggleContextMenuFocus()))}},ea=function(){return function(e,t){Gr(t())&&(e({type:Lr}),e(ct.actions.updateFocus("DOCUMENT")))}},ta=function(){return function(e){e({type:Vr}),e(ct.actions.updateFocus("DOCUMENT"))}},na=function(e,t,n){return function(r,a){r(ea());var c,o=a(),u=void 0!==n,i=Zr(o),l=Jr(o)?Kr(o):void 0;l&&(c=Zt.services.transformInputOrigin(l,"note",t,u?Zt.selectors.getCards(o)[n].origin:void 0),console.log(l,c)),r(u?Zt.actions.updateCardContent(i,n,t,"REPLACE",c):Zt.actions.pushCardContent(i,t,"REPLACE",e,c)),r(oa())}},ra=function(e){var t,n;return!!e&&(!Object(pt.isNullOrUndefined)(e.spanIndex)||!Object(pt.isNullOrUndefined)(null===(t=e.a)||void 0===t?void 0:t.spanIndex)||!Object(pt.isNullOrUndefined)(null===(n=e.q)||void 0===n?void 0:n.spanIndex))},aa=function(e,t,n,r,a){return function(c,o){c(ea());var u=o(),i=void 0!==a,l=ra(r)?Zt.services.transformInputOrigin(r,n,t,i?Zt.selectors.getCards(u)[a].origin:void 0):void 0,s=Zr(u);c(i?Zt.actions.updateCardContent(s,a,t,"REPLACE",l):Zt.actions.pushCardContent(s,t,"REPLACE",e,l)),c(oa()),c(Tr.actions.resetSourceCard())}},ca=function(e){return{type:xr,payload:e}},oa=function(){return ca("")},ua=function(e){return{type:qr,payload:e}},ia=function(e,t){return{type:Hr,payload:{x:e,y:t}}},la={open:!1,menuRef:Object(P.createRef)(),fullCardRef:Object(P.createRef)(),qaRefs:[Object(P.createRef)(),Object(P.createRef)()],manuallySelectedString:"",selectedParentSpan:null,selectionPosition:{x:0,y:0}},sa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:la,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case wr:return Object(V.a)(Object(V.a)({},e),{},{open:!e.open});case Lr:return Object(V.a)(Object(V.a)({},e),{},{open:!1});case Vr:return Object(V.a)(Object(V.a)({},e),{},{open:!0});case Zt.actionTypes.CARD_PUSH:return"Q-A"===r.card.type?Object(V.a)(Object(V.a)({},e),{},{qaRefs:[].concat(Object(yr.a)(e.qaRefs),[Object(P.createRef)()])}):e;case xr:return Object(V.a)(Object(V.a)({},e),{},{manuallySelectedString:r});case qr:return Object(V.a)(Object(V.a)({},e),{},{selectedParentSpan:r});case Hr:return Object(V.a)(Object(V.a)({},e),{},{selectionPosition:r});default:return e}},da=n(122),fa=n(281),pa=n(108),ma=function(e){return""===e},Oa=function(e){return""===e.q||""===e.a},Ea=function(e){var t=e.cardConfig,n=e.dispatchRiver,r=Object(Ne.c)();return k.a.createElement(fa.a,{onClick:function(){n(t.type,"note",t.cardID)},onMouseEnter:function(){r(Tr.actions.trySetHoveredCard(t.cardID,"note"))}},t.type)},va=function(e){var t=e.cardConfig,n=e.dispatchRiver,r=e.qaRef,a=Object(Ne.c)();return k.a.createElement(pa.a,{label:"Q-A",parentMenuOpen:!0},k.a.createElement(fa.a,{ref:r,onClick:function(){n("Q-A","q",t.cardID)},onMouseEnter:function(){a(Tr.actions.trySetHoveredCard(t.cardID,"q"))}},"Q"),k.a.createElement(fa.a,{onClick:function(){n("Q-A","a",t.cardID)},onMouseEnter:function(){a(Tr.actions.trySetHoveredCard(t.cardID,"a"))}},"A"))},ba=function(e){var t=e.cardConfig,n=e.dispatchRiver,r=e.qaRef;switch(t.type){case"Q-A":return k.a.createElement(va,{cardConfig:t,dispatchRiver:n,qaRef:r});default:return k.a.createElement(Ea,{cardConfig:t,dispatchRiver:n})}},ga=function(e){var t=e.onClick;return k.a.createElement(fa.a,{onClick:t},"New: Q (Q-A)")},Ca=function(e){var t=e.onClick;return k.a.createElement(fa.a,{onClick:t},"New: A (Q-A)")},ja=function(e){var t=e.onClick;return k.a.createElement(fa.a,{onClick:t},"New: Note")},Da=function(e){var t=e.noteDispatch,n=e.qDispatch,r=e.aDispatch;return k.a.createElement(P.Fragment,null,k.a.createElement(ja,{onClick:t}),k.a.createElement(ga,{onClick:n}),k.a.createElement(Ca,{onClick:r}))};var ya=Object(Ne.b)(Yr)((function(e){var t=e.position,n=e.state,r=e.menuRef,a=e.qaRefs,c=e.riverCards,o=Object(Ne.d)(Wr),u=Object(Ne.c)(),i=Object(Ne.d)(Tr.selectors.getSourceCard),l=n,s=function(e,t,n){u(i?aa(e,t,i.sourceField,i.origin,n):na(e,t,n))},d=de(),f=de(),p=l?{top:t.y,left:t.x}:void 0,m=c.filter((function(e){return"string"===typeof e.content?ma(e.content):Oa(e.content)})),O=c.filter((function(e){return"string"===typeof e.content?!ma(e.content):!Oa(e.content)}));return k.a.createElement(da.a,{ref:l?r:null,keepMounted:!0,open:l,anchorReference:"anchorPosition",anchorPosition:p},l&&m.map((function(e){return k.a.createElement(ba,{cardConfig:e,dispatchRiver:s,key:d(),qaRef:"Q-A"===e.type?a[f()]:void 0})})),l&&m.length>0&&k.a.createElement(_e.a,null),l&&k.a.createElement(Da,{noteDispatch:function(){s("Note","note")},qDispatch:function(){s("Q-A","q")},aDispatch:function(){s("Q-A","a")}}),l&&O.length>0&&k.a.createElement(_e.a,null),l&&O.length>0&&k.a.createElement(pa.a,{label:"Full cards: ",parentMenuOpen:!0},k.a.createElement(fa.a,{ref:o,style:{position:"absolute"}}),O.map((function(e){return k.a.createElement(ba,{cardConfig:e,dispatchRiver:s,key:d(),qaRef:"Q-A"===e.type?a[f()]:void 0})}))))})),Ra=n(330),Sa=n(155),ha=n.n(Sa),Ia=function(){var e=Object(P.useState)(!1),t=Object(qe.a)(e,2),n=t[0],r=t[1],a=Object(Ne.c)(),c=Object(Ne.d)(Zr);""===c&&n&&r(!1),""===c||n||r(!0);var o=k.a.createElement(P.Fragment,null,k.a.createElement("div",null,"Current Selection: "),k.a.createElement("div",{style:{color:"green"}}," ",c));return k.a.createElement(Ra.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:n,onClose:function(e,t){"clickaway"===t?e.preventDefault():(r(!1),a(oa()))},message:o,action:k.a.createElement(Me.a,{size:"small","aria-label":"close",color:"inherit",onClick:function(){r(!1),a(oa())}},k.a.createElement(ha.a,{fontSize:"small"}))})},Aa=function(e,t){var n,r,a=Br(e).current,c=null===(n=Wr(e).current)||void 0===n?void 0:n.parentNode,o=zr(e).map((function(e){return e.current})).filter((function(e){return!!e})).map((function(e){return e.parentNode})),u=t.target;if(null===a||void 0===a||null===(r=a.querySelector("div.MuiPaper-root"))||void 0===r?void 0:r.contains(u))return!0;if(null===c||void 0===c?void 0:c.contains(u))return!0;var i,l=Object(fe.a)(o);try{for(l.s();!(i=l.n()).done;){if(i.value.contains(u))return!0}}catch(s){l.e(s)}finally{l.f()}return!1},Ta={actions:N,actionTypes:A,constants:I,components:M,reducer:sa,selectors:T,services:U},Na=function(e){return function(t,n){var r=e[t.key];r&&(t.preventDefault(),n(r))}},Ma={ArrowLeft:ft.actions.previousPage(),ArrowRight:ft.actions.nextPage()},Ua=Na(Ma),_a={t:Ta.actions.toggleContextMenu()},Pa=Na(_a),ka=function(e,t){},Fa={DOCUMENT:Na(Object(V.a)(Object(V.a)({},Ma),_a)),CONTEXT_MENU:Pa,RIVER:ka,RIVER_CONTROL:ka,CONTROL:Ua};var wa=Object(Ne.b)((function(){return{}}),{keyDownControl:function(e){return function(t,n){var r=n(),a=ct.selectors.getFocus(r);(0,Fa[a])(e,t,r)}},mouseDownControl:function(e){return function(t,n){!Ta.services.contextMenuContainsTargetNode(n(),e)&&t(Ta.actions.closeContextMenu())}},mouseUpControl:function(e){return function(t,n){if(!Ta.selectors.getContextMenuState(n())){var r=document.getSelection();if(r){var a=r.toString();if(""!==a){var c=n(),o=Zt.selectors.getGoalCard(c),u=ct.selectors.getFocus(c);if(o&&("RIVER"===u||"DOCUMENT"===u))"RIVER"!==u&&t(Zt.actions.updateCardContent(a,o.cardID,o.creationType,"REPLACE",o.origin)),t(Zt.actions.resetGoalCard());else{var i;if("DOCUMENT"===u)t(Tr.actions.setPushToRiver(Tr.selectors.getActiveRiverMakeUpID(c))),t(Ta.actions.selectedParent(null===(i=r.anchorNode)||void 0===i?void 0:i.parentNode)),t(Ta.actions.updateManuallySelectedString(a)),t(Ta.actions.updateSelectionPosition(e.x,e.y)),t(Ta.actions.openContextMenu());"RIVER"===u&&t(Ta.actions.updateManuallySelectedString(a))}}}}}},rightClickControl:function(e){return function(t,n){var r=n(),a=ct.selectors.getFocus(r);""!==Ta.selectors.getCurrentSelectedString(r)&&(e.preventDefault(),"RIVER"===a&&(t(Ta.actions.updateSelectionPosition(e.x,e.y)),t(Ta.actions.openContextMenu())))}}})((function(e){var t=e.keyDownControl,n=e.mouseDownControl,r=e.mouseUpControl,a=e.rightClickControl;return kr("keydown",t),kr("mousedown",n),kr("mouseup",r),kr("contextmenu",a),null})),La=n(319),Va=n(320),xa=n(327),qa=n(321),Ha=n(156),Qa=n.n(Ha),Ga=function(e){var t=e.handleClose,n=e.label,r=Object(Ne.c)(),a=Object(P.useRef)(null);return k.a.createElement(P.Fragment,null,k.a.createElement(fa.a,{onClick:function(){a.current.click()}},k.a.createElement(Qe.a,null,n)),k.a.createElement("input",{ref:a,style:{display:"none"},onChange:function(e){var n=e.target.files,a=n?n[0]:null;a&&r(Pr(a)),t()},type:"file",accept:".pdf"}))},Ba=function(e){var t=e.handleClose,n=e.label,r=Object(Ne.c)(),a=Object(Ne.d)(ft.selectors.getPDFName),c=Object(P.useRef)(null);return k.a.createElement(P.Fragment,null,k.a.createElement(fa.a,{onClick:function(){c.current.click()}},k.a.createElement(Qe.a,null,n)),k.a.createElement("input",{ref:c,style:{display:"none"},onChange:function(e){var n=e.target.files,c=n?n[0]:null;if(c){var o=new FileReader;o.readAsText(c),o.onload=function(){var e=JSON.parse(o.result),t=e.find((function(e){return e.name===a}));r(zt.actions.loadDocumentDataSets(e,t))}}t()},type:"file",accept:".txt"}))},Wa=function(){var e=Object(Ne.d)(ft.selectors.getPDFName),t=Object(Ne.d)(zt.selectors.getDocumentNames),n=k.a.useState(null),r=Object(qe.a)(n,2),a=r[0],c=r[1],o=function(){c(null)},u=Object(Ne.c)();return k.a.createElement("div",null,k.a.createElement(Me.a,{type:"button",onClick:function(e){c(e.currentTarget)}},k.a.createElement(Qa.a,null)),k.a.createElement(da.a,{id:"simple-menu",anchorEl:a,keepMounted:!0,open:Boolean(a),onClose:o},k.a.createElement(Qe.a,null,"Active Document:"),k.a.createElement(Qe.a,null,null===e||void 0===e?void 0:e.replace(".pdf","")),k.a.createElement(_e.a,null),k.a.createElement(Qe.a,null,"Documents with existing data:"),k.a.createElement(Qe.a,null,k.a.createElement("ul",null,t.map((function(e){return e?k.a.createElement("li",null,e.replace(".pdf","")):null})))),k.a.createElement(_e.a,null),k.a.createElement(Ga,{handleClose:o,label:"Load document"}),k.a.createElement(_e.a,null),k.a.createElement(fa.a,{onClick:function(){u(_r()),o()}},"Download document datasets"),k.a.createElement(_e.a,null),k.a.createElement(Ba,{handleClose:o,label:"Upload document datasets"})))},za=n(157),Xa=n.n(za),Ya=function(){var e=Object(Ne.c)(),t=Object(Ne.d)(Tr.selectors.getRiverContentFilter),n=Object(P.useState)(t),r=Object(qe.a)(n,2),a=r[0],c=r[1];return k.a.createElement(Xa.a,{value:a,placeholder:"Search in cards",onChange:function(t){""===t&&e(Tr.actions.setContentFilter("")),c(t)},onCancelSearch:function(){e(Tr.actions.setContentFilter(""))},onRequestSearch:function(){return e(Tr.actions.setContentFilter(a))}})},Za=n(158),Ja=n.n(Za),Ka=n(159),$a=n.n(Ka),ec=function(){var e=Object(Ne.c)();return k.a.createElement(Me.a,{type:"button",onClick:function(){e(Jt.ActionCreators.undo())}},k.a.createElement(Ja.a,null))},tc=function(){var e=Object(Ne.c)();return k.a.createElement(Me.a,{type:"button",onClick:function(){e(Jt.ActionCreators.redo())}},k.a.createElement($a.a,null))},nc=function(){return k.a.createElement(Ue.a,{variant:"outlined"},k.a.createElement(L.a,{container:!0,direction:"row"},k.a.createElement(L.a,{item:!0},k.a.createElement(ec,null)),k.a.createElement(L.a,{item:!0},k.a.createElement(_e.a,{orientation:"vertical"})),k.a.createElement(L.a,{item:!0},k.a.createElement(tc,null))))},rc=n(160),ac=n.n(rc),cc=function(){var e=Object(Ne.c)(),t=Object(Ne.d)(Tr.selectors.getRiverShowState);return k.a.createElement(vr.a,{control:k.a.createElement(jr,{checked:"SHOW"===t,onClick:function(){e(Tr.actions.toggleRiverShowState())}}),label:"River"})},oc=function(){var e=Object(Ne.c)(),t=Object(Ne.d)(ft.selectors.getDisplayStatus);return k.a.createElement(vr.a,{control:k.a.createElement(jr,{checked:"SHOW"===t,onClick:function(){e(ft.actions.toggleDisplayState())}}),label:"Material"})},uc=function(){var e=k.a.useState(null),t=Object(qe.a)(e,2),n=t[0],r=t[1],a=Object(Ne.d)(ct.selectors.getDisplayFocus);return k.a.createElement("div",null,k.a.createElement(Me.a,{type:"button",onClick:function(e){r(e.currentTarget)}},k.a.createElement(ac.a,null)),k.a.createElement(da.a,{anchorEl:n,keepMounted:!0,open:Boolean(n),onClose:function(){r(null)}},k.a.createElement(Qe.a,null,"Show:"),k.a.createElement(_e.a,null),k.a.createElement(L.a,{container:!0,direction:"row"},k.a.createElement(L.a,{item:!0},k.a.createElement(Tr.components.RiverContentFormGroup,null)),k.a.createElement(L.a,{item:!0},k.a.createElement(_e.a,{orientation:"vertical"})),k.a.createElement(L.a,{item:!0},"ACTIVE_RIVER"===a&&k.a.createElement(L.a,{container:!0,direction:"column"},k.a.createElement(L.a,{item:!0},k.a.createElement(cc,null)),k.a.createElement(L.a,{item:!0},k.a.createElement(oc,null)))))))},ic=function(){var e=Object(Ne.c)(),t="ACTIVE_RIVER"===Object(Ne.d)(ct.selectors.getDisplayFocus)?0:1,n=Object(Ne.d)(ft.selectors.getPDFName);return k.a.createElement(L.a,{item:!0,onMouseEnter:function(){e(ct.actions.tryUpdateFocus("CONTROL"))}},k.a.createElement(La.a,null,k.a.createElement(Va.a,{variant:"regular"},k.a.createElement(L.a,{item:!0},k.a.createElement(L.a,{container:!0,spacing:1,direction:"row",alignItems:"center",justify:"flex-start"},k.a.createElement(L.a,{item:!0,style:{width:"12%"}},k.a.createElement(ft.components.PageChooser,null)),k.a.createElement(L.a,{item:!0},k.a.createElement(ft.components.PageNavigation,null)),k.a.createElement(L.a,{item:!0},k.a.createElement(Ue.a,{variant:"outlined"},k.a.createElement(xa.a,{value:t,onChange:function(t,n){e(0===n?ct.actions.updateDisplayFocus("ACTIVE_RIVER"):ct.actions.updateDisplayFocus("SUMMARY_RIVER"))}},k.a.createElement(qa.a,{label:"ActiveRiver"}),k.a.createElement(qa.a,{label:"SummaryRiver"})))),k.a.createElement(L.a,{item:!0},k.a.createElement(nc,null)))),k.a.createElement(Qe.a,{style:{flexGrow:1}},null===n||void 0===n?void 0:n.replace(".pdf","")),k.a.createElement(uc,null),k.a.createElement(Wa,null),k.a.createElement(Ya,null))))},lc={actions:h,components:_,selectors:S},sc=n(278),dc=n(322),fc=n(323),pc=n(324),mc=n(325),Oc=n(161),Ec=n.n(Oc),vc=Object(sc.a)((function(e){return Object(dc.a)({root:{position:"fixed",bottom:e.spacing(2),right:e.spacing(2)}})}));function bc(e){var t=e.children,n=vc(),r=Object(fc.a)({disableHysteresis:!0,threshold:100});return k.a.createElement(pc.a,{in:r},k.a.createElement("div",{onClick:function(e){var t=(e.target.ownerDocument||document).querySelector("#back-to-top-anchor");t&&t.scrollIntoView({behavior:"smooth",block:"center"})},role:"presentation",className:n.root},t))}function gc(){return k.a.createElement("div",null,k.a.createElement(lc.components.ControlContainer,null),k.a.createElement(L.a,{container:!0,justify:"center",direction:"column",alignItems:"stretch",spacing:1},k.a.createElement(lc.components.ControlBar,null),k.a.createElement(Va.a,{id:"back-to-top-anchor"}),k.a.createElement(Tr.components.ActiveRiverView,null),k.a.createElement(Tr.components.SummaryRiverView,null)),k.a.createElement(bc,null,k.a.createElement(mc.a,{color:"secondary",size:"small","aria-label":"scroll back to top"},k.a.createElement(Ec.a,null))),k.a.createElement(Ta.components.ContextMenuContainer,null),k.a.createElement(Ta.components.SelectionSnackbar,null))}var Cc,jc=n(27),Dc=n(162),yc=n(163),Rc=n(76),Sc=n(164),hc=n.n(Sc),Ic=function(e){return Object(V.a)(Object(V.a)({},e),{},{menuRef:null,fullCardRef:null,qaRefs:e.qaRefs.map((function(e){return null})),selectedParentSpan:null})},Ac=function(e){return Object(V.a)(Object(V.a)({},e),{},{menuRef:Object(P.createRef)(),fullCardRef:Object(P.createRef)(),qaRefs:e.qaRefs.map((function(e){return Object(P.createRef)()}))})},Tc=Object(Rc.a)((function(e){return Object(V.a)(Object(V.a)({},e),{},{future:e.future.map(Ic),past:e.past.map(Ic),present:Ic(e.present)})}),(function(e){return Object(V.a)(Object(V.a)({},e),{},{future:e.future.map(Ac),past:e.past.map(Ac),present:Ac(e.present)})}),{whitelist:[Ta.constants.NAME]}),Nc=Object(Rc.a)((function(e){return function(e){return Object(V.a)(Object(V.a)({},e),{},{documentRef:null,materialData:null,pdf:null})}(e)}),(function(e){return function(e){return Object(V.a)(Object(V.a)({},e),{},{pdf:void 0,documentRef:Object(P.createRef)(),materialData:{materialDataTimeStamp:-1/0}})}(e)}),{whitelist:[ft.constants.NAME]}),Mc={key:"root",storage:hc.a,transforms:[Tc,Nc]},Uc=Object(jc.combineReducers)((Cc={},Object(st.a)(Cc,ct.constants.NAME,ct.reducer),Object(st.a)(Cc,Ta.constants.NAME,Kt()(Ta.reducer,{filter:Object(Jt.includeAction)([Zt.actionTypes.CARD_PUSH,Ta.actionTypes.SELECTED_STRING])})),Object(st.a)(Cc,Tr.constants.NAME,Kt()(Tr.reducer,{filter:Object(Jt.includeAction)([Zt.actionTypes.CARD_PUSH,Zt.actionTypes.CARD_REMOVE,zt.actionTypes.LOAD_DOCUMENT_DATA_SETS])})),Object(st.a)(Cc,ft.constants.NAME,ft.reducer),Object(st.a)(Cc,Zt.constants.NAME,Kt()(Zt.reducer,{filter:Object(Jt.includeAction)([zt.actionTypes.LOAD_DOCUMENT_DATA_SETS,Zt.actionTypes.CARD_PUSH,Zt.actionTypes.CARD_UPDATE,Zt.actionTypes.CARD_REMOVE,Zt.actionTypes.CARD_GOAL])})),Object(st.a)(Cc,zt.constants.NAME,Kt()(zt.reducer,{filter:Object(Jt.includeAction)([zt.actionTypes.LOAD_DOCUMENT_DATA_SETS])})),Cc)),_c=Object(Rc.b)(Mc,Uc),Pc=Object(Dc.composeWithDevTools)({stateSanitizer:function(e){return e.displayData.pdf?Object(V.a)(Object(V.a)({},e),{},{displayData:Object(V.a)(Object(V.a)({},e.displayData),{},{pdf:"PDF_FILE_IS_HERE"})}):e}})(Object(jc.applyMiddleware)(yc.a)),kc=Object(jc.createStore)(_c,Pc),Fc=Object(Rc.c)(kc),wc=n(165);w.a.render(k.a.createElement(k.a.StrictMode,null,k.a.createElement(Ne.a,{store:kc},k.a.createElement(wc.a,{loading:null,persistor:Fc},k.a.createElement(gc,null)))),document.getElementById("root"))},92:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=92}},[[176,1,2]]]);
//# sourceMappingURL=main.3f77a694.chunk.js.map